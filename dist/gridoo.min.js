!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("handlebars/runtime"),require("jQuery")):"function"==typeof define&&define.amd?define(["handlebars.runtime","jQuery"],n):"object"==typeof exports?exports.Gridoo=n(require("handlebars/runtime"),require("jQuery")):e.Gridoo=n(e.Handlebars,e.jQuery)}("undefined"!=typeof self?self:this,function(e,n){return function(e){function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=10)}([function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){return e?"disabled":""};n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"PaginationData",{get:function(){return e.paginationData},enumerable:!0,configurable:!0}),e.CalculatePaginationData=function(n){var t={};t.pageIndex=n.pageIndex,t.pageSize=n.pageSize,t.pageSizes=n.pageSizes,t.totalCount=n.totalCount,t.noOfPages=Math.ceil(n.totalCount/n.pageSize);var o=(n.pageIndex-1)*n.pageSize,a=n.pageSize>n.totalCount?n.totalCount:n.pageSize;t.range={min:o+1,max:o+a},t.firstPageLinkDisabled=1===t.noOfPages||1===t.pageIndex,t.lastPageLinkDisabled=1===t.noOfPages||t.pageIndex===t.noOfPages,t.prevPageLinkDisabled=1===t.pageIndex||t.pageIndex-1<=0,t.nextPageLinkDisabled=t.noOfPages===t.pageIndex||t.pageIndex+1>=t.noOfPages,e.paginationData=t},e}();n.Pager=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.GetColumnObject=function(e,n){if(null==e||null==n)return null;var t;return n.forEach(function(n){if(n.id===e)return void(t=n)}),t},e.SetOrder=function(e,n,t){if(null==e||null==t)return null;var o;return t.forEach(function(t){if(t.id===e)return t.order=n,void(o=t)}),o},e}();n.CommonUtil=o},function(e,t){e.exports=n},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e.None="None",e.Asc="Asc",e.Desc="Desc"}(n.GridOrderDirection||(n.GridOrderDirection={}))},function(e,n,t){var o=t(0);e.exports=(o.default||o).template({1:function(e,n,t,o,a){var i,r,l=null!=n?n:e.nullContext||{},c=t.helperMissing,s="function",u=e.escapeExpression;return'                <tr>\r\n                    <td class="gui rv-parent" valign="top" data-filter-type="'+u((r=null!=(r=t.type||(null!=n?n.type:n))?r:c,typeof r===s?r.call(l,{name:"type",hash:{},data:a}):r))+'" data-filter-key="'+u((r=null!=(r=t.id||(null!=n?n.id:n))?r:c,typeof r===s?r.call(l,{name:"id",hash:{},data:a}):r))+'" data-filter-value="'+u((r=null!=(r=t.actualValue||(null!=n?n.actualValue:n))?r:c,typeof r===s?r.call(l,{name:"actualValue",hash:{},data:a}):r))+'">\r\n                        <span>'+u((r=null!=(r=t.columnName||(null!=n?n.columnName:n))?r:c,typeof r===s?r.call(l,{name:"columnName",hash:{},data:a}):r))+"</span>\r\n"+(null!=(i=t.if.call(l,null!=n?n.filterable:n,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?i:"")+"                    </td>\r\n                    <td>"+(null!=(r=null!=(r=t.columnValue||(null!=n?n.columnValue:n))?r:c,i=typeof r===s?r.call(l,{name:"columnValue",hash:{},data:a}):r)?i:"")+"</td>\r\n                </tr>\r\n"},2:function(e,n,t,o,a){return'                        <span class="gui m-l-5 rv-child gui-caption" >\r\n                            <i class="gui gui-icon gui-icon-add hover m-l-5 cursor-pointer addFilter"></i>\r\n                            <i class="gui gui-icon gui-icon-minus hover m-l-5 cursor-pointer removeFilter"></i>\r\n                        </span>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,n,t,o,a){var i,r,l=null!=n?n:e.nullContext||{};return'<tr class="gui gui-hidden detailsRow">\r\n    <td colspan="'+e.escapeExpression((r=null!=(r=t.length||(null!=n?n.length:n))?r:t.helperMissing,"function"==typeof r?r.call(l,{name:"length",hash:{},data:a}):r))+'">\r\n        <table class="gui very compact selectable celled table detailsTable m-l-37 p-5" style="width: auto;" >\r\n            <tbody>\r\n'+(null!=(i=t.each.call(l,null!=n?n.mainRowColArray:n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?i:"")+"            </tbody>\r\n        </table>\r\n    </td>\r\n</tr>"},useData:!0})},function(e,n,t){function o(e){return e&&(e.__esModule?e.default:e)}var a=t(0);e.exports=(a.default||a).template({1:function(e,n,a,i,r,l,c){var s,u=e.escapeExpression;return"        <option "+u(o(t(23)).call(null!=n?n:e.nullContext||{},null!=(s=null!=c[1]?c[1].paginationData:c[1])?s.pageSize:s,n,{name:"Selected",hash:{},data:r}))+">"+u(e.lambda(n,n))+"</option>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,i,r,l,c){var s,u=null!=n?n:e.nullContext||{},d=e.escapeExpression,f=e.lambda;return'<div data-role="pager" class="gui left gui-subheading-2 col-md-6 text-left m-0">\r\n    <span class="gui mini compact ">\r\n        <button class="gui mini compact firstLink" aria-hidden="true" '+d(o(t(1)).call(u,null!=(s=null!=n?n.paginationData:n)?s.firstPageLinkDisabled:s,{name:"Disabled",hash:{},data:r}))+'\r\n            aria-label="Go to the first page" title="Go to the first page" data-page="1" tabindex="-1">\r\n            <i class="gui-icon gui-icon-previous"></i>\r\n        </button>\r\n        <button class="gui mini compact prevLink" aria-hidden="true" '+d(o(t(1)).call(u,null!=(s=null!=n?n.paginationData:n)?s.prevPageLinkDisabled:s,{name:"Disabled",hash:{},data:r}))+'\r\n            aria-label="Go to the previous page" title="Go to the previous page" data-page="'+d(o(t(8)).call(u,null!=(s=null!=n?n.paginationData:n)?s.pageIndex:s,"-",1,{name:"math",hash:{},data:r}))+'"\r\n            tabindex="-1">\r\n            <i class="gui-icon gui-icon-chevron-left"></i>\r\n            Prev\r\n        </button>\r\n    </span>\r\n    <span class="gui pager-input-container input">\r\n        <span class="gui m-r-5"> Page </span>\r\n        <input class="gui pager-input w-25 p-0 m-r-5" aria-label="1" value="'+d(f(null!=(s=null!=n?n.paginationData:n)?s.pageIndex:s,n))+'" type="text" placeholder="Page Number ...">\r\n        <span class="no-of-pages-scan" data-number-of-pages="'+d(f(null!=(s=null!=n?n.paginationData:n)?s.noOfPages:s,n))+'"> of '+d(f(null!=(s=null!=n?n.paginationData:n)?s.noOfPages:s,n))+'</span>\r\n    </span>\r\n    <span class="gui mini compact ">\r\n        <button class="gui mini compact nextLink" aria-hidden="true" '+d(o(t(1)).call(u,null!=(s=null!=n?n.paginationData:n)?s.nextPageLinkDisabled:s,{name:"Disabled",hash:{},data:r}))+'\r\n            aria-label="Go to the next page" title="Go to the next page" data-page="'+d(o(t(8)).call(u,null!=(s=null!=n?n.paginationData:n)?s.pageIndex:s,"+",1,{name:"math",hash:{},data:r}))+'" tabindex="-1">\r\n            Next\r\n            <i class="gui-icon gui-icon-chevron-right"></i>\r\n        </button>\r\n        <button class="gui mini compact lastLink" aria-hidden="true" '+d(o(t(1)).call(u,null!=(s=null!=n?n.paginationData:n)?s.lastPageLinkDisabled:s,{name:"Disabled",hash:{},data:r}))+'\r\n            aria-label="Go to the last page" title="Go to the last page" data-page="'+d(f(null!=(s=null!=n?n.paginationData:n)?s.noOFpages:s,n))+'" tabindex="-1">\r\n            <i class="gui-icon gui-icon-next"></i>\r\n        </button>\r\n    </span>\r\n</div>\r\n<div class="col-md-6 gui gui-subheading-2 right text-right m-0">\r\n    <span>Rows Per Page</span>\r\n    <select class="gui pageSizeSelector">\r\n'+(null!=(s=a.each.call(u,null!=(s=null!=n?n.paginationData:n)?s.pageSizes:s,{name:"each",hash:{},fn:e.program(1,r,0,l,c),inverse:e.noop,data:r}))?s:"")+'    </select>\r\n    <span class="gui m-l-10">'+d(f(null!=(s=null!=(s=null!=n?n.paginationData:n)?s.range:s)?s.min:s,n))+" - "+d(f(null!=(s=null!=(s=null!=n?n.paginationData:n)?s.range:s)?s.max:s,n))+" of "+d(f(null!=(s=null!=n?n.paginationData:n)?s.totalCount:s,n))+' items</span>\r\n</div>\r\n<div class="gui clear"></div>'},useData:!0,useDepths:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,n,t,o){return{"+":e+t,"-":e-t,"*":e*t,"/":e/t,"%":e%t}[n]};n.default=o},function(e,n,t){var o=t(0);e.exports=(o.default||o).template({1:function(e,n,o,a,i){var r,l=e.lambda,c=e.escapeExpression;return'<tr class="mainRow" data-pk-attr="'+c(l(null!=n?n.keyColumn:n,n))+'" >\r\n    <td class="expansionArrows" style="display:flex;justify-content:center;">\r\n        <i class="gui gui-icon gui-icon-chevron-down expandDetailsRowIcon cursor-pointer" aria-hidden="true"></i>\r\n        <i class="gui gui-icon gui-icon-chevron-up CollapseDetailsRowIcon cursor-pointer gui-hidden" aria-hidden="true"></i>\r\n    </td>\r\n    <td>\r\n        <input type="checkbox" data-value="'+c(l(null!=n?n.rowData:n,n))+'" value="'+c(l(null!=n?n.keyColumn:n,n))+'" class="select-key-checkbox cursor-pointer">\r\n    </td>\r\n'+(null!=(r=o.each.call(null!=n?n:e.nullContext||{},null!=n?n.mainRowColArray:n,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?r:"")+"</tr>\r\n"+(null!=(r=e.invokePartial(t(6),n,{name:"grid-details-row",data:i,helpers:o,partials:a,decorators:e.decorators}))?r:"")+" "},2:function(e,n,t,o,a){var i,r=e.lambda,l=e.escapeExpression;return'        <td title="'+l(r(null!=n?n.actualValue:n,n))+'" class="body-'+l(r(null!=n?n.id:n,n))+'">'+(null!=(i=r(null!=n?n.columnValue:n,n))?i:"")+"</td>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,n,t,o,a){var i;return null!=(i=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.mainRowArray:n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?i:""},usePartial:!0,useData:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(4),a=t(11),i=t(12),r=t(13),l=t(2),c=t(14),s=t(15),u=t(17),d=t(18),f=t(19),p=t(20),g=t(21),h=t(22),m=function(){function e(e){var n=this;this.bindData=function(e,t){var o=n.configStore.Options.chunkSize+n.getInitialRowCount();o=o>=e.length?e.length-1:o,l.Pager.CalculatePaginationData(t);var a=n.gridTemplateService.GetFirstTemplate(e,0,o);n.configStore.Options.containerElement.innerHTML=a,void 0!==n.configStore.Options.manageColSettingsContainer&&n.bindManageColums(n.configStore.Options.manageColSettingsContainer),void 0!==n.scrollHandler&&null!==n.scrollHandler?(n.scrollHandler.removeHandler(),n.scrollHandler.resetParentOffset()):(n.scrollHandler=new p.ScrollHandler(n.configStore,n.gridTemplateService,o+1),n.scrollHandler.watchWidth()),n.scrollHandler.RegisterDomHandler()},this.bindManageColums=function(e,t){if(void 0===n.manageColHandler||t){var a=n.gridTemplateService.GetManageColumnsHtml(),r=o(e||n.configStore.Options.manageColSettingsContainer||n.configStore.Options.containerElement);n.toggleHandler=new g.ToggleColumnHandler(n.configStore,o(n.configStore.Options.containerElement)),n.configStore.options.manageColSettingsContainer=r[0],n.manageColHandler=new i.ColSettingsHandler(o(r),n.configStore,n.toggleHandler),r.find(".col-settings-container").html(a),n.manageColHandler.RegisterDomHandler(),o(window).resize(n.documentResizeHandlerForCs),o(document).click(n.documentClickHandlerForCs)}},this.applyColumnConfig=function(e){n.toggleHandler.applyColumnConfig(e);var t=n.gridTemplateService.GetManageColumnsHtml();o(n.configStore.Options.manageColSettingsContainer||n.configStore.Options.containerElement).find(".col-settings-container").html(t)},this.setOrder=function(e){for(var t=0,o=n.configStore.Options.columns;t<o.length;t++){var a=o[t];a.order=void 0}if(void 0!==e&&null!==e&&0!==e.length)for(var i=0,r=e;i<r.length;i++)for(var l=r[i],c=0,s=n.configStore.Options.columns;c<s.length;c++){var a=s[c];if(l.colId===a.id){a.order=l.order;break}}},this.destroy=function(){var e=o(n.configStore.Options.containerElement);void 0!==e&&e.off();var t=o(n.configStore.Options.manageColSettingsContainer);void 0!==t&&t.off(),$(window).off("resize",n.documentResizeHandler),$(document).off("click",n.documentClickHandler),$(window).off("resize",n.documentResizeHandlerForCs),$(document).off("click",n.documentClickHandlerForCs),void 0!==n.scrollHandler&&n.scrollHandler.unWatchWidth()},this.getInitialRowCount=function(){return Math.floor(.65*o(window).innerHeight()/32)},this.InitHandlers=function(){var e=o(n.configStore.Options.containerElement);n.handleChain=[],n.handleChain.push({handler:new c.DetailsRowHandler(n.configStore,e),name:u.HandlerNames.DetailsRow}),n.handleChain.push({handler:new s.FilterClickHandler(n.configStore,e),name:u.HandlerNames.FilterAction}),n.handleChain.push({handler:new d.HeaderClickHandler(n.configStore,e),name:u.HandlerNames.HeaderClick}),n.handleChain.push({handler:new f.PageSearchHandler(n.configStore,e),name:u.HandlerNames.PageSearch});n.handleChain.push({handler:new r.SelectEventHandler(n.configStore,e,n.gridTemplateService),name:u.HandlerNames.ColSettings}),n.handleChain.forEach(function(e){e.handler.RegisterDomHandler()}),o(window).resize(n.documentResizeHandler),o(document).click(n.documentClickHandler)},this.documentResizeHandlerForCs=function(e){n.manageColHandler.onResize(),e.stopPropagation()},this.documentClickHandlerForCs=function(e){n.manageColHandler.onDocumentClick(e),e.stopPropagation()},this.documentResizeHandlerForScroll=function(e){n.manageColHandler.onResize(),e.stopPropagation()},this.documentClickHandler=function(e){n.handleChain.forEach(function(n){n.handler.onDocumentClick(e)}),e.stopPropagation()},this.documentResizeHandler=function(e){n.handleChain.forEach(function(n){n.handler.onDocumentClick(e)}),e.stopPropagation()},this.configStore=new a.ConfigStore(e),this.gridTemplateService=new h.GridTemplateService(this.configStore),this.InitHandlers()}return e}();n.Grid=m},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){var n=this;if(this.defaultGridOptions={animationTime:200,chunkSize:5,columns:[],containerElement:null,manageColSettingsContainer:null,hybridFunction:function(e,n){return"true"},keyColumn:"",onColSettingsChange:function(e){},onClickFilter:function(e,n,t){},onClickHeader:function(e,n){},onPageSearch:function(e,n){},onSelect:function(e){}},this.SetHiddenOnConfig=function(e,t){for(var o=0,a=n.Options.columns;o<a.length;o++){var i=a[o];if(void 0===t)i.hidden=e;else if(i.id===t){i.hidden=e;break}}},this.extendOptions=function(e){return n.options=jQuery.extend({},n.defaultGridOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},set:function(e){this.options=e},enumerable:!0,configurable:!0}),e}();n.ConfigStore=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n,t){this.parentElement=e,this.configStore=n,this.toggleColumnHandler=t}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){var n=jQuery(e.target);n.is(".col-settings-trigger")||n.parents().is(".col-settings-container")||(jQuery(".col-settings-trigger").removeClass("active"),jQuery(".col-settings-container").slideUp(this.configStore.Options.animationTime))},e.prototype.RegisterDomHandler=function(){var e=this;this.parentElement.on("click",".col-settings-trigger",function(n){var t=(jQuery(n.target),e.parentElement.find(".col-settings-container"));e.onResize(),jQuery(".col-settings-trigger").addClass("active"),t.slideToggle(e.configStore.Options.animationTime),n.stopPropagation()}),this.parentElement.on("keyup",".col-settings-header .col-settings-filter",function(n){var t=jQuery(n.target),o=t.val().toString().toLowerCase();console.log(o),e.parentElement.find(".col-settings-table table tbody tr").each(function(e,n){jQuery(n).show(),-1===jQuery(n).attr("data-header-id").toLowerCase().indexOf(o)&&jQuery(n).hide()}),n.stopPropagation()}),this.parentElement.on("click",".show-all-column",function(n){e.parentElement.find(".col-settings-hidden-checkbox").each(function(e,n){jQuery(n).prop("checked",!0)}),e.toggleColumnHandler.showAllColumns(),e.configStore.Options.onColSettingsChange(e.configStore.Options.columns),n.stopPropagation()}),this.parentElement.on("click",".hide-all-column",function(n){e.parentElement.find(".col-settings-hidden-checkbox").each(function(e,n){jQuery(n).prop("checked",!1)}),e.toggleColumnHandler.hideAllColumns(),e.configStore.Options.onColSettingsChange(e.configStore.Options.columns),n.stopPropagation()}),this.parentElement.on("click",".col-settings-hidden-checkbox",function(n){if(void 0!==n.originalEvent){var t=jQuery(n.target),o=t.val().toString();t.is(":checked")?e.toggleColumnHandler.showColumn(o):e.toggleColumnHandler.hideColumn(o)}e.configStore.Options.onColSettingsChange(e.configStore.Options.columns),n.stopPropagation()})},e}();n.ColSettingsHandler=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n,t){this.configStore=e,this.parentElement=n,this.gridTemplateService=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.parentElement.on("change",".select-key-checkbox",function(n){var t=jQuery(n.target),o=t.data("value"),a=t.is(":checked");a?t.parents(".mainRow").addClass("active"):t.parents(".mainRow").removeClass("active"),void 0!==n.originalEvent&&(e.configStore.Options.onSelect([o],a),n.stopPropagation())}),this.parentElement.on("change",".select-all-checkbox",function(n){var t=jQuery(n.target),o=t.is(":checked");e.configStore.Options.onSelect(e.gridTemplateService.Data,o),e.parentElement.find(".select-key-checkbox").prop("checked",o),o?e.parentElement.find(".mainTable .mainRow").addClass("active"):e.parentElement.find(".mainTable .mainRow").removeClass("active"),n.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.SelectEventHandler=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){var t=this;this.configStore=e,this.RegisterDomHandler=function(){t.parentElement.on("click",".table-body .expansionArrows i",function(e){var n=jQuery(e.target),o=n.closest("tr").next();n.hide(),n.siblings("i").show();n.hasClass("expandDetailsRowIcon")?o.slideDown(t.configStore.Options.animationTime):o.slideUp(t.configStore.Options.animationTime),e.stopPropagation()})},this.parentElement=n}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.DetailsRowHandler=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(3),a=t(16),i=function(){function e(e,n){var t=this;this.RegisterDomHandler=function(){t.parentElement.on("click",".table-body .detailsRow .detailsTable td i",function(e){var n=jQuery(e.target),i=n.parents("td"),r=i.attr("data-filter-key"),l=i.attr("data-filter-value"),c=i.attr("data-filter-type"),s=o.CommonUtil.GetColumnObject(r,t.configStore.Options.columns);if(void 0!==s&&null!==s&&s.filterable){var u=a.FilterActionType.Add;n.hasClass("removeFilter")&&(u=a.FilterActionType.Minus),t.configStore.Options.onClickFilter(r,l,u,c),e.stopPropagation()}})},this.configStore=e,this.parentElement=n}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.FilterClickHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e.Add="Add",e.Minus="Minus"}(n.FilterActionType||(n.FilterActionType={}))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e[e.FilterAction=0]="FilterAction",e[e.HeaderClick=1]="HeaderClick",e[e.Scroll=2]="Scroll",e[e.PageSearch=3]="PageSearch",e[e.DetailsRow=4]="DetailsRow",e[e.ToggleColumn=5]="ToggleColumn",e[e.ColSettings=6]="ColSettings"}(n.HandlerNames||(n.HandlerNames={}))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(3),a=t(5),i=function(){function e(e,n){var t=this;this.RegisterDomHandler=function(){t.parentElement.on("click",".table-header th",function(e){var n=jQuery(e.target).closest("th"),i=n.attr("data-header-id"),r=o.CommonUtil.GetColumnObject(i,t.configStore.Options.columns);if(void 0!==r&&null!==r&&r.sortable){var l,c=n.find("i"),s=c.first(),u=c.last();c.is(":visible")?s.is(":visible")?(l=a.GridOrderDirection.Desc,s.hide(),u.show()):(l=a.GridOrderDirection.Asc,u.hide(),s.show()):(l=a.GridOrderDirection.Asc,s.show()),o.CommonUtil.SetOrder(i,l,t.configStore.Options.columns),t.configStore.Options.onClickHeader(i,l),e.stopPropagation()}})},this.configStore=e,this.parentElement=n}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.HeaderClickHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(4),a=t(2),i=function(){function e(e,n){var t=this;this.RegisterDomHandler=function(){t.parentElement.on("click",".table-footer .firstLink",function(e){t.configStore.options.onPageSearch(a.Pager.PaginationData.pageSize,1),e.stopPropagation()}),t.parentElement.on("click",".table-footer .nextLink",function(e){t.configStore.options.onPageSearch(a.Pager.PaginationData.pageSize,a.Pager.PaginationData.pageIndex+1),e.stopPropagation()}),t.parentElement.on("click",".table-footer .prevLink",function(e){t.configStore.options.onPageSearch(a.Pager.PaginationData.pageSize,a.Pager.PaginationData.pageIndex-1),e.stopPropagation()}),t.parentElement.on("click",".table-footer .lastLink",function(e){t.configStore.options.onPageSearch(a.Pager.PaginationData.pageSize,a.Pager.PaginationData.noOfPages),e.stopPropagation()}),t.parentElement.on("change",".table-footer .pageSizeSelector",function(e){var n=+o(e.target).val().toString();t.configStore.options.onPageSearch(n,a.Pager.PaginationData.pageIndex),e.stopPropagation()}),t.parentElement.on("keypress",".table-footer .pager-input",function(e){var n=o(e.target),i=a.Pager.PaginationData;if(13===e.keyCode){var r=+n.val().toString();isNaN(r)||r>i.noOfPages||r<1?n.val(i.pageIndex):t.configStore.options.onPageSearch(i.pageSize,r)}e.stopPropagation()})},this.configStore=e,this.parentElement=n}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(){},e}();n.PageSearchHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n,t){var o=this;this.rendering=!1,this.watches=[],this.RegisterDomHandler=function(){o.parentElement.find(".table-body").on("scroll",o.handleResize)},this.removeHandler=function(){o.parentElement.find(".table-body").off("scroll",o.handleResize)},this.resetParentOffset=function(){o.parentOffSetLeft=o.parentElement.offset().left,o.leftOffset=o.parentElement.find(".table-header").offset().left},this.watchWidth=function(){o.parentOffSetLeft=o.parentElement.offset().left,o.watches.push(setInterval(o.setHeaderOffset,300))},this.unWatchWidth=function(){if(void 0!==o.watches&&null!==o.watches)for(var e=0,n=o.watches;e<n.length;e++){var t=n[e];clearInterval(t)}},this.handleResize=function(e){var n=o.parentElement.find(".table-body");void 0!==o.leftOffset&&null!==o.leftOffset||(o.leftOffset=o.parentElement.find(".table-header").offset().left),o.parentElement.find(".table-header").offset({left:o.leftOffset+-1*n.scrollLeft(),top:0});var t=n.find(".mainTable").height(),a=n.height();if(e.preventDefault(),o.rendering)return void e.stopPropagation();if(a+n.scrollTop()-.8*t>0){if(o.currentIndex>=o.gridTemplateService.DataLength)return;o.rendering=!0;var i=o.currentIndex+o.configStore.Options.chunkSize;i>=o.gridTemplateService.DataLength&&(i=o.gridTemplateService.DataLength-1);var r=jQuery(o.gridTemplateService.getTemplate(o.currentIndex,i));n.find(".mainTableBody").append(r),o.currentIndex=i+1,o.rendering=!1}e.stopPropagation()},this.setHeaderOffset=function(){var e=o.parentElement.offset().left;if(o.parentOffSetLeft!==e){var n=o.parentElement.find(".table-body");void 0!==o.leftOffset&&null!==o.leftOffset||(o.leftOffset=o.parentElement.find(".table-header").offset().left),o.leftOffset=o.leftOffset-(o.parentOffSetLeft-e),o.parentElement.find(".table-header").offset({left:o.leftOffset,top:0}),o.parentOffSetLeft=e,n.scrollLeft(n.scrollLeft()-1)}},this.configStore=e,this.parentElement=jQuery(this.configStore.Options.containerElement),this.gridTemplateService=n,this.currentIndex=t}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.ScrollHandler=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a=t(3);!function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide",e[e.ShowAll=2]="ShowAll",e[e.HideAll=3]="HideAll"}(o||(o={}));var i=function(){function e(e,n){var t=this;this.showAllColumns=function(){t.SetColWidth(".table-header .headerColGroup col",o.ShowAll),t.SetColWidth(".table-body .bodyColGroup col",o.ShowAll),t.configStore.SetHiddenOnConfig(!1)},this.showColumn=function(e){t.SetColWidth(".table-header .headerColGroup col",o.Show,e),t.SetColWidth(".table-body .bodyColGroup col",o.Show,e),t.configStore.SetHiddenOnConfig(!1,e)},this.hideColumn=function(e){t.SetColWidth(".table-header .headerColGroup col",o.Hide,e),t.SetColWidth(".table-body .bodyColGroup col",o.Hide,e),t.configStore.SetHiddenOnConfig(!0,e)},this.hideAllColumns=function(){t.SetColWidth(".table-header .headerColGroup col",o.HideAll),t.SetColWidth(".table-body .bodyColGroup col",o.HideAll),t.configStore.SetHiddenOnConfig(!0)},this.applyColumnConfig=function(e){for(var n=0,o=e;n<o.length;n++){var a=o[n];a.hidden?t.hideColumn(a.id):t.showColumn(a.id)}},this.SetColWidth=function(e,n,i){t.parentElement.find(e).each(function(e,r){var l=0,c=jQuery(r),s=c.attr("data-header-id");if(void 0!==s){var u=void 0;if([o.Show,o.Hide].indexOf(n)>-1&&s===i)return n===o.Show&&(u=a.CommonUtil.GetColumnObject(s,t.configStore.options.columns),l=u.width),void c.width(l+"px");[o.ShowAll,o.HideAll].indexOf(n)>-1&&(n===o.ShowAll&&(u=a.CommonUtil.GetColumnObject(s,t.configStore.options.columns),l=u.width),c.width(l+"px"))}})},this.configStore=e,this.parentElement=n}return e}();n.ToggleColumnHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(6),a=t(7),i=t(9),r=t(24),l=t(26),c=t(2),s=function(){function e(e){var n=this;this.GetFirstTemplate=function(e,t,o){n.data=e;var a=n.GetRowsHtml(t,o);return n.templateFunctionForGrid({columns:n.configStore.Options.columns,mainRowArray:a,paginationData:c.Pager.PaginationData})},this.getTemplate=function(e,t){var o=n.GetRowsHtml(e,t);return n.templateFunctionForMainRow({columns:n.configStore.Options.columns,mainRowArray:o})},this.GetManageColumnsHtml=function(){return n.templateFunctionForManageCol({columns:n.configStore.Options.columns})},this.GetRowsHtml=function(e,t){for(var o=[],a=(n.configStore.Options.columns.length,e);a<=t;a++){for(var i=n.data[a],r=[],l=0,c=n.configStore.Options.columns;l<c.length;l++){var s=c[l],u=i[s.id];s.renderHybrid&&(u=n.configStore.Options.hybridFunction(s,i)),r.push({columnValue:u,type:s.type,hidden:s.hidden,actualValue:i[s.id],columnName:s.name,id:s.id,filterable:s.filterable})}o.push({rowData:JSON.stringify(i),keyColumn:i[n.configStore.Options.keyColumn],mainRowColArray:r,length:n.configStore.Options.columns.length})}return o},this.configStore=e,this.templateFunctionForGrid=l,this.templateFunctionForMainRow=i,this.templateFunctionForDetailsRow=o,this.templateFunctionForFooter=a,this.templateFunctionForManageCol=r}return Object.defineProperty(e.prototype,"Data",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataLength",{get:function(){return this.data.length},enumerable:!0,configurable:!0}),e}();n.GridTemplateService=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,n){return e===n?"selected":""};n.default=o},function(e,n,t){function o(e){return e&&(e.__esModule?e.default:e)}var a=t(0);e.exports=(a.default||a).template({1:function(e,n,a,i,r){var l=e.lambda,c=e.escapeExpression;return'                <tr data-header-id="'+c(l(null!=n?n.name:n,n))+'">\r\n                    <td>\r\n                        <label>\r\n                            <input type="checkbox" class="col-settings-hidden-checkbox gui m-r-10" value="'+c(l(null!=n?n.id:n,n))+'" '+c(o(t(25)).call(null!=n?n:e.nullContext||{},null!=n?n.hidden:n,{name:"Checked",hash:{},data:r}))+">\r\n                            "+c(l(null!=n?n.name:n,n))+"\r\n                        </label>\r\n                    </td>\r\n                </tr>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,n,t,o,a){var i;return'<div class="gui of-hidden p-10 min-w-50 w-auto fluid-h flex column container" >\r\n    <div class="col-settings-header" style="width: 100%">\r\n        <div class="gui mini fluid icon input">\r\n            <input class="col-settings-filter" type="text" placeholder="Search filter...">\r\n            <i class="search icon"></i>\r\n        </div>\r\n        <div class="gui m-t-10">\r\n            <a class="gui left show-all-column">Show All</a>\r\n            <a class="gui right hide-all-column">Hide All</a>\r\n        </div>\r\n        <div class="gui clear"></div>\r\n    </div>\r\n    <div class="gui clear"></div>\r\n    <div class="col-settings-table gui fluid h-90 of-auto p-5 m-t-10" >\r\n        <table class="gui small very border-less basic compact table">\r\n            <tbody>\r\n'+(null!=(i=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.columns:n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?i:"")+"            </tbody>\r\n        </table>\r\n    </div>\r\n</div>"},useData:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){return e?"":"checked"};n.default=o},function(e,n,t){function o(e){return e&&(e.__esModule?e.default:e)}var a=t(0);e.exports=(a.default||a).template({1:function(e,n,a,i,r){var l;return"                    "+(null!=(l=o(t(27)).call(null!=n?n:e.nullContext||{},n,{name:"Column",hash:{},data:r}))?l:"")+"\n"},3:function(e,n,t,o,a){var i,r=e.lambda,l=e.escapeExpression;return'                        <th class="gui cursor-pointer" id="header-'+l(r(null!=n?n.id:n,n))+'" data-header-id="'+l(r(null!=n?n.id:n,n))+'">\n                            <span class="gui sub header">'+l(r(null!=n?n.name:n,n))+"</span>\n"+(null!=(i=t.if.call(null!=n?n:e.nullContext||{},null!=n?n.sortable:n,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?i:"")+"                        </th>\n"},4:function(e,n,a,i,r){var l;return"                                "+(null!=(l=o(t(28)).call(null!=n?n:e.nullContext||{},null!=n?n.order:n,{name:"Ordered",hash:{},data:r}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,n,o,a,i){var r,l=null!=n?n:e.nullContext||{};return'<style>\n    .inner-container {\n        height: 100%;\n        overflow: hidden;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .table-header {\n        position: relative;\n        top:0 !important;\n    }\n\n    .table-body {\n        overflow: auto;\n        flex: 5;\n    }\n    .table-footer{\n        height: 35px;\n        padding: 5px;\n    }\n    .table-footer .footer-middle{\n        display: flex;\n    }\n    .table-footer .footer-right{\n        display: flex;\n    }\n    .margin-auto{\n        margin: auto !important;\n    }\n    .remove-label:hover{\n        text-decoration: line-through;\n        cursor: pointer;\n    }\n    .border-less tr td,.border-less { border: 0px !important; }\n    .cursor-pointer{\n        cursor: pointer;\n    }\n    .ui.supercompact.icon.button, .ui.supercompact.icon.buttons .button {\n        padding: .3em .3em .3em .3em !important;\n    }\n</style>\n<div class="inner-container gui fluid container" style="padding:0%;">\n    <div class="table-header">\n        <table id="headertable" class="gui basic large compact sortable fixed single line table">\n            <colgroup class="headerColGroup">\n                <col style="width:40px;" />\n                <col style="width:40px;" />\n'+(null!=(r=o.each.call(l,null!=n?n.columns:n,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'            </colgroup>\n            <thead>\n                <tr>\n                    <th></th>\n                    <th><input type="checkbox" class="select-all-checkbox cursor-pointer"></th>\n'+(null!=(r=o.each.call(l,null!=n?n.columns:n,{name:"each",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?r:"")+'                </tr>\n            </thead>\n        </table>\n    </div>\n    <div class="table-body">\n        <table class="gui basic large compact fixed selectable single line table mainTable">\n            <colgroup class="bodyColGroup">\n                <col style="width:40px;" /> \n                <col style="width:40px;" />\n'+(null!=(r=o.each.call(l,null!=n?n.columns:n,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'            </colgroup>\n            <tbody class="mainTableBody">\n'+(null!=(r=e.invokePartial(t(9),n,{name:"grid-main-row",data:i,indent:"                ",helpers:o,partials:a,decorators:e.decorators}))?r:"")+'            </tbody>\n        </table>\n    </div>\n    <div class="table-footer gui h-auto fluid-w basic curved row p-5 m-0">\n'+(null!=(r=e.invokePartial(t(7),n,{name:"grid-footer",data:i,indent:"           ",helpers:o,partials:a,decorators:e.decorators}))?r:"")+"    </div>\n</div>"},usePartial:!0,useData:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){return'<col style="width : '+(e.hidden?0:e.width)+'px;"data-header-id="'+e.id+'" />'};n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(5),a=function(e){return e===o.GridOrderDirection.Asc?'<i class="gui gui-icon gui-icon-arrow-up" ></i> ':e===o.GridOrderDirection.Desc?'<i class="gui gui-icon gui-icon-arrow-down" ></i> ':'<i class="gui gui-icon gui-icon-arrow-up gui-hidden" aria-hidden="true" ></i> <i class="gui gui-icon gui-icon-arrow-down gui-hidden" aria-hidden="true" ></i>'};n.default=a}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9ncmlkb28ubWluLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmY2E5ZmVjNTM3YWJjMzAyYjA3ZCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwiSGFuZGxlYmFyc1wiLFwiYW1kXCI6XCJoYW5kbGViYXJzLnJ1bnRpbWVcIixcImNvbW1vbmpzMlwiOlwiaGFuZGxlYmFycy9ydW50aW1lXCIsXCJjb21tb25qc1wiOlwiaGFuZGxlYmFycy9ydW50aW1lXCJ9Iiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcGFnaW5hdGlvbi9QYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC9Db2x1bW5VdGlsLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImpRdWVyeVwiIiwid2VicGFjazovLy8uL3NyYy9qcy9tb2RlbHMvR3JpZE9yZGVyRGlyZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZ3JpZC1kZXRhaWxzLXJvdy5oYnMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9ncmlkLWZvb3Rlci5oYnMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL21hdGgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9ncmlkLW1haW4tcm93LmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi9HcmlkLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb25maWcvQ29uZmlnU3RvcmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvQ29sU2V0dGluZ3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9ldmVudEhhbmRsZXJzL1NlbGVjdEV2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvZXZlbnRIYW5kbGVycy9EZXRhaWxzUm93SGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvZXZlbnRIYW5kbGVycy9GaWx0ZXJDbGlja0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9ldmVudEhhbmRsZXJzL0hhbmRsZXJOYW1lcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvZXZlbnRIYW5kbGVycy9IZWFkZXJDbGlja0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvUGFnZVNlYXJjaENsaWNrSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvZXZlbnRIYW5kbGVycy9TY3JvbGxIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9ldmVudEhhbmRsZXJzL1RvZ2dsZUNvbHVtbkhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3NlcnZpY2VzL0dyaWRUZW1wbGF0ZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL1NlbGVjdGVkLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZ3JpZC1tYW5hZ2UtY29sdW1ucy5oYnMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL0NoZWNrZWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9ncmlkLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvQ29sdW1uLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9PcmRlcmVkLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18iLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ2YWx1ZSIsImRpc2FibGVkIiwiYm9vbCIsImRlZmF1bHQiLCJQYWdlciIsInBhZ2luYXRpb25EYXRhIiwiQ2FsY3VsYXRlUGFnaW5hdGlvbkRhdGEiLCJwYWdpbmF0aW9uSW5wdXQiLCJwYWdlSW5kZXgiLCJwYWdlU2l6ZSIsInBhZ2VTaXplcyIsInRvdGFsQ291bnQiLCJub09mUGFnZXMiLCJNYXRoIiwiY2VpbCIsIm1pbk51bSIsImxvd2VyTGltaXRPZmZzZXQiLCJyYW5nZSIsIm1pbiIsIm1heCIsImZpcnN0UGFnZUxpbmtEaXNhYmxlZCIsImxhc3RQYWdlTGlua0Rpc2FibGVkIiwicHJldlBhZ2VMaW5rRGlzYWJsZWQiLCJuZXh0UGFnZUxpbmtEaXNhYmxlZCIsIkNvbW1vblV0aWwiLCJHZXRDb2x1bW5PYmplY3QiLCJjb2x1bW5JZCIsImNvbHVtbnMiLCJyZXRDb2wiLCJmb3JFYWNoIiwiY29sIiwiaWQiLCJTZXRPcmRlciIsIm9yZGVyIiwiR3JpZE9yZGVyRGlyZWN0aW9uIiwiSGFuZGxlYmFycyIsInRlbXBsYXRlIiwiMSIsImNvbnRhaW5lciIsImRlcHRoMCIsImhlbHBlcnMiLCJwYXJ0aWFscyIsImRhdGEiLCJzdGFjazEiLCJoZWxwZXIiLCJhbGlhczEiLCJudWxsQ29udGV4dCIsImFsaWFzMiIsImhlbHBlck1pc3NpbmciLCJhbGlhczMiLCJhbGlhczQiLCJlc2NhcGVFeHByZXNzaW9uIiwidHlwZSIsImhhc2giLCJhY3R1YWxWYWx1ZSIsImNvbHVtbk5hbWUiLCJmaWx0ZXJhYmxlIiwiZm4iLCJwcm9ncmFtIiwiaW52ZXJzZSIsIm5vb3AiLCJjb2x1bW5WYWx1ZSIsIjIiLCJjb21waWxlciIsIm1haW4iLCJsZW5ndGgiLCJlYWNoIiwibWFpblJvd0NvbEFycmF5IiwidXNlRGF0YSIsIl9fZGVmYXVsdCIsIm9iaiIsImJsb2NrUGFyYW1zIiwiZGVwdGhzIiwibGFtYmRhIiwibm9PRnBhZ2VzIiwidXNlRGVwdGhzIiwibWF0aCIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsIisiLCItIiwiKiIsIi8iLCIlIiwia2V5Q29sdW1uIiwicm93RGF0YSIsImludm9rZVBhcnRpYWwiLCJkZWNvcmF0b3JzIiwibWFpblJvd0FycmF5IiwidXNlUGFydGlhbCIsImpRdWVyeSIsIkNvbmZpZ1N0b3JlXzEiLCJDb2xTZXR0aW5nc0hhbmRsZXJfMSIsIlNlbGVjdEV2ZW50SGFuZGxlcl8xIiwiUGFnZXJfMSIsIkRldGFpbHNSb3dIYW5kbGVyXzEiLCJGaWx0ZXJDbGlja0hhbmRsZXJfMSIsIkhhbmRsZXJOYW1lc18xIiwiSGVhZGVyQ2xpY2tIYW5kbGVyXzEiLCJQYWdlU2VhcmNoQ2xpY2tIYW5kbGVyXzEiLCJTY3JvbGxIYW5kbGVyXzEiLCJUb2dnbGVDb2x1bW5IYW5kbGVyXzEiLCJHcmlkVGVtcGxhdGVTZXJ2aWNlXzEiLCJHcmlkIiwiX3RoaXMiLCJiaW5kRGF0YSIsImxhc3RJbmRleCIsImNvbmZpZ1N0b3JlIiwiT3B0aW9ucyIsImNodW5rU2l6ZSIsImdldEluaXRpYWxSb3dDb3VudCIsImdyaWRDb250ZW50IiwiZ3JpZFRlbXBsYXRlU2VydmljZSIsIkdldEZpcnN0VGVtcGxhdGUiLCJjb250YWluZXJFbGVtZW50IiwiaW5uZXJIVE1MIiwidW5kZWZpbmVkIiwibWFuYWdlQ29sU2V0dGluZ3NDb250YWluZXIiLCJiaW5kTWFuYWdlQ29sdW1zIiwic2Nyb2xsSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJyZXNldFBhcmVudE9mZnNldCIsIlNjcm9sbEhhbmRsZXIiLCJ3YXRjaFdpZHRoIiwiUmVnaXN0ZXJEb21IYW5kbGVyIiwibWFuYWdlQ29sQ29udGFpbmVyIiwiZm9yY2UiLCJtYW5hZ2VDb2xIYW5kbGVyIiwiaHRtbCIsIkdldE1hbmFnZUNvbHVtbnNIdG1sIiwiZWxlbWVudCIsInRvZ2dsZUhhbmRsZXIiLCJUb2dnbGVDb2x1bW5IYW5kbGVyIiwiQ29sU2V0dGluZ3NIYW5kbGVyIiwiZmluZCIsIndpbmRvdyIsInJlc2l6ZSIsImRvY3VtZW50UmVzaXplSGFuZGxlckZvckNzIiwiZG9jdW1lbnQiLCJjbGljayIsImRvY3VtZW50Q2xpY2tIYW5kbGVyRm9yQ3MiLCJhcHBseUNvbHVtbkNvbmZpZyIsInNldE9yZGVyIiwib3JkZXJCeUxpc3QiLCJfaSIsIl9hIiwiX2IiLCJvcmRlckJ5TGlzdF8xIiwib3JkZXJDb2wiLCJfYyIsIl9kIiwiY29sSWQiLCJkZXN0cm95IiwicGFyZW50RWxlbWVudCIsIm9mZiIsIm1hbmFnZUNvbnRhaW5lckVsZW1lbnQiLCIkIiwiZG9jdW1lbnRSZXNpemVIYW5kbGVyIiwiZG9jdW1lbnRDbGlja0hhbmRsZXIiLCJ1bldhdGNoV2lkdGgiLCJmbG9vciIsImlubmVySGVpZ2h0IiwiSW5pdEhhbmRsZXJzIiwiaGFuZGxlQ2hhaW4iLCJwdXNoIiwiaGFuZGxlciIsIkRldGFpbHNSb3dIYW5kbGVyIiwiSGFuZGxlck5hbWVzIiwiRGV0YWlsc1JvdyIsIkZpbHRlckNsaWNrSGFuZGxlciIsIkZpbHRlckFjdGlvbiIsIkhlYWRlckNsaWNrSGFuZGxlciIsIkhlYWRlckNsaWNrIiwiUGFnZVNlYXJjaEhhbmRsZXIiLCJQYWdlU2VhcmNoIiwiU2VsZWN0RXZlbnRIYW5kbGVyIiwiQ29sU2V0dGluZ3MiLCJldmVudCIsIm9uUmVzaXplIiwic3RvcFByb3BhZ2F0aW9uIiwib25Eb2N1bWVudENsaWNrIiwiZG9jdW1lbnRSZXNpemVIYW5kbGVyRm9yU2Nyb2xsIiwiQ29uZmlnU3RvcmUiLCJHcmlkVGVtcGxhdGVTZXJ2aWNlIiwiZGVmYXVsdEdyaWRPcHRpb25zIiwiYW5pbWF0aW9uVGltZSIsImh5YnJpZEZ1bmN0aW9uIiwiY29sdW1uIiwicm93Iiwib25Db2xTZXR0aW5nc0NoYW5nZSIsImNvbENvbmZpZyIsIm9uQ2xpY2tGaWx0ZXIiLCJhY3Rpb25UeXBlIiwib25DbGlja0hlYWRlciIsImRpcmVjdGlvbiIsIm9uUGFnZVNlYXJjaCIsIm9uU2VsZWN0Iiwicm93cyIsIlNldEhpZGRlbk9uQ29uZmlnIiwiaGlkZGVuIiwiZXh0ZW5kT3B0aW9ucyIsImlucHV0T3B0aW9ucyIsImV4dGVuZCIsIkVycm9yIiwic2V0IiwidG9nZ2xlQ29sdW1uSGFuZGxlciIsInRhcmdldEVsZW1lbnQiLCJ0YXJnZXQiLCJpcyIsInBhcmVudHMiLCJyZW1vdmVDbGFzcyIsInNsaWRlVXAiLCJvbiIsInNldHRuZ3NQb3B1cCIsImFkZENsYXNzIiwic2xpZGVUb2dnbGUiLCJ2YWwiLCJ0b1N0cmluZyIsInRvTG93ZXJDYXNlIiwiY29uc29sZSIsImxvZyIsImUiLCJzaG93IiwiYXR0ciIsImluZGV4T2YiLCJoaWRlIiwiaW5kZXgiLCJwcm9wIiwic2hvd0FsbENvbHVtbnMiLCJoaWRlQWxsQ29sdW1ucyIsIm9yaWdpbmFsRXZlbnQiLCJjaGVja2JveCIsInNob3dDb2x1bW4iLCJoaWRlQ29sdW1uIiwiY2hlY2tlZCIsIkRhdGEiLCJhcnJvdyIsImRldGFpbHNSb3ciLCJjbG9zZXN0IiwibmV4dCIsInNpYmxpbmdzIiwiaGFzQ2xhc3MiLCJzbGlkZURvd24iLCJDb2x1bW5VdGlsXzEiLCJGaWx0ZXJBY3Rpb25UeXBlXzEiLCJwYXJlbnRUZCIsImtleSIsImZpbHRlckFjdGlvbiIsIkZpbHRlckFjdGlvblR5cGUiLCJBZGQiLCJNaW51cyIsIkdyaWRPcmRlckRpcmVjdGlvbl8xIiwiaGVhZGVySWQiLCJzb3J0YWJsZSIsImFycm93SWNvbnMiLCJ1cEFycm93SWNvbiIsImZpcnN0IiwiZG93bkFycm93SWNvbiIsImxhc3QiLCJEZXNjIiwiQXNjIiwiUGFnaW5hdGlvbkRhdGEiLCJpcCIsInBhZ2VEYXRhIiwia2V5Q29kZSIsImlzTmFOIiwiY3VycmVudEluZGV4IiwicmVuZGVyaW5nIiwid2F0Y2hlcyIsImhhbmRsZVJlc2l6ZSIsInBhcmVudE9mZlNldExlZnQiLCJvZmZzZXQiLCJsZWZ0IiwibGVmdE9mZnNldCIsInNldEludGVydmFsIiwic2V0SGVhZGVyT2Zmc2V0Iiwid2F0Y2giLCJjbGVhckludGVydmFsIiwidEJvZHlPYmoiLCJzY3JvbGxMZWZ0IiwidG9wIiwiYWN0dWFsVGFibGVIZWlnaHQiLCJoZWlnaHQiLCJzY3JvbGxDb250YWluZXJIZWlnaHQiLCJwcmV2ZW50RGVmYXVsdCIsInNjcm9sbFRvcCIsIkRhdGFMZW5ndGgiLCJnZXRUZW1wbGF0ZSIsImFwcGVuZCIsIlNob3dIaWRlIiwiU2V0Q29sV2lkdGgiLCJTaG93QWxsIiwiU2hvdyIsIkhpZGUiLCJIaWRlQWxsIiwiY29sdW1uc18xIiwic2VsZWN0b3IiLCJjb250cm9sIiwid2lkdGgiLCJjdXJyZW50Q29sRWxlbSIsImN1cnJlbnRDb2wiLCJHcmlkRGV0YWlsc1Jvd1RlbXBsYXRlIiwiR3JpZEZvb3RlciIsIkdyaWRNYWluUm93VGVtcGxhdGUiLCJNYW5hZ2VDb2x1bW5UZW1wbGF0ZSIsIkdyaWRUZW1wbGF0ZSIsImZpcnN0SW5kZXgiLCJHZXRSb3dzSHRtbCIsInRlbXBsYXRlRnVuY3Rpb25Gb3JHcmlkIiwidGVtcGxhdGVGdW5jdGlvbkZvck1haW5Sb3ciLCJ0ZW1wbGF0ZUZ1bmN0aW9uRm9yTWFuYWdlQ29sIiwicmVuZGVySHlicmlkIiwiSlNPTiIsInN0cmluZ2lmeSIsInRlbXBsYXRlRnVuY3Rpb25Gb3JEZXRhaWxzUm93IiwidGVtcGxhdGVGdW5jdGlvbkZvckZvb3RlciIsInNlbGVjdGVkIiwiaW5wdXQiLCIzIiwiNCIsImluZGVudCIsIkNvbHVtbiIsIm9yZGVyZWQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEs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QSxnQkFBQTBELE9BQUF3UixPQUFBLG1CQUFBMVIsVUFBQUMsV0FBQWdELFdBQUFuRCxFQUFBbUQsY0FBdUk5QyxFQUFBLElBQ3pSLG9JQUNnUixPQUFoUkEsRUFBQUwsRUFBQWtELGNBQUFqSCxFQUFBLEdBQUFnRSxHQUFnSnZELEtBQUEsY0FBQTBELE9BQUF3UixPQUFBLGNBQUExUixVQUFBQyxXQUFBZ0QsV0FBQW5ELEVBQUFtRCxjQUFnSTlDLEVBQUEsSUFDaFIsc0JBQ0NnRCxZQUFBLEVBQUF2QixTQUFBLEs1Qm82Q0ssU0FBVXRHLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHNkJoOUN0RCxJQUFNbVUsR0FBUyxTQUFDclMsR0FHWixNQUFPLHdCQUZtQkEsRUFBSTJLLE9BQVMsRUFBSTNLLEVBQUk4USxPQUVILHVCQURKOVEsRUFBSUMsR0FBSyxPQUlyRGxFLEdBQUFzQyxRQUFlZ1UsRzdCMDlDVCxTQUFVclcsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEc4QnArQ3RELElBQUE2UCxHQUFBdFIsRUFBQSxHQUVNNlYsRUFBVSxTQUFDblMsR0FDYixNQUFJQSxLQUFVNE4sRUFBQTNOLG1CQUFtQm9PLElBQ3RCLG1EQUNBck8sSUFBVTROLEVBQUEzTixtQkFBbUJtTyxLQUM3QixxREFFQSxnS0FLZnhTLEdBQUFzQyxRQUFlaVUiLCJmaWxlIjoiZ3JpZG9vLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKSwgcmVxdWlyZShcImpRdWVyeVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJoYW5kbGViYXJzLnJ1bnRpbWVcIiwgXCJqUXVlcnlcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiR3JpZG9vXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpLCByZXF1aXJlKFwialF1ZXJ5XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJHcmlkb29cIl0gPSBmYWN0b3J5KHJvb3RbXCJIYW5kbGViYXJzXCJdLCByb290W1wialF1ZXJ5XCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpLCByZXF1aXJlKFwialF1ZXJ5XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImhhbmRsZWJhcnMucnVudGltZVwiLCBcImpRdWVyeVwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJHcmlkb29cIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJoYW5kbGViYXJzL3J1bnRpbWVcIiksIHJlcXVpcmUoXCJqUXVlcnlcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkdyaWRvb1wiXSA9IGZhY3Rvcnkocm9vdFtcIkhhbmRsZWJhcnNcIl0sIHJvb3RbXCJqUXVlcnlcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXykge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIGV4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifSAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX187XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGRpc2FibGVkID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiBib29sID8gXCJkaXNhYmxlZFwiIDogXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gZGlzYWJsZWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9qcy9wYWdpbmF0aW9uL1BhZ2VyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBQYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhZ2VyKCkge1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBhZ2VyLCBcIlBhZ2luYXRpb25EYXRhXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBhZ2VyLnBhZ2luYXRpb25EYXRhO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUGFnZXIuQ2FsY3VsYXRlUGFnaW5hdGlvbkRhdGEgPSBmdW5jdGlvbiAocGFnaW5hdGlvbklucHV0KSB7XHJcbiAgICAgICAgdmFyIHBhZ2luYXRpb25EYXRhID0ge307XHJcbiAgICAgICAgcGFnaW5hdGlvbkRhdGEucGFnZUluZGV4ID0gcGFnaW5hdGlvbklucHV0LnBhZ2VJbmRleDtcclxuICAgICAgICBwYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZSA9IHBhZ2luYXRpb25JbnB1dC5wYWdlU2l6ZTtcclxuICAgICAgICBwYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZXMgPSBwYWdpbmF0aW9uSW5wdXQucGFnZVNpemVzO1xyXG4gICAgICAgIHBhZ2luYXRpb25EYXRhLnRvdGFsQ291bnQgPSBwYWdpbmF0aW9uSW5wdXQudG90YWxDb3VudDtcclxuICAgICAgICBwYWdpbmF0aW9uRGF0YS5ub09mUGFnZXMgPSBNYXRoLmNlaWwocGFnaW5hdGlvbklucHV0LnRvdGFsQ291bnQgLyBwYWdpbmF0aW9uSW5wdXQucGFnZVNpemUpO1xyXG4gICAgICAgIHZhciBtaW5OdW0gPSAoKHBhZ2luYXRpb25JbnB1dC5wYWdlSW5kZXggLSAxKSAqIHBhZ2luYXRpb25JbnB1dC5wYWdlU2l6ZSk7XHJcbiAgICAgICAgdmFyIGxvd2VyTGltaXRPZmZzZXQgPSBwYWdpbmF0aW9uSW5wdXQucGFnZVNpemUgPiBwYWdpbmF0aW9uSW5wdXQudG90YWxDb3VudCA/XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb25JbnB1dC50b3RhbENvdW50IDpcclxuICAgICAgICAgICAgcGFnaW5hdGlvbklucHV0LnBhZ2VTaXplO1xyXG4gICAgICAgIHBhZ2luYXRpb25EYXRhLnJhbmdlID0ge1xyXG4gICAgICAgICAgICBtaW46IG1pbk51bSArIDEsXHJcbiAgICAgICAgICAgIG1heDogbWluTnVtICsgbG93ZXJMaW1pdE9mZnNldCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBhZ2luYXRpb25EYXRhLmZpcnN0UGFnZUxpbmtEaXNhYmxlZCA9IHBhZ2luYXRpb25EYXRhLm5vT2ZQYWdlcyA9PT0gMSB8fCBwYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXggPT09IDE7XHJcbiAgICAgICAgcGFnaW5hdGlvbkRhdGEubGFzdFBhZ2VMaW5rRGlzYWJsZWQgPSBwYWdpbmF0aW9uRGF0YS5ub09mUGFnZXMgPT09IDFcclxuICAgICAgICAgICAgfHwgKHBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleCA9PT0gcGFnaW5hdGlvbkRhdGEubm9PZlBhZ2VzKTtcclxuICAgICAgICBwYWdpbmF0aW9uRGF0YS5wcmV2UGFnZUxpbmtEaXNhYmxlZCA9IHBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleCA9PT0gMVxyXG4gICAgICAgICAgICB8fCAocGFnaW5hdGlvbkRhdGEucGFnZUluZGV4IC0gMSkgPD0gMDtcclxuICAgICAgICBwYWdpbmF0aW9uRGF0YS5uZXh0UGFnZUxpbmtEaXNhYmxlZCA9IHBhZ2luYXRpb25EYXRhLm5vT2ZQYWdlcyA9PT0gcGFnaW5hdGlvbkRhdGEucGFnZUluZGV4XHJcbiAgICAgICAgICAgIHx8IChwYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXggKyAxKSA+PSBwYWdpbmF0aW9uRGF0YS5ub09mUGFnZXM7XHJcbiAgICAgICAgUGFnZXIucGFnaW5hdGlvbkRhdGEgPSBwYWdpbmF0aW9uRGF0YTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUGFnZXIgPSBQYWdlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvanMvdXRpbC9Db2x1bW5VdGlsLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbW1vblV0aWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb21tb25VdGlsKCkge1xyXG4gICAgfVxyXG4gICAgQ29tbW9uVXRpbC5HZXRDb2x1bW5PYmplY3QgPSBmdW5jdGlvbiAoY29sdW1uSWQsIGNvbHVtbnMpIHtcclxuICAgICAgICBpZiAoY29sdW1uSWQgPT0gbnVsbCB8fCBjb2x1bW5zID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXRDb2w7XHJcbiAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wpIHtcclxuICAgICAgICAgICAgaWYgKGNvbC5pZCA9PT0gY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgICAgIHJldENvbCA9IGNvbDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXRDb2w7XHJcbiAgICB9O1xyXG4gICAgQ29tbW9uVXRpbC5TZXRPcmRlciA9IGZ1bmN0aW9uIChjb2x1bW5JZCwgb3JkZXIsIGNvbHVtbnMpIHtcclxuICAgICAgICBpZiAoY29sdW1uSWQgPT0gbnVsbCB8fCBjb2x1bW5zID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXRDb2w7XHJcbiAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wpIHtcclxuICAgICAgICAgICAgaWYgKGNvbC5pZCA9PT0gY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbC5vcmRlciA9IG9yZGVyO1xyXG4gICAgICAgICAgICAgICAgcmV0Q29sID0gY29sO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJldENvbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29tbW9uVXRpbDtcclxufSgpKTtcclxuZXhwb3J0cy5Db21tb25VdGlsID0gQ29tbW9uVXRpbDtcclxuXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiBleHRlcm5hbCBcImpRdWVyeVwiICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvanMvbW9kZWxzL0dyaWRPcmRlckRpcmVjdGlvbi50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgR3JpZE9yZGVyRGlyZWN0aW9uO1xyXG4oZnVuY3Rpb24gKEdyaWRPcmRlckRpcmVjdGlvbikge1xyXG4gICAgR3JpZE9yZGVyRGlyZWN0aW9uW1wiTm9uZVwiXSA9IFwiTm9uZVwiO1xyXG4gICAgR3JpZE9yZGVyRGlyZWN0aW9uW1wiQXNjXCJdID0gXCJBc2NcIjtcclxuICAgIEdyaWRPcmRlckRpcmVjdGlvbltcIkRlc2NcIl0gPSBcIkRlc2NcIjtcclxufSkoR3JpZE9yZGVyRGlyZWN0aW9uID0gZXhwb3J0cy5HcmlkT3JkZXJEaXJlY3Rpb24gfHwgKGV4cG9ydHMuR3JpZE9yZGVyRGlyZWN0aW9uID0ge30pKTtcclxuXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2dyaWQtZGV0YWlscy1yb3cuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBIYW5kbGViYXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgaGFuZGxlYmFycyAqLyAwKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgaGVscGVyLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXMyPWhlbHBlcnMuaGVscGVyTWlzc2luZywgYWxpYXMzPVwiZnVuY3Rpb25cIiwgYWxpYXM0PWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8dHI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XFxcImd1aSBydi1wYXJlbnRcXFwiIHZhbGlnbj1cXFwidG9wXFxcIiBkYXRhLWZpbHRlci10eXBlPVxcXCJcIlxuICAgICsgYWxpYXM0KCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMudHlwZSB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudHlwZSA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwidHlwZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiIGRhdGEtZmlsdGVyLWtleT1cXFwiXCJcbiAgICArIGFsaWFzNCgoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLmlkIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiaWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxcIiBkYXRhLWZpbHRlci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzNCgoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLmFjdHVhbFZhbHVlIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5hY3R1YWxWYWx1ZSA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiYWN0dWFsVmFsdWVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cIlxuICAgICsgYWxpYXM0KCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMuY29sdW1uTmFtZSB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sdW1uTmFtZSA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiY29sdW1uTmFtZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCI8L3NwYW4+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5maWx0ZXJhYmxlIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgyLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgICAgIDwvdGQ+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8dGQ+XCJcbiAgICArICgoc3RhY2sxID0gKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5jb2x1bW5WYWx1ZSB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sdW1uVmFsdWUgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXMzID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcImNvbHVtblZhbHVlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L3RkPlxcclxcbiAgICAgICAgICAgICAgICA8L3RyPlxcclxcblwiO1xufSxcIjJcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgbS1sLTUgcnYtY2hpbGQgZ3VpLWNhcHRpb25cXFwiID5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBndWktaWNvbi1hZGQgaG92ZXIgbS1sLTUgY3Vyc29yLXBvaW50ZXIgYWRkRmlsdGVyXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tbWludXMgaG92ZXIgbS1sLTUgY3Vyc29yLXBvaW50ZXIgcmVtb3ZlRmlsdGVyXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGhlbHBlciwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiPHRyIGNsYXNzPVxcXCJndWkgZ3VpLWhpZGRlbiBkZXRhaWxzUm93XFxcIj5cXHJcXG4gICAgPHRkIGNvbHNwYW49XFxcIlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbigoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLmxlbmd0aCB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGVuZ3RoIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJsZW5ndGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cXFwiZ3VpIHZlcnkgY29tcGFjdCBzZWxlY3RhYmxlIGNlbGxlZCB0YWJsZSBkZXRhaWxzVGFibGUgbS1sLTM3IHAtNVxcXCIgc3R5bGU9XFxcIndpZHRoOiBhdXRvO1xcXCIgPlxcclxcbiAgICAgICAgICAgIDx0Ym9keT5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1haW5Sb3dDb2xBcnJheSA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L3Rib2R5PlxcclxcbiAgICAgICAgPC90YWJsZT5cXHJcXG4gICAgPC90ZD5cXHJcXG48L3RyPlwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9ncmlkLWZvb3Rlci5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBIYW5kbGViYXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgaGFuZGxlYmFycyAqLyAwKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgIDxvcHRpb24gXCJcbiAgICArIGFsaWFzMShfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvU2VsZWN0ZWQudHMgKi8gMjMpKS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0ucGFnaW5hdGlvbkRhdGEgOiBkZXB0aHNbMV0pKSAhPSBudWxsID8gc3RhY2sxLnBhZ2VTaXplIDogc3RhY2sxKSxkZXB0aDAse1wibmFtZVwiOlwiU2VsZWN0ZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIj5cIlxuICAgICsgYWxpYXMxKGNvbnRhaW5lci5sYW1iZGEoZGVwdGgwLCBkZXB0aDApKVxuICAgICsgXCI8L29wdGlvbj5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWNvbnRhaW5lci5sYW1iZGE7XG5cbiAgcmV0dXJuIFwiPGRpdiBkYXRhLXJvbGU9XFxcInBhZ2VyXFxcIiBjbGFzcz1cXFwiZ3VpIGxlZnQgZ3VpLXN1YmhlYWRpbmctMiBjb2wtbWQtNiB0ZXh0LWxlZnQgbS0wXFxcIj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtaW5pIGNvbXBhY3QgXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtaW5pIGNvbXBhY3QgZmlyc3RMaW5rXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMgKi8gMSkpLmNhbGwoYWxpYXMxLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5maXJzdFBhZ2VMaW5rRGlzYWJsZWQgOiBzdGFjazEpLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJHbyB0byB0aGUgZmlyc3QgcGFnZVxcXCIgdGl0bGU9XFxcIkdvIHRvIHRoZSBmaXJzdCBwYWdlXFxcIiBkYXRhLXBhZ2U9XFxcIjFcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIGd1aS1pY29uLXByZXZpb3VzXFxcIj48L2k+XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtaW5pIGNvbXBhY3QgcHJldkxpbmtcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqLyAxKSkuY2FsbChhbGlhczEsKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLnByZXZQYWdlTGlua0Rpc2FibGVkIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJEaXNhYmxlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiR28gdG8gdGhlIHByZXZpb3VzIHBhZ2VcXFwiIHRpdGxlPVxcXCJHbyB0byB0aGUgcHJldmlvdXMgcGFnZVxcXCIgZGF0YS1wYWdlPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9tYXRoLnRzICovIDgpKS5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEucGFnZUluZGV4IDogc3RhY2sxKSxcIi1cIiwxLHtcIm5hbWVcIjpcIm1hdGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICB0YWJpbmRleD1cXFwiLTFcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jaGV2cm9uLWxlZnRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICBQcmV2XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgPC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIHBhZ2VyLWlucHV0LWNvbnRhaW5lciBpbnB1dFxcXCI+XFxyXFxuICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tci01XFxcIj4gUGFnZSA8L3NwYW4+XFxyXFxuICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBwYWdlci1pbnB1dCB3LTI1IHAtMCBtLXItNVxcXCIgYXJpYS1sYWJlbD1cXFwiMVxcXCIgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5wYWdlSW5kZXggOiBzdGFjazEpLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIHR5cGU9XFxcInRleHRcXFwiIHBsYWNlaG9sZGVyPVxcXCJQYWdlIE51bWJlciAuLi5cXFwiPlxcclxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm5vLW9mLXBhZ2VzLXNjYW5cXFwiIGRhdGEtbnVtYmVyLW9mLXBhZ2VzPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubm9PZlBhZ2VzIDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj4gb2YgXCJcbiAgICArIGFsaWFzMihhbGlhczMoKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLm5vT2ZQYWdlcyA6IHN0YWNrMSksIGRlcHRoMCkpXG4gICAgKyBcIjwvc3Bhbj5cXHJcXG4gICAgPC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG1pbmkgY29tcGFjdCBcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIG1pbmkgY29tcGFjdCBuZXh0TGlua1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0Rpc2FibGVkLnRzICovIDEpKS5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubmV4dFBhZ2VMaW5rRGlzYWJsZWQgOiBzdGFjazEpLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJHbyB0byB0aGUgbmV4dCBwYWdlXFxcIiB0aXRsZT1cXFwiR28gdG8gdGhlIG5leHQgcGFnZVxcXCIgZGF0YS1wYWdlPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9tYXRoLnRzICovIDgpKS5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEucGFnZUluZGV4IDogc3RhY2sxKSxcIitcIiwxLHtcIm5hbWVcIjpcIm1hdGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj5cXHJcXG4gICAgICAgICAgICBOZXh0XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIGd1aS1pY29uLWNoZXZyb24tcmlnaHRcXFwiPjwvaT5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIG1pbmkgY29tcGFjdCBsYXN0TGlua1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0Rpc2FibGVkLnRzICovIDEpKS5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGFzdFBhZ2VMaW5rRGlzYWJsZWQgOiBzdGFjazEpLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJHbyB0byB0aGUgbGFzdCBwYWdlXFxcIiB0aXRsZT1cXFwiR28gdG8gdGhlIGxhc3QgcGFnZVxcXCIgZGF0YS1wYWdlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubm9PRnBhZ2VzIDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1uZXh0XFxcIj48L2k+XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgPC9zcGFuPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbC1tZC02IGd1aSBndWktc3ViaGVhZGluZy0yIHJpZ2h0IHRleHQtcmlnaHQgbS0wXFxcIj5cXHJcXG4gICAgPHNwYW4+Um93cyBQZXIgUGFnZTwvc3Bhbj5cXHJcXG4gICAgPHNlbGVjdCBjbGFzcz1cXFwiZ3VpIHBhZ2VTaXplU2VsZWN0b3JcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEucGFnZVNpemVzIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3NlbGVjdD5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLWwtMTBcXFwiPlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKCgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLnJhbmdlIDogc3RhY2sxKSkgIT0gbnVsbCA/IHN0YWNrMS5taW4gOiBzdGFjazEpLCBkZXB0aDApKVxuICAgICsgXCIgLSBcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoKHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5yYW5nZSA6IHN0YWNrMSkpICE9IG51bGwgPyBzdGFjazEubWF4IDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiIG9mIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS50b3RhbENvdW50IDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiIGl0ZW1zPC9zcGFuPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImd1aSBjbGVhclxcXCI+PC9kaXY+XCI7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL21hdGgudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIG1hdGggPSBmdW5jdGlvbiAobHZhbHVlLCBvcGVyYXRvciwgcnZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFwiK1wiOiBsdmFsdWUgKyBydmFsdWUsXHJcbiAgICAgICAgXCItXCI6IGx2YWx1ZSAtIHJ2YWx1ZSxcclxuICAgICAgICBcIipcIjogbHZhbHVlICogcnZhbHVlLFxyXG4gICAgICAgIFwiL1wiOiBsdmFsdWUgLyBydmFsdWUsXHJcbiAgICAgICAgXCIlXCI6IGx2YWx1ZSAlIHJ2YWx1ZSxcclxuICAgIH1bb3BlcmF0b3JdO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBtYXRoO1xyXG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZ3JpZC1tYWluLXJvdy5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjx0ciBjbGFzcz1cXFwibWFpblJvd1xcXCIgZGF0YS1way1hdHRyPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAua2V5Q29sdW1uIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiA+XFxyXFxuICAgIDx0ZCBjbGFzcz1cXFwiZXhwYW5zaW9uQXJyb3dzXFxcIiBzdHlsZT1cXFwiZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7XFxcIj5cXHJcXG4gICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tY2hldnJvbi1kb3duIGV4cGFuZERldGFpbHNSb3dJY29uIGN1cnNvci1wb2ludGVyXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9pPlxcclxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBndWktaWNvbi1jaGV2cm9uLXVwIENvbGxhcHNlRGV0YWlsc1Jvd0ljb24gY3Vyc29yLXBvaW50ZXIgZ3VpLWhpZGRlblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvaT5cXHJcXG4gICAgPC90ZD5cXHJcXG4gICAgPHRkPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBkYXRhLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucm93RGF0YSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5rZXlDb2x1bW4gOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIGNsYXNzPVxcXCJzZWxlY3Qta2V5LWNoZWNrYm94IGN1cnNvci1wb2ludGVyXFxcIj5cXHJcXG4gICAgPC90ZD5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5tYWluUm93Q29sQXJyYXkgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC90cj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZ3JpZC1kZXRhaWxzLXJvdy5oYnMgKi8gNiksZGVwdGgwLHtcIm5hbWVcIjpcImdyaWQtZGV0YWlscy1yb3dcIixcImRhdGFcIjpkYXRhLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgIDx0ZCB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmFjdHVhbFZhbHVlIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBjbGFzcz1cXFwiYm9keS1cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlwiXG4gICAgKyAoKHN0YWNrMSA9IGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sdW1uVmFsdWUgOiBkZXB0aDApLCBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC90ZD5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1haW5Sb3dBcnJheSA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2pzL21haW4vR3JpZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBqUXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBqcXVlcnkgKi8gNCk7XHJcbnZhciBDb25maWdTdG9yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vY29uZmlnL0NvbmZpZ1N0b3JlICovIDExKTtcclxudmFyIENvbFNldHRpbmdzSGFuZGxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZXZlbnRIYW5kbGVycy9Db2xTZXR0aW5nc0hhbmRsZXIgKi8gMTIpO1xyXG52YXIgU2VsZWN0RXZlbnRIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9ldmVudEhhbmRsZXJzL1NlbGVjdEV2ZW50SGFuZGxlciAqLyAxMyk7XHJcbnZhciBQYWdlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcGFnaW5hdGlvbi9QYWdlciAqLyAyKTtcclxudmFyIERldGFpbHNSb3dIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uL2V2ZW50SGFuZGxlcnMvRGV0YWlsc1Jvd0hhbmRsZXIgKi8gMTQpO1xyXG52YXIgRmlsdGVyQ2xpY2tIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uL2V2ZW50SGFuZGxlcnMvRmlsdGVyQ2xpY2tIYW5kbGVyICovIDE1KTtcclxudmFyIEhhbmRsZXJOYW1lc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudEhhbmRsZXJzL0hhbmRsZXJOYW1lcyAqLyAxNyk7XHJcbnZhciBIZWFkZXJDbGlja0hhbmRsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vZXZlbnRIYW5kbGVycy9IZWFkZXJDbGlja0hhbmRsZXIgKi8gMTgpO1xyXG52YXIgUGFnZVNlYXJjaENsaWNrSGFuZGxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudEhhbmRsZXJzL1BhZ2VTZWFyY2hDbGlja0hhbmRsZXIgKi8gMTkpO1xyXG52YXIgU2Nyb2xsSGFuZGxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudEhhbmRsZXJzL1Njcm9sbEhhbmRsZXIgKi8gMjApO1xyXG52YXIgVG9nZ2xlQ29sdW1uSGFuZGxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudEhhbmRsZXJzL1RvZ2dsZUNvbHVtbkhhbmRsZXIgKi8gMjEpO1xyXG52YXIgR3JpZFRlbXBsYXRlU2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9zZXJ2aWNlcy9HcmlkVGVtcGxhdGVTZXJ2aWNlICovIDIyKTtcclxudmFyIEdyaWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHcmlkKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYmluZERhdGEgPSBmdW5jdGlvbiAoZGF0YSwgcGFnaW5hdGlvbklucHV0KSB7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdEluZGV4ID0gMDtcclxuICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY2h1bmtTaXplICsgX3RoaXMuZ2V0SW5pdGlhbFJvd0NvdW50KCk7XHJcbiAgICAgICAgICAgIGxhc3RJbmRleCA9IGxhc3RJbmRleCA+PSBkYXRhLmxlbmd0aCA/IGRhdGEubGVuZ3RoIC0gMSA6IGxhc3RJbmRleDtcclxuICAgICAgICAgICAgUGFnZXJfMS5QYWdlci5DYWxjdWxhdGVQYWdpbmF0aW9uRGF0YShwYWdpbmF0aW9uSW5wdXQpO1xyXG4gICAgICAgICAgICB2YXIgZ3JpZENvbnRlbnQgPSBfdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLkdldEZpcnN0VGVtcGxhdGUoZGF0YSwgZmlyc3RJbmRleCwgbGFzdEluZGV4KTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9IGdyaWRDb250ZW50O1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5tYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5iaW5kTWFuYWdlQ29sdW1zKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubWFuYWdlQ29sU2V0dGluZ3NDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEhhdmUgdG8gYmluZCBTY3JvbGwgSGFuZGxlciBBZnRlciBET00gaGFzIGJlZW4gY3JlYXRlZFxyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc2Nyb2xsSGFuZGxlciAhPT0gdW5kZWZpbmVkICYmIF90aGlzLnNjcm9sbEhhbmRsZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbEhhbmRsZXIucmVtb3ZlSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsSGFuZGxlci5yZXNldFBhcmVudE9mZnNldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsSGFuZGxlciA9IG5ldyBTY3JvbGxIYW5kbGVyXzEuU2Nyb2xsSGFuZGxlcihfdGhpcy5jb25maWdTdG9yZSwgX3RoaXMuZ3JpZFRlbXBsYXRlU2VydmljZSwgbGFzdEluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGxIYW5kbGVyLndhdGNoV2lkdGgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zY3JvbGxIYW5kbGVyLlJlZ2lzdGVyRG9tSGFuZGxlcigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5iaW5kTWFuYWdlQ29sdW1zID0gZnVuY3Rpb24gKG1hbmFnZUNvbENvbnRhaW5lciwgZm9yY2UpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm1hbmFnZUNvbEhhbmRsZXIgIT09IHVuZGVmaW5lZCAmJiAhZm9yY2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaHRtbCA9IF90aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UuR2V0TWFuYWdlQ29sdW1uc0h0bWwoKTtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkobWFuYWdlQ29sQ29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICB8fCBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm1hbmFnZUNvbFNldHRpbmdzQ29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICB8fCBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgICAgICAgICBfdGhpcy50b2dnbGVIYW5kbGVyID0gbmV3IFRvZ2dsZUNvbHVtbkhhbmRsZXJfMS5Ub2dnbGVDb2x1bW5IYW5kbGVyKF90aGlzLmNvbmZpZ1N0b3JlLCBqUXVlcnkoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLm9wdGlvbnMubWFuYWdlQ29sU2V0dGluZ3NDb250YWluZXIgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgICAgICBfdGhpcy5tYW5hZ2VDb2xIYW5kbGVyID0gbmV3IENvbFNldHRpbmdzSGFuZGxlcl8xLkNvbFNldHRpbmdzSGFuZGxlcihqUXVlcnkoZWxlbWVudCksIF90aGlzLmNvbmZpZ1N0b3JlLCBfdGhpcy50b2dnbGVIYW5kbGVyKTtcclxuICAgICAgICAgICAgZWxlbWVudC5maW5kKFwiLmNvbC1zZXR0aW5ncy1jb250YWluZXJcIikuaHRtbChodG1sKTtcclxuICAgICAgICAgICAgX3RoaXMubWFuYWdlQ29sSGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgalF1ZXJ5KHdpbmRvdykucmVzaXplKF90aGlzLmRvY3VtZW50UmVzaXplSGFuZGxlckZvckNzKTtcclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5jbGljayhfdGhpcy5kb2N1bWVudENsaWNrSGFuZGxlckZvckNzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYXBwbHlDb2x1bW5Db25maWcgPSBmdW5jdGlvbiAoY29sdW1ucykge1xyXG4gICAgICAgICAgICBfdGhpcy50b2dnbGVIYW5kbGVyLmFwcGx5Q29sdW1uQ29uZmlnKGNvbHVtbnMpO1xyXG4gICAgICAgICAgICB2YXIgaHRtbCA9IF90aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UuR2V0TWFuYWdlQ29sdW1uc0h0bWwoKTtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5tYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgfHwgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgZWxlbWVudC5maW5kKFwiLmNvbC1zZXR0aW5ncy1jb250YWluZXJcIikuaHRtbChodG1sKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0T3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeUxpc3QpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBjb2wub3JkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9yZGVyQnlMaXN0ID09PSB1bmRlZmluZWQgfHwgb3JkZXJCeUxpc3QgPT09IG51bGwgfHwgb3JkZXJCeUxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBvcmRlckJ5TGlzdF8xID0gb3JkZXJCeUxpc3Q7IF9iIDwgb3JkZXJCeUxpc3RfMS5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlckNvbCA9IG9yZGVyQnlMaXN0XzFbX2JdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBfZCA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1uczsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2RbX2NdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmRlckNvbC5jb2xJZCA9PT0gY29sLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5vcmRlciA9IG9yZGVyQ29sLm9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBqUXVlcnkoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWFuYWdlQ29udGFpbmVyRWxlbWVudCA9IGpRdWVyeShfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm1hbmFnZUNvbFNldHRpbmdzQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgaWYgKG1hbmFnZUNvbnRhaW5lckVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbWFuYWdlQ29udGFpbmVyRWxlbWVudC5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHdpbmRvdykub2ZmKFwicmVzaXplXCIsIF90aGlzLmRvY3VtZW50UmVzaXplSGFuZGxlcik7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9mZihcImNsaWNrXCIsIF90aGlzLmRvY3VtZW50Q2xpY2tIYW5kbGVyKTtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLm9mZihcInJlc2l6ZVwiLCBfdGhpcy5kb2N1bWVudFJlc2l6ZUhhbmRsZXJGb3JDcyk7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9mZihcImNsaWNrXCIsIF90aGlzLmRvY3VtZW50Q2xpY2tIYW5kbGVyRm9yQ3MpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc2Nyb2xsSGFuZGxlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGxIYW5kbGVyLnVuV2F0Y2hXaWR0aCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldEluaXRpYWxSb3dDb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGpRdWVyeSh3aW5kb3cpLmlubmVySGVpZ2h0KCkgKiAwLjY1KSAvIDMyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuSW5pdEhhbmRsZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IGpRdWVyeShfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVDaGFpbiA9IFtdO1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVDaGFpbi5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IG5ldyBEZXRhaWxzUm93SGFuZGxlcl8xLkRldGFpbHNSb3dIYW5kbGVyKF90aGlzLmNvbmZpZ1N0b3JlLCBwYXJlbnRFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IEhhbmRsZXJOYW1lc18xLkhhbmRsZXJOYW1lcy5EZXRhaWxzUm93LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhaW4ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBuZXcgRmlsdGVyQ2xpY2tIYW5kbGVyXzEuRmlsdGVyQ2xpY2tIYW5kbGVyKF90aGlzLmNvbmZpZ1N0b3JlLCBwYXJlbnRFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IEhhbmRsZXJOYW1lc18xLkhhbmRsZXJOYW1lcy5GaWx0ZXJBY3Rpb24sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVDaGFpbi5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IG5ldyBIZWFkZXJDbGlja0hhbmRsZXJfMS5IZWFkZXJDbGlja0hhbmRsZXIoX3RoaXMuY29uZmlnU3RvcmUsIHBhcmVudEVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogSGFuZGxlck5hbWVzXzEuSGFuZGxlck5hbWVzLkhlYWRlckNsaWNrLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhaW4ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBuZXcgUGFnZVNlYXJjaENsaWNrSGFuZGxlcl8xLlBhZ2VTZWFyY2hIYW5kbGVyKF90aGlzLmNvbmZpZ1N0b3JlLCBwYXJlbnRFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IEhhbmRsZXJOYW1lc18xLkhhbmRsZXJOYW1lcy5QYWdlU2VhcmNoLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZUNoYWluLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogbmV3IFNlbGVjdEV2ZW50SGFuZGxlcl8xLlNlbGVjdEV2ZW50SGFuZGxlcihfdGhpcy5jb25maWdTdG9yZSwgcGFyZW50RWxlbWVudCwgX3RoaXMuZ3JpZFRlbXBsYXRlU2VydmljZSksXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBIYW5kbGVyTmFtZXNfMS5IYW5kbGVyTmFtZXMuQ29sU2V0dGluZ3MsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVDaGFpbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUuaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGpRdWVyeSh3aW5kb3cpLnJlc2l6ZShfdGhpcy5kb2N1bWVudFJlc2l6ZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLmNsaWNrKF90aGlzLmRvY3VtZW50Q2xpY2tIYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRSZXNpemVIYW5kbGVyRm9yQ3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMubWFuYWdlQ29sSGFuZGxlci5vblJlc2l6ZSgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDbGlja0hhbmRsZXJGb3JDcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5tYW5hZ2VDb2xIYW5kbGVyLm9uRG9jdW1lbnRDbGljayhldmVudCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFJlc2l6ZUhhbmRsZXJGb3JTY3JvbGwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMubWFuYWdlQ29sSGFuZGxlci5vblJlc2l6ZSgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhaW4uZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlLmhhbmRsZXIub25Eb2N1bWVudENsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhaW4uZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlLmhhbmRsZXIub25Eb2N1bWVudENsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IG5ldyBDb25maWdTdG9yZV8xLkNvbmZpZ1N0b3JlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZ3JpZFRlbXBsYXRlU2VydmljZSA9IG5ldyBHcmlkVGVtcGxhdGVTZXJ2aWNlXzEuR3JpZFRlbXBsYXRlU2VydmljZSh0aGlzLmNvbmZpZ1N0b3JlKTtcclxuICAgICAgICB0aGlzLkluaXRIYW5kbGVycygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEdyaWQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuR3JpZCA9IEdyaWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9qcy9jb25maWcvQ29uZmlnU3RvcmUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29uZmlnU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb25maWdTdG9yZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmRlZmF1bHRHcmlkT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgICAgICBjaHVua1NpemU6IDUsXHJcbiAgICAgICAgICAgIGNvbHVtbnM6IFtdLFxyXG4gICAgICAgICAgICBjb250YWluZXJFbGVtZW50OiBudWxsLFxyXG4gICAgICAgICAgICBtYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lcjogbnVsbCxcclxuICAgICAgICAgICAgaHlicmlkRnVuY3Rpb246IGZ1bmN0aW9uIChjb2x1bW4sIHJvdykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBrZXlDb2x1bW46IFwiXCIsXHJcbiAgICAgICAgICAgIG9uQ29sU2V0dGluZ3NDaGFuZ2U6IGZ1bmN0aW9uIChjb2xDb25maWcpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vIENvZGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DbGlja0ZpbHRlcjogZnVuY3Rpb24gKGNvbHVtbiwgdmFsdWUsIGFjdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vIGNvZGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DbGlja0hlYWRlcjogZnVuY3Rpb24gKGNvbHVtbiwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyBjb2RlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uUGFnZVNlYXJjaDogZnVuY3Rpb24gKHBhZ2VTaXplLCBwYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vIGNvZGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChyb3dzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyBDb2RlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLlNldEhpZGRlbk9uQ29uZmlnID0gZnVuY3Rpb24gKGJvb2wsIGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5PcHRpb25zLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbklkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2wuaGlkZGVuID0gYm9vbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuaWQgPT09IGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5oaWRkZW4gPSBib29sO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyA9IGZ1bmN0aW9uIChpbnB1dE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCBfdGhpcy5kZWZhdWx0R3JpZE9wdGlvbnMsIGlucHV0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgUHJvdmlkZSBhIHZhbGlkIGNvbnRhaW5lciBFbGVtZW50IG9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uZmlnU3RvcmUucHJvdG90eXBlLCBcIk9wdGlvbnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENvbmZpZ1N0b3JlO1xyXG59KCkpO1xyXG5leHBvcnRzLkNvbmZpZ1N0b3JlID0gQ29uZmlnU3RvcmU7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvQ29sU2V0dGluZ3NIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29sU2V0dGluZ3NIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sU2V0dGluZ3NIYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlLCB0b2dnbGVDb2x1bW5IYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDb2x1bW5IYW5kbGVyID0gdG9nZ2xlQ29sdW1uSGFuZGxlcjtcclxuICAgIH1cclxuICAgIENvbFNldHRpbmdzSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gY29uc3Qgc2V0dG5nc1BvcHVwID0gdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIuY29sLXNldHRpbmdzLWNvbnRhaW5lclwiKTtcclxuICAgICAgICAvLyBjb25zdCB0Ym9keUhlaWdodCA9IHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnRhYmxlLWJvZHlcIikuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAvLyBzZXR0bmdzUG9wdXAuaW5uZXJIZWlnaHQodGJvZHlIZWlnaHQgLSAxMCk7XHJcbiAgICAgICAgLy8gc2V0dG5nc1BvcHVwLmZpbmQoXCIuY29sLXNldHRpbmdzLXRhYmxlXCIpLmlubmVySGVpZ2h0KHNldHRuZ3NQb3B1cC5pbm5lckhlaWdodCgpIC1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0bmdzUG9wdXAuZmluZChcIi5jb2wtc2V0dGluZ3MtaGVhZGVyXCIpLmlubmVySGVpZ2h0KCkpO1xyXG4gICAgfTtcclxuICAgIENvbFNldHRpbmdzSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICBpZiAodGFyZ2V0RWxlbWVudC5pcyhcIi5jb2wtc2V0dGluZ3MtdHJpZ2dlclwiKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGFyZ2V0RWxlbWVudC5wYXJlbnRzKCkuaXMoXCIuY29sLXNldHRpbmdzLWNvbnRhaW5lclwiKSkge1xyXG4gICAgICAgICAgICBqUXVlcnkoXCIuY29sLXNldHRpbmdzLXRyaWdnZXJcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGpRdWVyeShcIi5jb2wtc2V0dGluZ3MtY29udGFpbmVyXCIpLnNsaWRlVXAodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb2xTZXR0aW5nc0hhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmNvbC1zZXR0aW5ncy10cmlnZ2VyXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgc2V0dG5nc1BvcHVwID0gX3RoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLmNvbC1zZXR0aW5ncy1jb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIF90aGlzLm9uUmVzaXplKCk7XHJcbiAgICAgICAgICAgIGpRdWVyeShcIi5jb2wtc2V0dGluZ3MtdHJpZ2dlclwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgc2V0dG5nc1BvcHVwLnNsaWRlVG9nZ2xlKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImtleXVwXCIsIFwiLmNvbC1zZXR0aW5ncy1oZWFkZXIgLmNvbC1zZXR0aW5ncy1maWx0ZXJcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBlbGVtZW50LnZhbCgpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmFsKTtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLmNvbC1zZXR0aW5ncy10YWJsZSB0YWJsZSB0Ym9keSB0clwiKS5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoZSkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeShlKS5hdHRyKFwiZGF0YS1oZWFkZXItaWRcIikudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KGUpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnNob3ctYWxsLWNvbHVtblwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLmNvbC1zZXR0aW5ncy1oaWRkZW4tY2hlY2tib3hcIilcclxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KGVsZW1lbnQpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMudG9nZ2xlQ29sdW1uSGFuZGxlci5zaG93QWxsQ29sdW1ucygpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sU2V0dGluZ3NDaGFuZ2UoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuaGlkZS1hbGwtY29sdW1uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIuY29sLXNldHRpbmdzLWhpZGRlbi1jaGVja2JveFwiKVxyXG4gICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoZWxlbWVudCkucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMudG9nZ2xlQ29sdW1uSGFuZGxlci5oaWRlQWxsQ29sdW1ucygpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sU2V0dGluZ3NDaGFuZ2UoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuY29sLXNldHRpbmdzLWhpZGRlbi1jaGVja2JveFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBjaGVja2JveC52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrYm94LmlzKFwiOmNoZWNrZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50b2dnbGVDb2x1bW5IYW5kbGVyLnNob3dDb2x1bW4oaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlQ29sdW1uSGFuZGxlci5oaWRlQ29sdW1uKGlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sU2V0dGluZ3NDaGFuZ2UoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbFNldHRpbmdzSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Db2xTZXR0aW5nc0hhbmRsZXIgPSBDb2xTZXR0aW5nc0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvU2VsZWN0RXZlbnRIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2VsZWN0RXZlbnRIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2VsZWN0RXZlbnRIYW5kbGVyKGNvbmZpZ1N0b3JlLCBlbGVtZW50LCBncmlkVGVtcGxhdGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlID0gZ3JpZFRlbXBsYXRlU2VydmljZTtcclxuICAgIH1cclxuICAgIFNlbGVjdEV2ZW50SGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLnNlbGVjdC1rZXktY2hlY2tib3hcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBlbGVtZW50LmRhdGEoXCJ2YWx1ZVwiKTtcclxuICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBlbGVtZW50LmlzKFwiOmNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudHMoXCIubWFpblJvd1wiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50cyhcIi5tYWluUm93XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uU2VsZWN0KFtyb3ddLCBjaGVja2VkKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLnNlbGVjdC1hbGwtY2hlY2tib3hcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uU2VsZWN0KF90aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UuRGF0YSwgY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIF90aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5zZWxlY3Qta2V5LWNoZWNrYm94XCIpLnByb3AoXCJjaGVja2VkXCIsIGNoZWNrZWQpO1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLm1haW5UYWJsZSAubWFpblJvd1wiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5tYWluVGFibGUgLm1haW5Sb3dcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0RXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBTZWxlY3RFdmVudEhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTZWxlY3RFdmVudEhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU2VsZWN0RXZlbnRIYW5kbGVyID0gU2VsZWN0RXZlbnRIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvRGV0YWlsc1Jvd0hhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIERldGFpbHNSb3dIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGV0YWlsc1Jvd0hhbmRsZXIoY29uZmlnU3RvcmUsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnRhYmxlLWJvZHkgLmV4cGFuc2lvbkFycm93cyBpXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFycm93ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsc1JvdyA9IGFycm93LmNsb3Nlc3QoXCJ0clwiKS5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEljb24gPSBhcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3RoZXJJY29uID0gYXJyb3cuc2libGluZ3MoXCJpXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGlmIChhcnJvdy5oYXNDbGFzcyhcImV4cGFuZERldGFpbHNSb3dJY29uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc1Jvdy5zbGlkZURvd24oX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNSb3cuc2xpZGVVcChfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuICAgIERldGFpbHNSb3dIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBOb3RoaW5nIHRvIERvLlxyXG4gICAgfTtcclxuICAgIERldGFpbHNSb3dIYW5kbGVyLnByb3RvdHlwZS5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBOb3RoaW5nIHRvIERvLlxyXG4gICAgfTtcclxuICAgIHJldHVybiBEZXRhaWxzUm93SGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5EZXRhaWxzUm93SGFuZGxlciA9IERldGFpbHNSb3dIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9qcy9ldmVudEhhbmRsZXJzL0ZpbHRlckNsaWNrSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbHVtblV0aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWwvQ29sdW1uVXRpbCAqLyAzKTtcclxudmFyIEZpbHRlckFjdGlvblR5cGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUgKi8gMTYpO1xyXG52YXIgRmlsdGVyQ2xpY2tIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyQ2xpY2tIYW5kbGVyKGNvbmZpZ1N0b3JlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnRhYmxlLWJvZHkgLmRldGFpbHNSb3cgLmRldGFpbHNUYWJsZSB0ZCBpXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRUZCA9IGVsZW1lbnQucGFyZW50cyhcInRkXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhcmVudFRkLmF0dHIoXCJkYXRhLWZpbHRlci1rZXlcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJlbnRUZC5hdHRyKFwiZGF0YS1maWx0ZXItdmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHBhcmVudFRkLmF0dHIoXCJkYXRhLWZpbHRlci10eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IENvbHVtblV0aWxfMS5Db21tb25VdGlsLkdldENvbHVtbk9iamVjdChrZXksIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sID09PSB1bmRlZmluZWQgfHwgY29sID09PSBudWxsIHx8ICFjb2wuZmlsdGVyYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJBY3Rpb24gPSBGaWx0ZXJBY3Rpb25UeXBlXzEuRmlsdGVyQWN0aW9uVHlwZS5BZGQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcyhcInJlbW92ZUZpbHRlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckFjdGlvbiA9IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLk1pbnVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkNsaWNrRmlsdGVyKGtleSwgdmFsdWUsIGZpbHRlckFjdGlvbiwgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuICAgIEZpbHRlckNsaWNrSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBEby5cclxuICAgIH07XHJcbiAgICBGaWx0ZXJDbGlja0hhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIE5vdGhpbmcgdG8gRG8uXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpbHRlckNsaWNrSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GaWx0ZXJDbGlja0hhbmRsZXIgPSBGaWx0ZXJDbGlja0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2pzL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChGaWx0ZXJBY3Rpb25UeXBlKSB7XHJcbiAgICBGaWx0ZXJBY3Rpb25UeXBlW1wiQWRkXCJdID0gXCJBZGRcIjtcclxuICAgIEZpbHRlckFjdGlvblR5cGVbXCJNaW51c1wiXSA9IFwiTWludXNcIjtcclxufSkoRmlsdGVyQWN0aW9uVHlwZSA9IGV4cG9ydHMuRmlsdGVyQWN0aW9uVHlwZSB8fCAoZXhwb3J0cy5GaWx0ZXJBY3Rpb25UeXBlID0ge30pKTtcclxuXG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvanMvZXZlbnRIYW5kbGVycy9IYW5kbGVyTmFtZXMudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBIYW5kbGVyTmFtZXM7XHJcbihmdW5jdGlvbiAoSGFuZGxlck5hbWVzKSB7XHJcbiAgICBIYW5kbGVyTmFtZXNbSGFuZGxlck5hbWVzW1wiRmlsdGVyQWN0aW9uXCJdID0gMF0gPSBcIkZpbHRlckFjdGlvblwiO1xyXG4gICAgSGFuZGxlck5hbWVzW0hhbmRsZXJOYW1lc1tcIkhlYWRlckNsaWNrXCJdID0gMV0gPSBcIkhlYWRlckNsaWNrXCI7XHJcbiAgICBIYW5kbGVyTmFtZXNbSGFuZGxlck5hbWVzW1wiU2Nyb2xsXCJdID0gMl0gPSBcIlNjcm9sbFwiO1xyXG4gICAgSGFuZGxlck5hbWVzW0hhbmRsZXJOYW1lc1tcIlBhZ2VTZWFyY2hcIl0gPSAzXSA9IFwiUGFnZVNlYXJjaFwiO1xyXG4gICAgSGFuZGxlck5hbWVzW0hhbmRsZXJOYW1lc1tcIkRldGFpbHNSb3dcIl0gPSA0XSA9IFwiRGV0YWlsc1Jvd1wiO1xyXG4gICAgSGFuZGxlck5hbWVzW0hhbmRsZXJOYW1lc1tcIlRvZ2dsZUNvbHVtblwiXSA9IDVdID0gXCJUb2dnbGVDb2x1bW5cIjtcclxuICAgIEhhbmRsZXJOYW1lc1tIYW5kbGVyTmFtZXNbXCJDb2xTZXR0aW5nc1wiXSA9IDZdID0gXCJDb2xTZXR0aW5nc1wiO1xyXG59KShIYW5kbGVyTmFtZXMgPSBleHBvcnRzLkhhbmRsZXJOYW1lcyB8fCAoZXhwb3J0cy5IYW5kbGVyTmFtZXMgPSB7fSkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9qcy9ldmVudEhhbmRsZXJzL0hlYWRlckNsaWNrSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbHVtblV0aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWwvQ29sdW1uVXRpbCAqLyAzKTtcclxudmFyIEdyaWRPcmRlckRpcmVjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9tb2RlbHMvR3JpZE9yZGVyRGlyZWN0aW9uICovIDUpO1xyXG52YXIgSGVhZGVyQ2xpY2tIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ2xpY2tIYW5kbGVyKGNvbmZpZ1N0b3JlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0ZXJpbmcgSlF1ZXJ5IEV2ZW50IEhhbmRsZXIgaWYgSGVhZGVyIGlzIENsaWNrZWQuXHJcbiAgICAgICAgICAgIF90aGlzLnBhcmVudEVsZW1lbnQub24oXCJjbGlja1wiLCBcIi50YWJsZS1oZWFkZXIgdGhcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpLmNsb3Nlc3QoXCJ0aFwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJJZCA9IGVsZW1lbnQuYXR0cihcImRhdGEtaGVhZGVyLWlkXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IENvbHVtblV0aWxfMS5Db21tb25VdGlsLkdldENvbHVtbk9iamVjdChoZWFkZXJJZCwgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2wgPT09IHVuZGVmaW5lZCB8fCBjb2wgPT09IG51bGwgfHwgIWNvbC5zb3J0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBhcnJvd0ljb25zID0gZWxlbWVudC5maW5kKFwiaVwiKTtcclxuICAgICAgICAgICAgICAgIHZhciB1cEFycm93SWNvbiA9IGFycm93SWNvbnMuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBkb3duQXJyb3dJY29uID0gYXJyb3dJY29ucy5sYXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycm93SWNvbnMuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cEFycm93SWNvbi5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IEdyaWRPcmRlckRpcmVjdGlvbl8xLkdyaWRPcmRlckRpcmVjdGlvbi5EZXNjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cEFycm93SWNvbi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25BcnJvd0ljb24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gR3JpZE9yZGVyRGlyZWN0aW9uXzEuR3JpZE9yZGVyRGlyZWN0aW9uLkFzYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG93bkFycm93SWNvbi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwQXJyb3dJY29uLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBHcmlkT3JkZXJEaXJlY3Rpb25fMS5HcmlkT3JkZXJEaXJlY3Rpb24uQXNjO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwQXJyb3dJY29uLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIENvbHVtblV0aWxfMS5Db21tb25VdGlsLlNldE9yZGVyKGhlYWRlcklkLCBkaXJlY3Rpb24sIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ2xpY2tIZWFkZXIoaGVhZGVySWQsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuICAgIEhlYWRlckNsaWNrSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBEby5cclxuICAgIH07XHJcbiAgICBIZWFkZXJDbGlja0hhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIE5vdGhpbmcgdG8gRG8uXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEhlYWRlckNsaWNrSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5IZWFkZXJDbGlja0hhbmRsZXIgPSBIZWFkZXJDbGlja0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9qcy9ldmVudEhhbmRsZXJzL1BhZ2VTZWFyY2hDbGlja0hhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgalF1ZXJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEganF1ZXJ5ICovIDQpO1xyXG52YXIgUGFnZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3BhZ2luYXRpb24vUGFnZXIgKi8gMik7XHJcbnZhciBQYWdlU2VhcmNoSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhZ2VTZWFyY2hIYW5kbGVyKGNvbmZpZ1N0b3JlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnRhYmxlLWZvb3RlciAuZmlyc3RMaW5rXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5vblBhZ2VTZWFyY2goUGFnZXJfMS5QYWdlci5QYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZSwgMSk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLnBhcmVudEVsZW1lbnQub24oXCJjbGlja1wiLCBcIi50YWJsZS1mb290ZXIgLm5leHRMaW5rXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5vblBhZ2VTZWFyY2goUGFnZXJfMS5QYWdlci5QYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZSwgUGFnZXJfMS5QYWdlci5QYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnRhYmxlLWZvb3RlciAucHJldkxpbmtcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5vcHRpb25zLm9uUGFnZVNlYXJjaChQYWdlcl8xLlBhZ2VyLlBhZ2luYXRpb25EYXRhLnBhZ2VTaXplLCBQYWdlcl8xLlBhZ2VyLlBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIudGFibGUtZm9vdGVyIC5sYXN0TGlua1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLm9wdGlvbnMub25QYWdlU2VhcmNoKFBhZ2VyXzEuUGFnZXIuUGFnaW5hdGlvbkRhdGEucGFnZVNpemUsIFBhZ2VyXzEuUGFnZXIuUGFnaW5hdGlvbkRhdGEubm9PZlBhZ2VzKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5vbihcImNoYW5nZVwiLCBcIi50YWJsZS1mb290ZXIgLnBhZ2VTaXplU2VsZWN0b3JcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gK2pRdWVyeShldmVudC50YXJnZXQpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5vcHRpb25zLm9uUGFnZVNlYXJjaCh2YWwsIFBhZ2VyXzEuUGFnZXIuUGFnaW5hdGlvbkRhdGEucGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5vbihcImtleXByZXNzXCIsIFwiLnRhYmxlLWZvb3RlciAucGFnZXItaW5wdXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXAgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBwYWdlRGF0YSA9IFBhZ2VyXzEuUGFnZXIuUGFnaW5hdGlvbkRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gK2lwLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbCkgfHwgdmFsID4gcGFnZURhdGEubm9PZlBhZ2VzIHx8IHZhbCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXAudmFsKHBhZ2VEYXRhLnBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5vcHRpb25zLm9uUGFnZVNlYXJjaChwYWdlRGF0YS5wYWdlU2l6ZSwgdmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuICAgIFBhZ2VTZWFyY2hIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICBQYWdlU2VhcmNoSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQYWdlU2VhcmNoSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5QYWdlU2VhcmNoSGFuZGxlciA9IFBhZ2VTZWFyY2hIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvanMvZXZlbnRIYW5kbGVycy9TY3JvbGxIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNjcm9sbEhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTY3JvbGxIYW5kbGVyKGNvbmZpZ1N0b3JlLCBncmlkVGVtcGxhdGVTZXJ2aWNlLCBjdXJyZW50SW5kZXgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVuZGVyaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53YXRjaGVzID0gW107XHJcbiAgICAgICAgdGhpcy5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyaW5nIEpRdWVyeSBFdmVudCBIYW5kbGVyIGlmIEhlYWRlciBpcyBDbGlja2VkLlxyXG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtYm9keVwiKS5vbihcInNjcm9sbFwiLCBfdGhpcy5oYW5kbGVSZXNpemUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtYm9keVwiKS5vZmYoXCJzY3JvbGxcIiwgX3RoaXMuaGFuZGxlUmVzaXplKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVzZXRQYXJlbnRPZmZzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnBhcmVudE9mZlNldExlZnQgPSBfdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIF90aGlzLmxlZnRPZmZzZXQgPSBfdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtaGVhZGVyXCIpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLndhdGNoV2lkdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnBhcmVudE9mZlNldExlZnQgPSBfdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIF90aGlzLndhdGNoZXMucHVzaChzZXRJbnRlcnZhbChfdGhpcy5zZXRIZWFkZXJPZmZzZXQsIDMwMCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy51bldhdGNoV2lkdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy53YXRjaGVzID09PSB1bmRlZmluZWQgfHwgX3RoaXMud2F0Y2hlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy53YXRjaGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdhdGNoID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh3YXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0Qm9keU9iaiA9IF90aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi50YWJsZS1ib2R5XCIpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMubGVmdE9mZnNldCA9PT0gdW5kZWZpbmVkIHx8IF90aGlzLmxlZnRPZmZzZXQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxlZnRPZmZzZXQgPSBfdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtaGVhZGVyXCIpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnRhYmxlLWhlYWRlclwiKS5vZmZzZXQoe1xyXG4gICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubGVmdE9mZnNldCArIC0xICogdEJvZHlPYmouc2Nyb2xsTGVmdCgpLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGFjdHVhbFRhYmxlSGVpZ2h0ID0gdEJvZHlPYmouZmluZChcIi5tYWluVGFibGVcIikuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciBzY3JvbGxDb250YWluZXJIZWlnaHQgPSB0Qm9keU9iai5oZWlnaHQoKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnJlbmRlcmluZykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHRCb2R5T2JqLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICBpZiAoKHNjcm9sbENvbnRhaW5lckhlaWdodCArIHNjcm9sbFRvcCkgLSAoYWN0dWFsVGFibGVIZWlnaHQgKiAwLjgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmN1cnJlbnRJbmRleCA+PSBfdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLkRhdGFMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IF90aGlzLmN1cnJlbnRJbmRleCArIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY2h1bmtTaXplO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA+PSBfdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLkRhdGFMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBfdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLkRhdGFMZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBqUXVlcnkoX3RoaXMuZ3JpZFRlbXBsYXRlU2VydmljZS5nZXRUZW1wbGF0ZShfdGhpcy5jdXJyZW50SW5kZXgsIGxhc3RJbmRleCkpO1xyXG4gICAgICAgICAgICAgICAgdEJvZHlPYmouZmluZChcIi5tYWluVGFibGVCb2R5XCIpLmFwcGVuZChodG1sKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRJbmRleCA9IGxhc3RJbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0SGVhZGVyT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IF90aGlzLnBhcmVudEVsZW1lbnQub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudE9mZlNldExlZnQgIT09IGxlZnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0Qm9keU9iaiA9IF90aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi50YWJsZS1ib2R5XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmxlZnRPZmZzZXQgPT09IHVuZGVmaW5lZCB8fCBfdGhpcy5sZWZ0T2Zmc2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGVmdE9mZnNldCA9IF90aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi50YWJsZS1oZWFkZXJcIikub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLmxlZnRPZmZzZXQgPSBfdGhpcy5sZWZ0T2Zmc2V0IC0gKF90aGlzLnBhcmVudE9mZlNldExlZnQgLSBsZWZ0KTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudEVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi50YWJsZS1oZWFkZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAub2Zmc2V0KHsgbGVmdDogX3RoaXMubGVmdE9mZnNldCwgdG9wOiAwIH0pO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50T2ZmU2V0TGVmdCA9IGxlZnQ7XHJcbiAgICAgICAgICAgICAgICB0Qm9keU9iai5zY3JvbGxMZWZ0KHRCb2R5T2JqLnNjcm9sbExlZnQoKSAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0galF1ZXJ5KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICB0aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UgPSBncmlkVGVtcGxhdGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY3VycmVudEluZGV4O1xyXG4gICAgfVxyXG4gICAgU2Nyb2xsSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9cclxuICAgIH07XHJcbiAgICBTY3JvbGxIYW5kbGVyLnByb3RvdHlwZS5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBObyBPcFxyXG4gICAgfTtcclxuICAgIHJldHVybiBTY3JvbGxIYW5kbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlNjcm9sbEhhbmRsZXIgPSBTY3JvbGxIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvanMvZXZlbnRIYW5kbGVycy9Ub2dnbGVDb2x1bW5IYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbHVtblV0aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vdXRpbC9Db2x1bW5VdGlsICovIDMpO1xyXG52YXIgU2hvd0hpZGU7XHJcbihmdW5jdGlvbiAoU2hvd0hpZGUpIHtcclxuICAgIFNob3dIaWRlW1Nob3dIaWRlW1wiU2hvd1wiXSA9IDBdID0gXCJTaG93XCI7XHJcbiAgICBTaG93SGlkZVtTaG93SGlkZVtcIkhpZGVcIl0gPSAxXSA9IFwiSGlkZVwiO1xyXG4gICAgU2hvd0hpZGVbU2hvd0hpZGVbXCJTaG93QWxsXCJdID0gMl0gPSBcIlNob3dBbGxcIjtcclxuICAgIFNob3dIaWRlW1Nob3dIaWRlW1wiSGlkZUFsbFwiXSA9IDNdID0gXCJIaWRlQWxsXCI7XHJcbn0pKFNob3dIaWRlIHx8IChTaG93SGlkZSA9IHt9KSk7XHJcbnZhciBUb2dnbGVDb2x1bW5IYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVG9nZ2xlQ29sdW1uSGFuZGxlcihjb25maWdTdG9yZSwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zaG93QWxsQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuU2V0Q29sV2lkdGgoXCIudGFibGUtaGVhZGVyIC5oZWFkZXJDb2xHcm91cCBjb2xcIiwgU2hvd0hpZGUuU2hvd0FsbCk7XHJcbiAgICAgICAgICAgIF90aGlzLlNldENvbFdpZHRoKFwiLnRhYmxlLWJvZHkgLmJvZHlDb2xHcm91cCBjb2xcIiwgU2hvd0hpZGUuU2hvd0FsbCk7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLlNldEhpZGRlbk9uQ29uZmlnKGZhbHNlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2hvd0NvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5JZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5TZXRDb2xXaWR0aChcIi50YWJsZS1oZWFkZXIgLmhlYWRlckNvbEdyb3VwIGNvbFwiLCBTaG93SGlkZS5TaG93LCBjb2x1bW5JZCk7XHJcbiAgICAgICAgICAgIF90aGlzLlNldENvbFdpZHRoKFwiLnRhYmxlLWJvZHkgLmJvZHlDb2xHcm91cCBjb2xcIiwgU2hvd0hpZGUuU2hvdywgY29sdW1uSWQpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5TZXRIaWRkZW5PbkNvbmZpZyhmYWxzZSwgY29sdW1uSWQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oaWRlQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgIF90aGlzLlNldENvbFdpZHRoKFwiLnRhYmxlLWhlYWRlciAuaGVhZGVyQ29sR3JvdXAgY29sXCIsIFNob3dIaWRlLkhpZGUsIGNvbHVtbklkKTtcclxuICAgICAgICAgICAgX3RoaXMuU2V0Q29sV2lkdGgoXCIudGFibGUtYm9keSAuYm9keUNvbEdyb3VwIGNvbFwiLCBTaG93SGlkZS5IaWRlLCBjb2x1bW5JZCk7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLlNldEhpZGRlbk9uQ29uZmlnKHRydWUsIGNvbHVtbklkKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGlkZUFsbENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLlNldENvbFdpZHRoKFwiLnRhYmxlLWhlYWRlciAuaGVhZGVyQ29sR3JvdXAgY29sXCIsIFNob3dIaWRlLkhpZGVBbGwpO1xyXG4gICAgICAgICAgICBfdGhpcy5TZXRDb2xXaWR0aChcIi50YWJsZS1ib2R5IC5ib2R5Q29sR3JvdXAgY29sXCIsIFNob3dIaWRlLkhpZGVBbGwpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5TZXRIaWRkZW5PbkNvbmZpZyh0cnVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYXBwbHlDb2x1bW5Db25maWcgPSBmdW5jdGlvbiAoY29sdW1ucykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGVDb2x1bW4oY29sdW1uLmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dDb2x1bW4oY29sdW1uLmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5TZXRDb2xXaWR0aCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgY29udHJvbCwgY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5maW5kKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sRWxlbSA9IGpRdWVyeShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sID0gY3VycmVudENvbEVsZW0uYXR0cihcImRhdGEtaGVhZGVyLWlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb2wgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtTaG93SGlkZS5TaG93LCBTaG93SGlkZS5IaWRlXS5pbmRleE9mKGNvbnRyb2wpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb2wgPT09IGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbCA9PT0gU2hvd0hpZGUuU2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbCA9IENvbHVtblV0aWxfMS5Db21tb25VdGlsLkdldENvbHVtbk9iamVjdChjdXJyZW50Q29sLCBfdGhpcy5jb25maWdTdG9yZS5vcHRpb25zLmNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gY29sLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbEVsZW0ud2lkdGgod2lkdGggKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChbU2hvd0hpZGUuU2hvd0FsbCwgU2hvd0hpZGUuSGlkZUFsbF0uaW5kZXhPZihjb250cm9sKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sID09PSBTaG93SGlkZS5TaG93QWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSBDb2x1bW5VdGlsXzEuQ29tbW9uVXRpbC5HZXRDb2x1bW5PYmplY3QoY3VycmVudENvbCwgX3RoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gY29sLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xFbGVtLndpZHRoKHdpZHRoICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gVG9nZ2xlQ29sdW1uSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Ub2dnbGVDb2x1bW5IYW5kbGVyID0gVG9nZ2xlQ29sdW1uSGFuZGxlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9qcy9zZXJ2aWNlcy9HcmlkVGVtcGxhdGVTZXJ2aWNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBHcmlkRGV0YWlsc1Jvd1RlbXBsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vaGJzL2dyaWQtZGV0YWlscy1yb3cuaGJzICovIDYpO1xyXG52YXIgR3JpZEZvb3RlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2hicy9ncmlkLWZvb3Rlci5oYnMgKi8gNyk7XHJcbnZhciBHcmlkTWFpblJvd1RlbXBsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vaGJzL2dyaWQtbWFpbi1yb3cuaGJzICovIDkpO1xyXG52YXIgTWFuYWdlQ29sdW1uVGVtcGxhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9oYnMvZ3JpZC1tYW5hZ2UtY29sdW1ucy5oYnMgKi8gMjQpO1xyXG52YXIgR3JpZFRlbXBsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vaGJzL2dyaWQuaGJzICovIDI2KTtcclxudmFyIFBhZ2VyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9wYWdpbmF0aW9uL1BhZ2VyICovIDIpO1xyXG52YXIgR3JpZFRlbXBsYXRlU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEdyaWRUZW1wbGF0ZVNlcnZpY2UoY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuR2V0Rmlyc3RUZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBmaXJzdEluZGV4LCBsYXN0SW5kZXgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHZhciBtYWluUm93QXJyYXkgPSBfdGhpcy5HZXRSb3dzSHRtbChmaXJzdEluZGV4LCBsYXN0SW5kZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudGVtcGxhdGVGdW5jdGlvbkZvckdyaWQoe1xyXG4gICAgICAgICAgICAgICAgY29sdW1uczogX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zLFxyXG4gICAgICAgICAgICAgICAgbWFpblJvd0FycmF5OiBtYWluUm93QXJyYXksXHJcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uRGF0YTogUGFnZXJfMS5QYWdlci5QYWdpbmF0aW9uRGF0YSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKGZpcnN0SW5kZXgsIGxhc3RJbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgbWFpblJvd0FycmF5ID0gX3RoaXMuR2V0Um93c0h0bWwoZmlyc3RJbmRleCwgbGFzdEluZGV4KTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRlbXBsYXRlRnVuY3Rpb25Gb3JNYWluUm93KHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucyxcclxuICAgICAgICAgICAgICAgIG1haW5Sb3dBcnJheTogbWFpblJvd0FycmF5LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuR2V0TWFuYWdlQ29sdW1uc0h0bWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50ZW1wbGF0ZUZ1bmN0aW9uRm9yTWFuYWdlQ29sKHsgY29sdW1uczogX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5HZXRSb3dzSHRtbCA9IGZ1bmN0aW9uIChmaXJzdEluZGV4LCBsYXN0SW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIG1haW5Sb3dBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zLmxlbmd0aCArIDE7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBmaXJzdEluZGV4OyBpIDw9IGxhc3RJbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gX3RoaXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBtYWluUm93Q29sQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uVmFsdWUgPSByb3dbY29sLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLnJlbmRlckh5YnJpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZSA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuaHlicmlkRnVuY3Rpb24oY29sLCByb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtYWluUm93Q29sQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtblZhbHVlOiBjb2x1bW5WYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY29sLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogY29sLmhpZGRlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsVmFsdWU6IHJvd1tjb2wuaWRdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2wubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyYWJsZTogY29sLmZpbHRlcmFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtYWluUm93QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93RGF0YTogSlNPTi5zdHJpbmdpZnkocm93KSxcclxuICAgICAgICAgICAgICAgICAgICBrZXlDb2x1bW46IHJvd1tfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmtleUNvbHVtbl0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFpblJvd0NvbEFycmF5OiBtYWluUm93Q29sQXJyYXksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbHVtbnMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1haW5Sb3dBcnJheTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRnVuY3Rpb25Gb3JHcmlkID0gR3JpZFRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVGdW5jdGlvbkZvck1haW5Sb3cgPSBHcmlkTWFpblJvd1RlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVGdW5jdGlvbkZvckRldGFpbHNSb3cgPSBHcmlkRGV0YWlsc1Jvd1RlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVGdW5jdGlvbkZvckZvb3RlciA9IEdyaWRGb290ZXI7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUZ1bmN0aW9uRm9yTWFuYWdlQ29sID0gTWFuYWdlQ29sdW1uVGVtcGxhdGU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR3JpZFRlbXBsYXRlU2VydmljZS5wcm90b3R5cGUsIFwiRGF0YVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGE7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR3JpZFRlbXBsYXRlU2VydmljZS5wcm90b3R5cGUsIFwiRGF0YUxlbmd0aFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEdyaWRUZW1wbGF0ZVNlcnZpY2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuR3JpZFRlbXBsYXRlU2VydmljZSA9IEdyaWRUZW1wbGF0ZVNlcnZpY2U7XHJcblxuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL1NlbGVjdGVkLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc2VsZWN0ZWQgPSBmdW5jdGlvbiAoaW5wdXQsIHZhbHVlKSB7XHJcbiAgICByZXR1cm4gaW5wdXQgPT09IHZhbHVlID8gXCJzZWxlY3RlZFwiIDogXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gc2VsZWN0ZWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZ3JpZC1tYW5hZ2UtY29sdW1ucy5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPHRyIGRhdGEtaGVhZGVyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8dGQ+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGNsYXNzPVxcXCJjb2wtc2V0dGluZ3MtaGlkZGVuLWNoZWNrYm94IGd1aSBtLXItMTBcXFwiIHZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0NoZWNrZWQudHMgKi8gMjUpKS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmhpZGRlbiA6IGRlcHRoMCkse1wibmFtZVwiOlwiQ2hlY2tlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxcclxcbiAgICAgICAgICAgICAgICA8L3RyPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZ3VpIG9mLWhpZGRlbiBwLTEwIG1pbi13LTUwIHctYXV0byBmbHVpZC1oIGZsZXggY29sdW1uIGNvbnRhaW5lclxcXCIgPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb2wtc2V0dGluZ3MtaGVhZGVyXFxcIiBzdHlsZT1cXFwid2lkdGg6IDEwMCVcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIG1pbmkgZmx1aWQgaWNvbiBpbnB1dFxcXCI+XFxyXFxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJjb2wtc2V0dGluZ3MtZmlsdGVyXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIiBwbGFjZWhvbGRlcj1cXFwiU2VhcmNoIGZpbHRlci4uLlxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcInNlYXJjaCBpY29uXFxcIj48L2k+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBtLXQtMTBcXFwiPlxcclxcbiAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJndWkgbGVmdCBzaG93LWFsbC1jb2x1bW5cXFwiPlNob3cgQWxsPC9hPlxcclxcbiAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJndWkgcmlnaHQgaGlkZS1hbGwtY29sdW1uXFxcIj5IaWRlIEFsbDwvYT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGNsZWFyXFxcIj48L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImd1aSBjbGVhclxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbC1zZXR0aW5ncy10YWJsZSBndWkgZmx1aWQgaC05MCBvZi1hdXRvIHAtNSBtLXQtMTBcXFwiID5cXHJcXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cXFwiZ3VpIHNtYWxsIHZlcnkgYm9yZGVyLWxlc3MgYmFzaWMgY29tcGFjdCB0YWJsZVxcXCI+XFxyXFxuICAgICAgICAgICAgPHRib2R5PlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbHVtbnMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgPC90Ym9keT5cXHJcXG4gICAgICAgIDwvdGFibGU+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjaGVja2VkID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiAhYm9vbCA/IFwiY2hlY2tlZFwiIDogXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gY2hlY2tlZDtcclxuXG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9ncmlkLmhicyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGhhbmRsZWJhcnMgKi8gMCk7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQ29sdW1uLnRzICovIDI3KSkuY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLGRlcHRoMCx7XCJuYW1lXCI6XCJDb2x1bW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyXFxcIiBpZD1cXFwiaGVhZGVyLVwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgZGF0YS1oZWFkZXItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgc3ViIGhlYWRlclxcXCI+XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI8L3NwYW4+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc29ydGFibGUgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDQsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XFxuXCI7XG59LFwiNFwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9PcmRlcmVkLnRzICovIDI4KSkuY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5vcmRlciA6IGRlcHRoMCkse1wibmFtZVwiOlwiT3JkZXJlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIjxzdHlsZT5cXG4gICAgLmlubmVyLWNvbnRhaW5lciB7XFxuICAgICAgICBoZWlnaHQ6IDEwMCU7XFxuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICAgICAgd2lkdGg6IDEwMCU7XFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gICAgfVxcblxcbiAgICAudGFibGUtaGVhZGVyIHtcXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICAgIHRvcDowICFpbXBvcnRhbnQ7XFxuICAgIH1cXG5cXG4gICAgLnRhYmxlLWJvZHkge1xcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XFxuICAgICAgICBmbGV4OiA1O1xcbiAgICB9XFxuICAgIC50YWJsZS1mb290ZXJ7XFxuICAgICAgICBoZWlnaHQ6IDM1cHg7XFxuICAgICAgICBwYWRkaW5nOiA1cHg7XFxuICAgIH1cXG4gICAgLnRhYmxlLWZvb3RlciAuZm9vdGVyLW1pZGRsZXtcXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIH1cXG4gICAgLnRhYmxlLWZvb3RlciAuZm9vdGVyLXJpZ2h0e1xcbiAgICAgICAgZGlzcGxheTogZmxleDtcXG4gICAgfVxcbiAgICAubWFyZ2luLWF1dG97XFxuICAgICAgICBtYXJnaW46IGF1dG8gIWltcG9ydGFudDtcXG4gICAgfVxcbiAgICAucmVtb3ZlLWxhYmVsOmhvdmVye1xcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XFxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIH1cXG4gICAgLmJvcmRlci1sZXNzIHRyIHRkLC5ib3JkZXItbGVzcyB7IGJvcmRlcjogMHB4ICFpbXBvcnRhbnQ7IH1cXG4gICAgLmN1cnNvci1wb2ludGVye1xcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICB9XFxuICAgIC51aS5zdXBlcmNvbXBhY3QuaWNvbi5idXR0b24sIC51aS5zdXBlcmNvbXBhY3QuaWNvbi5idXR0b25zIC5idXR0b24ge1xcbiAgICAgICAgcGFkZGluZzogLjNlbSAuM2VtIC4zZW0gLjNlbSAhaW1wb3J0YW50O1xcbiAgICB9XFxuPC9zdHlsZT5cXG48ZGl2IGNsYXNzPVxcXCJpbm5lci1jb250YWluZXIgZ3VpIGZsdWlkIGNvbnRhaW5lclxcXCIgc3R5bGU9XFxcInBhZGRpbmc6MCU7XFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidGFibGUtaGVhZGVyXFxcIj5cXG4gICAgICAgIDx0YWJsZSBpZD1cXFwiaGVhZGVydGFibGVcXFwiIGNsYXNzPVxcXCJndWkgYmFzaWMgbGFyZ2UgY29tcGFjdCBzb3J0YWJsZSBmaXhlZCBzaW5nbGUgbGluZSB0YWJsZVxcXCI+XFxuICAgICAgICAgICAgPGNvbGdyb3VwIGNsYXNzPVxcXCJoZWFkZXJDb2xHcm91cFxcXCI+XFxuICAgICAgICAgICAgICAgIDxjb2wgc3R5bGU9XFxcIndpZHRoOjQwcHg7XFxcIiAvPlxcbiAgICAgICAgICAgICAgICA8Y29sIHN0eWxlPVxcXCJ3aWR0aDo0MHB4O1xcXCIgLz5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbHVtbnMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgPC9jb2xncm91cD5cXG4gICAgICAgICAgICA8dGhlYWQ+XFxuICAgICAgICAgICAgICAgIDx0cj5cXG4gICAgICAgICAgICAgICAgICAgIDx0aD48L3RoPlxcbiAgICAgICAgICAgICAgICAgICAgPHRoPjxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgY2xhc3M9XFxcInNlbGVjdC1hbGwtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXJcXFwiPjwvdGg+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2x1bW5zIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICA8L3RyPlxcbiAgICAgICAgICAgIDwvdGhlYWQ+XFxuICAgICAgICA8L3RhYmxlPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidGFibGUtYm9keVxcXCI+XFxuICAgICAgICA8dGFibGUgY2xhc3M9XFxcImd1aSBiYXNpYyBsYXJnZSBjb21wYWN0IGZpeGVkIHNlbGVjdGFibGUgc2luZ2xlIGxpbmUgdGFibGUgbWFpblRhYmxlXFxcIj5cXG4gICAgICAgICAgICA8Y29sZ3JvdXAgY2xhc3M9XFxcImJvZHlDb2xHcm91cFxcXCI+XFxuICAgICAgICAgICAgICAgIDxjb2wgc3R5bGU9XFxcIndpZHRoOjQwcHg7XFxcIiAvPiBcXG4gICAgICAgICAgICAgICAgPGNvbCBzdHlsZT1cXFwid2lkdGg6NDBweDtcXFwiIC8+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2x1bW5zIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgIDwvY29sZ3JvdXA+XFxuICAgICAgICAgICAgPHRib2R5IGNsYXNzPVxcXCJtYWluVGFibGVCb2R5XFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZ3JpZC1tYWluLXJvdy5oYnMgKi8gOSksZGVwdGgwLHtcIm5hbWVcIjpcImdyaWQtbWFpbi1yb3dcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgICAgICAgICAgXCIsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgIDwvdGJvZHk+XFxuICAgICAgICA8L3RhYmxlPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidGFibGUtZm9vdGVyIGd1aSBoLWF1dG8gZmx1aWQtdyBiYXNpYyBjdXJ2ZWQgcm93IHAtNSBtLTBcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9ncmlkLWZvb3Rlci5oYnMgKi8gNyksZGVwdGgwLHtcIm5hbWVcIjpcImdyaWQtZm9vdGVyXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvZGl2PlxcbjwvZGl2PlwiO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQ29sdW1uLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbHVtbiA9IGZ1bmN0aW9uIChjb2wpIHtcclxuICAgIHZhciBjYWxjV2lkdGggPSBjb2wuaGlkZGVuID8gMCA6IGNvbC53aWR0aDtcclxuICAgIHZhciBkYXRhQXR0cklkID0gJ2RhdGEtaGVhZGVyLWlkPVwiJyArIGNvbC5pZCArICdcIic7XHJcbiAgICByZXR1cm4gJzxjb2wgc3R5bGU9XCJ3aWR0aCA6ICcgKyBjYWxjV2lkdGggKyAncHg7XCInICsgZGF0YUF0dHJJZCArIFwiIC8+XCI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENvbHVtbjtcclxuXG5cbi8qKiovIH0pLFxuLyogMjggKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9PcmRlcmVkLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBHcmlkT3JkZXJEaXJlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2pzL21vZGVscy9HcmlkT3JkZXJEaXJlY3Rpb24gKi8gNSk7XHJcbnZhciBvcmRlcmVkID0gZnVuY3Rpb24gKG9yZGVyKSB7XHJcbiAgICBpZiAob3JkZXIgPT09IEdyaWRPcmRlckRpcmVjdGlvbl8xLkdyaWRPcmRlckRpcmVjdGlvbi5Bc2MpIHtcclxuICAgICAgICByZXR1cm4gXCI8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGd1aS1pY29uLWFycm93LXVwXFxcIiA+PC9pPiBcIjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG9yZGVyID09PSBHcmlkT3JkZXJEaXJlY3Rpb25fMS5HcmlkT3JkZXJEaXJlY3Rpb24uRGVzYykge1xyXG4gICAgICAgIHJldHVybiBcIjxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tYXJyb3ctZG93blxcXCIgPjwvaT4gXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCI8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGd1aS1pY29uLWFycm93LXVwIGd1aS1oaWRkZW5cXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiA+PC9pPiBcIiArXHJcbiAgICAgICAgICAgIFwiPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBndWktaWNvbi1hcnJvdy1kb3duIGd1aS1oaWRkZW5cXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiA+PC9pPlwiO1xyXG4gICAgfVxyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBvcmRlcmVkO1xyXG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGdyaWRvby5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgZmNhOWZlYzUzN2FiYzMwMmIwN2QiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifVxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImNvbnN0IGRpc2FibGVkID0gKGJvb2w6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIGJvb2wgPyBcImRpc2FibGVkXCIgOiBcIlwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGlzYWJsZWQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMiLCJpbXBvcnQgeyBJUGFnaW5hdGlvbiB9IGZyb20gXCIuLi9tb2RlbHMvSVBhZ2luYXRpb25cIjtcclxuaW1wb3J0IHsgSVBhZ2luYXRpb25JbnB1dCB9IGZyb20gXCIuLi9tb2RlbHMvSVBhZ2luYXRpb25JbnB1dFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhZ2VyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHBhZ2luYXRpb25EYXRhOiBJUGFnaW5hdGlvbjtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENhbGN1bGF0ZVBhZ2luYXRpb25EYXRhID0gKHBhZ2luYXRpb25JbnB1dDogSVBhZ2luYXRpb25JbnB1dCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYWdpbmF0aW9uRGF0YTogYW55ID0ge307XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleCA9IHBhZ2luYXRpb25JbnB1dC5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb25EYXRhLnBhZ2VTaXplID0gcGFnaW5hdGlvbklucHV0LnBhZ2VTaXplO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZXMgPSBwYWdpbmF0aW9uSW5wdXQucGFnZVNpemVzO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uRGF0YS50b3RhbENvdW50ID0gcGFnaW5hdGlvbklucHV0LnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb25EYXRhLm5vT2ZQYWdlcyA9IE1hdGguY2VpbChwYWdpbmF0aW9uSW5wdXQudG90YWxDb3VudCAvIHBhZ2luYXRpb25JbnB1dC5wYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbk51bSA9ICgocGFnaW5hdGlvbklucHV0LnBhZ2VJbmRleCAtIDEpICogcGFnaW5hdGlvbklucHV0LnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ZXJMaW1pdE9mZnNldCA9IHBhZ2luYXRpb25JbnB1dC5wYWdlU2l6ZSA+IHBhZ2luYXRpb25JbnB1dC50b3RhbENvdW50ID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25JbnB1dC50b3RhbENvdW50IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25JbnB1dC5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgcGFnaW5hdGlvbkRhdGEucmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gOiBtaW5OdW0gKyAxLFxyXG4gICAgICAgICAgICAgICAgbWF4IDogbWluTnVtICsgbG93ZXJMaW1pdE9mZnNldCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcGFnaW5hdGlvbkRhdGEuZmlyc3RQYWdlTGlua0Rpc2FibGVkID0gcGFnaW5hdGlvbkRhdGEubm9PZlBhZ2VzID09PSAxIHx8IHBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleCA9PT0gMTtcclxuICAgICAgICAgICAgcGFnaW5hdGlvbkRhdGEubGFzdFBhZ2VMaW5rRGlzYWJsZWQgID0gcGFnaW5hdGlvbkRhdGEubm9PZlBhZ2VzID09PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAocGFnaW5hdGlvbkRhdGEucGFnZUluZGV4ID09PSBwYWdpbmF0aW9uRGF0YS5ub09mUGFnZXMpO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uRGF0YS5wcmV2UGFnZUxpbmtEaXNhYmxlZCAgPSBwYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXggPT09IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IChwYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXggLSAxKSA8PSAwO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uRGF0YS5uZXh0UGFnZUxpbmtEaXNhYmxlZCAgPSBwYWdpbmF0aW9uRGF0YS5ub09mUGFnZXMgPT09IHBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHBhZ2luYXRpb25EYXRhLnBhZ2VJbmRleCArIDEpID49IHBhZ2luYXRpb25EYXRhLm5vT2ZQYWdlcztcclxuICAgICAgICAgICAgUGFnZXIucGFnaW5hdGlvbkRhdGEgPSBwYWdpbmF0aW9uRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBQYWdpbmF0aW9uRGF0YSgpOiBJUGFnaW5hdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIFBhZ2VyLnBhZ2luYXRpb25EYXRhO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvanMvcGFnaW5hdGlvbi9QYWdlci50cyIsImltcG9ydCB7IEdyaWRPcmRlckRpcmVjdGlvbiB9IGZyb20gXCIuLi9tb2RlbHMvR3JpZE9yZGVyRGlyZWN0aW9uXCI7XHJcbmltcG9ydCB7IElDb2x1bW4gfSBmcm9tIFwiLi8uLi9tb2RlbHMvSUNvbHVtblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1vblV0aWwge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgR2V0Q29sdW1uT2JqZWN0ID0gKGNvbHVtbklkOiBzdHJpbmcsIGNvbHVtbnM6IElDb2x1bW5bXSk6IElDb2x1bW4gPT4ge1xyXG4gICAgICAgIGlmIChjb2x1bW5JZCA9PSBudWxsIHx8IGNvbHVtbnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJldENvbDogSUNvbHVtbjtcclxuICAgICAgICBjb2x1bW5zLmZvckVhY2goKGNvbDogSUNvbHVtbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29sLmlkID09PSBjb2x1bW5JZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0Q29sID0gY29sO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJldENvbDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgU2V0T3JkZXIgPSAoY29sdW1uSWQ6IHN0cmluZywgb3JkZXI6IEdyaWRPcmRlckRpcmVjdGlvbiwgY29sdW1uczogSUNvbHVtbltdKTogSUNvbHVtbiA9PiB7XHJcbiAgICAgICAgaWYgKGNvbHVtbklkID09IG51bGwgfHwgY29sdW1ucyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmV0Q29sOiBJQ29sdW1uO1xyXG4gICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sOiBJQ29sdW1uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb2wuaWQgPT09IGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICBjb2wub3JkZXIgPSBvcmRlcjtcclxuICAgICAgICAgICAgICAgIHJldENvbCA9IGNvbDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXRDb2w7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy91dGlsL0NvbHVtblV0aWwudHMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwialF1ZXJ5XCJcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJleHBvcnQgZW51bSBHcmlkT3JkZXJEaXJlY3Rpb24ge1xyXG4gICAgTm9uZSA9IFwiTm9uZVwiLFxyXG4gICAgQXNjID0gXCJBc2NcIixcclxuICAgIERlc2MgPSBcIkRlc2NcIixcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2pzL21vZGVscy9HcmlkT3JkZXJEaXJlY3Rpb24udHMiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBoZWxwZXIsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCBhbGlhczI9aGVscGVycy5oZWxwZXJNaXNzaW5nLCBhbGlhczM9XCJmdW5jdGlvblwiLCBhbGlhczQ9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgIDx0cj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cXFwiZ3VpIHJ2LXBhcmVudFxcXCIgdmFsaWduPVxcXCJ0b3BcXFwiIGRhdGEtZmlsdGVyLXR5cGU9XFxcIlwiXG4gICAgKyBhbGlhczQoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy50eXBlIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC50eXBlIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJ0eXBlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIlxcXCIgZGF0YS1maWx0ZXIta2V5PVxcXCJcIlxuICAgICsgYWxpYXM0KCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMuaWQgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJpZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiIGRhdGEtZmlsdGVyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXM0KCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMuYWN0dWFsVmFsdWUgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmFjdHVhbFZhbHVlIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJhY3R1YWxWYWx1ZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlwiXG4gICAgKyBhbGlhczQoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5jb2x1bW5OYW1lIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2x1bW5OYW1lIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJjb2x1bW5OYW1lXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvc3Bhbj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZpbHRlcmFibGUgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICAgICAgPC90ZD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cIlxuICAgICsgKChzdGFjazEgPSAoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLmNvbHVtblZhbHVlIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2x1bW5WYWx1ZSA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiY29sdW1uVmFsdWVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvdGQ+XFxyXFxuICAgICAgICAgICAgICAgIDwvdHI+XFxyXFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLWwtNSBydi1jaGlsZCBndWktY2FwdGlvblxcXCIgPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGd1aS1pY29uLWFkZCBob3ZlciBtLWwtNSBjdXJzb3ItcG9pbnRlciBhZGRGaWx0ZXJcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBndWktaWNvbi1taW51cyBob3ZlciBtLWwtNSBjdXJzb3ItcG9pbnRlciByZW1vdmVGaWx0ZXJcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgaGVscGVyLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCI8dHIgY2xhc3M9XFxcImd1aSBndWktaGlkZGVuIGRldGFpbHNSb3dcXFwiPlxcclxcbiAgICA8dGQgY29sc3Bhbj1cXFwiXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMubGVuZ3RoIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sZW5ndGggOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogaGVscGVycy5oZWxwZXJNaXNzaW5nKSwodHlwZW9mIGhlbHBlciA9PT0gXCJmdW5jdGlvblwiID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcImxlbmd0aFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgPHRhYmxlIGNsYXNzPVxcXCJndWkgdmVyeSBjb21wYWN0IHNlbGVjdGFibGUgY2VsbGVkIHRhYmxlIGRldGFpbHNUYWJsZSBtLWwtMzcgcC01XFxcIiBzdHlsZT1cXFwid2lkdGg6IGF1dG87XFxcIiA+XFxyXFxuICAgICAgICAgICAgPHRib2R5PlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubWFpblJvd0NvbEFycmF5IDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgIDwvdGJvZHk+XFxyXFxuICAgICAgICA8L3RhYmxlPlxcclxcbiAgICA8L3RkPlxcclxcbjwvdHI+XCI7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZ3JpZC1kZXRhaWxzLXJvdy5oYnNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgPG9wdGlvbiBcIlxuICAgICsgYWxpYXMxKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxHcmlkb29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFNlbGVjdGVkLnRzXCIpKS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0ucGFnaW5hdGlvbkRhdGEgOiBkZXB0aHNbMV0pKSAhPSBudWxsID8gc3RhY2sxLnBhZ2VTaXplIDogc3RhY2sxKSxkZXB0aDAse1wibmFtZVwiOlwiU2VsZWN0ZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIj5cIlxuICAgICsgYWxpYXMxKGNvbnRhaW5lci5sYW1iZGEoZGVwdGgwLCBkZXB0aDApKVxuICAgICsgXCI8L29wdGlvbj5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWNvbnRhaW5lci5sYW1iZGE7XG5cbiAgcmV0dXJuIFwiPGRpdiBkYXRhLXJvbGU9XFxcInBhZ2VyXFxcIiBjbGFzcz1cXFwiZ3VpIGxlZnQgZ3VpLXN1YmhlYWRpbmctMiBjb2wtbWQtNiB0ZXh0LWxlZnQgbS0wXFxcIj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtaW5pIGNvbXBhY3QgXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtaW5pIGNvbXBhY3QgZmlyc3RMaW5rXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcR3JpZG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxEaXNhYmxlZC50c1wiKSkuY2FsbChhbGlhczEsKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLmZpcnN0UGFnZUxpbmtEaXNhYmxlZCA6IHN0YWNrMSkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkdvIHRvIHRoZSBmaXJzdCBwYWdlXFxcIiB0aXRsZT1cXFwiR28gdG8gdGhlIGZpcnN0IHBhZ2VcXFwiIGRhdGEtcGFnZT1cXFwiMVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tcHJldmlvdXNcXFwiPjwvaT5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIG1pbmkgY29tcGFjdCBwcmV2TGlua1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEdyaWRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcRGlzYWJsZWQudHNcIikpLmNhbGwoYWxpYXMxLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5wcmV2UGFnZUxpbmtEaXNhYmxlZCA6IHN0YWNrMSkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkdvIHRvIHRoZSBwcmV2aW91cyBwYWdlXFxcIiB0aXRsZT1cXFwiR28gdG8gdGhlIHByZXZpb3VzIHBhZ2VcXFwiIGRhdGEtcGFnZT1cXFwiXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcR3JpZG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxtYXRoLnRzXCIpKS5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEucGFnZUluZGV4IDogc3RhY2sxKSxcIi1cIiwxLHtcIm5hbWVcIjpcIm1hdGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICB0YWJpbmRleD1cXFwiLTFcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jaGV2cm9uLWxlZnRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICBQcmV2XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgPC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIHBhZ2VyLWlucHV0LWNvbnRhaW5lciBpbnB1dFxcXCI+XFxyXFxuICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tci01XFxcIj4gUGFnZSA8L3NwYW4+XFxyXFxuICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBwYWdlci1pbnB1dCB3LTI1IHAtMCBtLXItNVxcXCIgYXJpYS1sYWJlbD1cXFwiMVxcXCIgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5wYWdlSW5kZXggOiBzdGFjazEpLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIHR5cGU9XFxcInRleHRcXFwiIHBsYWNlaG9sZGVyPVxcXCJQYWdlIE51bWJlciAuLi5cXFwiPlxcclxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm5vLW9mLXBhZ2VzLXNjYW5cXFwiIGRhdGEtbnVtYmVyLW9mLXBhZ2VzPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubm9PZlBhZ2VzIDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj4gb2YgXCJcbiAgICArIGFsaWFzMihhbGlhczMoKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLm5vT2ZQYWdlcyA6IHN0YWNrMSksIGRlcHRoMCkpXG4gICAgKyBcIjwvc3Bhbj5cXHJcXG4gICAgPC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG1pbmkgY29tcGFjdCBcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIG1pbmkgY29tcGFjdCBuZXh0TGlua1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEdyaWRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcRGlzYWJsZWQudHNcIikpLmNhbGwoYWxpYXMxLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5uZXh0UGFnZUxpbmtEaXNhYmxlZCA6IHN0YWNrMSkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkdvIHRvIHRoZSBuZXh0IHBhZ2VcXFwiIHRpdGxlPVxcXCJHbyB0byB0aGUgbmV4dCBwYWdlXFxcIiBkYXRhLXBhZ2U9XFxcIlwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEdyaWRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcbWF0aC50c1wiKSkuY2FsbChhbGlhczEsKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLnBhZ2VJbmRleCA6IHN0YWNrMSksXCIrXCIsMSx7XCJuYW1lXCI6XCJtYXRoXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+XFxyXFxuICAgICAgICAgICAgTmV4dFxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jaGV2cm9uLXJpZ2h0XFxcIj48L2k+XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtaW5pIGNvbXBhY3QgbGFzdExpbmtcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxHcmlkb29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXERpc2FibGVkLnRzXCIpKS5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGFzdFBhZ2VMaW5rRGlzYWJsZWQgOiBzdGFjazEpLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJHbyB0byB0aGUgbGFzdCBwYWdlXFxcIiB0aXRsZT1cXFwiR28gdG8gdGhlIGxhc3QgcGFnZVxcXCIgZGF0YS1wYWdlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubm9PRnBhZ2VzIDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1uZXh0XFxcIj48L2k+XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgPC9zcGFuPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbC1tZC02IGd1aSBndWktc3ViaGVhZGluZy0yIHJpZ2h0IHRleHQtcmlnaHQgbS0wXFxcIj5cXHJcXG4gICAgPHNwYW4+Um93cyBQZXIgUGFnZTwvc3Bhbj5cXHJcXG4gICAgPHNlbGVjdCBjbGFzcz1cXFwiZ3VpIHBhZ2VTaXplU2VsZWN0b3JcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5wYWdpbmF0aW9uRGF0YSA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEucGFnZVNpemVzIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3NlbGVjdD5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLWwtMTBcXFwiPlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKCgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucGFnaW5hdGlvbkRhdGEgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLnJhbmdlIDogc3RhY2sxKSkgIT0gbnVsbCA/IHN0YWNrMS5taW4gOiBzdGFjazEpLCBkZXB0aDApKVxuICAgICsgXCIgLSBcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoKHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5yYW5nZSA6IHN0YWNrMSkpICE9IG51bGwgPyBzdGFjazEubWF4IDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiIG9mIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnBhZ2luYXRpb25EYXRhIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS50b3RhbENvdW50IDogc3RhY2sxKSwgZGVwdGgwKSlcbiAgICArIFwiIGl0ZW1zPC9zcGFuPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImd1aSBjbGVhclxcXCI+PC9kaXY+XCI7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2dyaWQtZm9vdGVyLmhic1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImNvbnN0IG1hdGggPSAobHZhbHVlOiBudW1iZXIsIG9wZXJhdG9yOiBzdHJpbmcsIHJ2YWx1ZTogbnVtYmVyLCBvcHRpb25zKTogbnVtYmVyID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgXCIrXCI6IGx2YWx1ZSArIHJ2YWx1ZSxcclxuICAgICAgICBcIi1cIjogbHZhbHVlIC0gcnZhbHVlLFxyXG4gICAgICAgIFwiKlwiOiBsdmFsdWUgKiBydmFsdWUsXHJcbiAgICAgICAgXCIvXCI6IGx2YWx1ZSAvIHJ2YWx1ZSxcclxuICAgICAgICBcIiVcIjogbHZhbHVlICUgcnZhbHVlLFxyXG4gICAgfVtvcGVyYXRvcl07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtYXRoO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL21hdGgudHMiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjx0ciBjbGFzcz1cXFwibWFpblJvd1xcXCIgZGF0YS1way1hdHRyPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAua2V5Q29sdW1uIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiA+XFxyXFxuICAgIDx0ZCBjbGFzcz1cXFwiZXhwYW5zaW9uQXJyb3dzXFxcIiBzdHlsZT1cXFwiZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7XFxcIj5cXHJcXG4gICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tY2hldnJvbi1kb3duIGV4cGFuZERldGFpbHNSb3dJY29uIGN1cnNvci1wb2ludGVyXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9pPlxcclxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBndWktaWNvbi1jaGV2cm9uLXVwIENvbGxhcHNlRGV0YWlsc1Jvd0ljb24gY3Vyc29yLXBvaW50ZXIgZ3VpLWhpZGRlblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvaT5cXHJcXG4gICAgPC90ZD5cXHJcXG4gICAgPHRkPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBkYXRhLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAucm93RGF0YSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5rZXlDb2x1bW4gOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIGNsYXNzPVxcXCJzZWxlY3Qta2V5LWNoZWNrYm94IGN1cnNvci1wb2ludGVyXFxcIj5cXHJcXG4gICAgPC90ZD5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5tYWluUm93Q29sQXJyYXkgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC90cj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxHcmlkb29cXFxcc3JjXFxcXGhic1xcXFxncmlkLWRldGFpbHMtcm93Lmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZ3JpZC1kZXRhaWxzLXJvd1wiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiBcIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgPHRkIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuYWN0dWFsVmFsdWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIGNsYXNzPVxcXCJib2R5LVwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2x1bW5WYWx1ZSA6IGRlcHRoMCksIGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L3RkPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubWFpblJvd0FycmF5IDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZ3JpZC1tYWluLXJvdy5oYnNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgKiBhcyBqUXVlcnkgZnJvbSBcImpxdWVyeVwiO1xuaW1wb3J0IHsgQ29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XG5pbXBvcnQgeyBDb2xTZXR0aW5nc0hhbmRsZXIgfSBmcm9tIFwiLi4vZXZlbnRIYW5kbGVycy9Db2xTZXR0aW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7IFNlbGVjdEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9ldmVudEhhbmRsZXJzL1NlbGVjdEV2ZW50SGFuZGxlclwiO1xuaW1wb3J0IHsgSUdyaWRPcmRlciB9IGZyb20gXCIuLi9tb2RlbHMvSUdyaWRPcmRlclwiO1xuaW1wb3J0IHsgSVBhZ2luYXRpb24gfSBmcm9tIFwiLi4vbW9kZWxzL0lQYWdpbmF0aW9uXCI7XG5pbXBvcnQgeyBJUGFnaW5hdGlvbklucHV0IH0gZnJvbSBcIi4uL21vZGVscy9JUGFnaW5hdGlvbklucHV0XCI7XG5pbXBvcnQgeyBQYWdlciB9IGZyb20gXCIuLi9wYWdpbmF0aW9uL1BhZ2VyXCI7XG5pbXBvcnQgeyBEZXRhaWxzUm93SGFuZGxlciB9IGZyb20gXCIuLy4uL2V2ZW50SGFuZGxlcnMvRGV0YWlsc1Jvd0hhbmRsZXJcIjtcbmltcG9ydCB7IEZpbHRlckNsaWNrSGFuZGxlciB9IGZyb20gXCIuLy4uL2V2ZW50SGFuZGxlcnMvRmlsdGVyQ2xpY2tIYW5kbGVyXCI7XG5pbXBvcnQgeyBIYW5kbGVyTmFtZXMgfSBmcm9tIFwiLi8uLi9ldmVudEhhbmRsZXJzL0hhbmRsZXJOYW1lc1wiO1xuaW1wb3J0IHsgSGVhZGVyQ2xpY2tIYW5kbGVyIH0gZnJvbSBcIi4vLi4vZXZlbnRIYW5kbGVycy9IZWFkZXJDbGlja0hhbmRsZXJcIjtcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi8uLi9ldmVudEhhbmRsZXJzL0lFdmVudEhhbmRsZXJcIjtcbmltcG9ydCB7IElIYW5kbGVyQ2hhaW4gfSBmcm9tIFwiLi8uLi9ldmVudEhhbmRsZXJzL0lIYW5kbGVyQ2hhaW5cIjtcbmltcG9ydCB7IFBhZ2VTZWFyY2hIYW5kbGVyIH0gZnJvbSBcIi4vLi4vZXZlbnRIYW5kbGVycy9QYWdlU2VhcmNoQ2xpY2tIYW5kbGVyXCI7XG5pbXBvcnQgeyBTY3JvbGxIYW5kbGVyIH0gZnJvbSBcIi4vLi4vZXZlbnRIYW5kbGVycy9TY3JvbGxIYW5kbGVyXCI7XG5pbXBvcnQgeyBUb2dnbGVDb2x1bW5IYW5kbGVyIH0gZnJvbSBcIi4vLi4vZXZlbnRIYW5kbGVycy9Ub2dnbGVDb2x1bW5IYW5kbGVyXCI7XG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25UeXBlIH0gZnJvbSBcIi4vLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcbmltcG9ydCB7IEdyaWRPcmRlckRpcmVjdGlvbiB9IGZyb20gXCIuLy4uL21vZGVscy9HcmlkT3JkZXJEaXJlY3Rpb25cIjtcbmltcG9ydCB7IElDb2x1bW4gfSBmcm9tIFwiLi8uLi9tb2RlbHMvSUNvbHVtblwiO1xuaW1wb3J0IHsgR3JpZFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLy4uL3NlcnZpY2VzL0dyaWRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IENvbW1vblV0aWwgfSBmcm9tIFwiLi8uLi91dGlsL0NvbHVtblV0aWxcIjtcbmltcG9ydCB7IElHcmlkT3B0aW9ucyB9IGZyb20gXCIuL0lHcmlkT3B0aW9uc1wiO1xuXG5leHBvcnQgY2xhc3MgR3JpZDxUPiB7XG5cbiAgICBwcml2YXRlIGhhbmRsZUNoYWluOiBBcnJheTxJSGFuZGxlckNoYWluPFQ+PjtcbiAgICBwcml2YXRlIGdyaWRUZW1wbGF0ZVNlcnZpY2U6IEdyaWRUZW1wbGF0ZVNlcnZpY2U8VD47XG4gICAgcHJpdmF0ZSBjb25maWdTdG9yZTogQ29uZmlnU3RvcmU8VD47XG4gICAgcHJpdmF0ZSB0b2dnbGVIYW5kbGVyOiBUb2dnbGVDb2x1bW5IYW5kbGVyPFQ+O1xuICAgIHByaXZhdGUgc2Nyb2xsSGFuZGxlcjogU2Nyb2xsSGFuZGxlcjxUPjtcbiAgICBwcml2YXRlIG1hbmFnZUNvbEhhbmRsZXI6IENvbFNldHRpbmdzSGFuZGxlcjxUPjtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElHcmlkT3B0aW9uczxUPikge1xuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gbmV3IENvbmZpZ1N0b3JlPFQ+KG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UgPSBuZXcgR3JpZFRlbXBsYXRlU2VydmljZSh0aGlzLmNvbmZpZ1N0b3JlKTtcbiAgICAgICAgdGhpcy5Jbml0SGFuZGxlcnMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYmluZERhdGEgPSAoZGF0YTogVFtdLCBwYWdpbmF0aW9uSW5wdXQ/OiBJUGFnaW5hdGlvbklucHV0KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGZpcnN0SW5kZXggPSAwO1xuICAgICAgICBsZXQgbGFzdEluZGV4ID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNodW5rU2l6ZSArIHRoaXMuZ2V0SW5pdGlhbFJvd0NvdW50KCk7XG4gICAgICAgIGxhc3RJbmRleCA9IGxhc3RJbmRleCA+PSBkYXRhLmxlbmd0aCA/IGRhdGEubGVuZ3RoIC0gMSA6IGxhc3RJbmRleDtcbiAgICAgICAgUGFnZXIuQ2FsY3VsYXRlUGFnaW5hdGlvbkRhdGEocGFnaW5hdGlvbklucHV0KTtcbiAgICAgICAgY29uc3QgZ3JpZENvbnRlbnQ6IHN0cmluZyA9IHRoaXMuZ3JpZFRlbXBsYXRlU2VydmljZS5HZXRGaXJzdFRlbXBsYXRlKGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gZ3JpZENvbnRlbnQ7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubWFuYWdlQ29sU2V0dGluZ3NDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kTWFuYWdlQ29sdW1zKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5tYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGF2ZSB0byBiaW5kIFNjcm9sbCBIYW5kbGVyIEFmdGVyIERPTSBoYXMgYmVlbiBjcmVhdGVkXG4gICAgICAgIGlmICggdGhpcy5zY3JvbGxIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgdGhpcy5zY3JvbGxIYW5kbGVyICE9PSBudWxsICkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyLnJlbW92ZUhhbmRsZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlci5yZXNldFBhcmVudE9mZnNldCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gbmV3IFNjcm9sbEhhbmRsZXI8VD4odGhpcy5jb25maWdTdG9yZSwgdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLCBsYXN0SW5kZXggKyAxKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlci53YXRjaFdpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyLlJlZ2lzdGVyRG9tSGFuZGxlcigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBiaW5kTWFuYWdlQ29sdW1zID0gKG1hbmFnZUNvbENvbnRhaW5lcj86IEhUTUxFbGVtZW50LCBmb3JjZT86IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKHRoaXMubWFuYWdlQ29sSGFuZGxlciAhPT0gdW5kZWZpbmVkICYmICFmb3JjZSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBodG1sID0gdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLkdldE1hbmFnZUNvbHVtbnNIdG1sKCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBqUXVlcnkobWFuYWdlQ29sQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubWFuYWdlQ29sU2V0dGluZ3NDb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVIYW5kbGVyID0gbmV3IFRvZ2dsZUNvbHVtbkhhbmRsZXIodGhpcy5jb25maWdTdG9yZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KSk7XG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5tYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lciA9IGVsZW1lbnRbMF07XG4gICAgICAgIHRoaXMubWFuYWdlQ29sSGFuZGxlciA9IG5ldyBDb2xTZXR0aW5nc0hhbmRsZXI8VD4oalF1ZXJ5KGVsZW1lbnQpLCB0aGlzLmNvbmZpZ1N0b3JlLCB0aGlzLnRvZ2dsZUhhbmRsZXIpO1xuICAgICAgICBlbGVtZW50LmZpbmQoXCIuY29sLXNldHRpbmdzLWNvbnRhaW5lclwiKS5odG1sKGh0bWwpO1xuICAgICAgICB0aGlzLm1hbmFnZUNvbEhhbmRsZXIuUmVnaXN0ZXJEb21IYW5kbGVyKCk7XG4gICAgICAgIGpRdWVyeSh3aW5kb3cpLnJlc2l6ZSh0aGlzLmRvY3VtZW50UmVzaXplSGFuZGxlckZvckNzKTtcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5jbGljayh0aGlzLmRvY3VtZW50Q2xpY2tIYW5kbGVyRm9yQ3MpO1xuICAgIH1cbiAgICBwdWJsaWMgYXBwbHlDb2x1bW5Db25maWcgPSAoY29sdW1uczogSUNvbHVtbltdKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlSGFuZGxlci5hcHBseUNvbHVtbkNvbmZpZyhjb2x1bW5zKTtcbiAgICAgICAgY29uc3QgaHRtbCA9IHRoaXMuZ3JpZFRlbXBsYXRlU2VydmljZS5HZXRNYW5hZ2VDb2x1bW5zSHRtbCgpO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5tYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgICAgICBlbGVtZW50LmZpbmQoXCIuY29sLXNldHRpbmdzLWNvbnRhaW5lclwiKS5odG1sKGh0bWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRPcmRlciA9IChvcmRlckJ5TGlzdDogSUdyaWRPcmRlcltdKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgY29sIG9mIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2wub3JkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnlMaXN0ID09PSB1bmRlZmluZWQgfHwgb3JkZXJCeUxpc3QgPT09IG51bGwgfHwgb3JkZXJCeUxpc3QubGVuZ3RoID09PSAwICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgb3JkZXJDb2wgb2Ygb3JkZXJCeUxpc3QpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY29sIG9mIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9yZGVyQ29sLmNvbElkID09PSBjb2wuaWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5vcmRlciA9IG9yZGVyQ29sLm9yZGVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGpRdWVyeSh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29udGFpbmVyRWxlbWVudCk7XG4gICAgICAgIGlmICggcGFyZW50RWxlbWVudCAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudC5vZmYoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYW5hZ2VDb250YWluZXJFbGVtZW50ID0galF1ZXJ5KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5tYW5hZ2VDb2xTZXR0aW5nc0NvbnRhaW5lcik7XG4gICAgICAgIGlmICggbWFuYWdlQ29udGFpbmVyRWxlbWVudCAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgbWFuYWdlQ29udGFpbmVyRWxlbWVudC5vZmYoKTtcbiAgICAgICAgfVxuICAgICAgICAkKHdpbmRvdykub2ZmKFwicmVzaXplXCIsIHRoaXMuZG9jdW1lbnRSZXNpemVIYW5kbGVyKTtcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKFwiY2xpY2tcIiwgdGhpcy5kb2N1bWVudENsaWNrSGFuZGxlcik7XG4gICAgICAgICQod2luZG93KS5vZmYoXCJyZXNpemVcIiwgdGhpcy5kb2N1bWVudFJlc2l6ZUhhbmRsZXJGb3JDcyk7XG4gICAgICAgICQoZG9jdW1lbnQpLm9mZihcImNsaWNrXCIsIHRoaXMuZG9jdW1lbnRDbGlja0hhbmRsZXJGb3JDcyk7XG4gICAgICAgIGlmICggdGhpcy5zY3JvbGxIYW5kbGVyICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEhhbmRsZXIudW5XYXRjaFdpZHRoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEluaXRpYWxSb3dDb3VudCA9ICgpOiBudW1iZXIgPT4ge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoalF1ZXJ5KHdpbmRvdykuaW5uZXJIZWlnaHQoKSAqIDAuNjUgKSAvIDMyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIEluaXRIYW5kbGVycyA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGpRdWVyeSh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29udGFpbmVyRWxlbWVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhaW4gPSBbXTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFpbi5wdXNoKHtcbiAgICAgICAgICAgIGhhbmRsZXI6IG5ldyBEZXRhaWxzUm93SGFuZGxlcjxUPih0aGlzLmNvbmZpZ1N0b3JlLCBwYXJlbnRFbGVtZW50KSxcbiAgICAgICAgICAgIG5hbWU6IEhhbmRsZXJOYW1lcy5EZXRhaWxzUm93LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFpbi5wdXNoKHtcbiAgICAgICAgICAgIGhhbmRsZXI6ICBuZXcgRmlsdGVyQ2xpY2tIYW5kbGVyPFQ+KHRoaXMuY29uZmlnU3RvcmUsIHBhcmVudEVsZW1lbnQpLFxuICAgICAgICAgICAgbmFtZTogSGFuZGxlck5hbWVzLkZpbHRlckFjdGlvbixcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhaW4ucHVzaCh7XG4gICAgICAgICAgICBoYW5kbGVyOiBuZXcgSGVhZGVyQ2xpY2tIYW5kbGVyPFQ+KHRoaXMuY29uZmlnU3RvcmUsIHBhcmVudEVsZW1lbnQpLFxuICAgICAgICAgICAgbmFtZTogSGFuZGxlck5hbWVzLkhlYWRlckNsaWNrLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFpbi5wdXNoKHtcbiAgICAgICAgICAgIGhhbmRsZXI6IG5ldyBQYWdlU2VhcmNoSGFuZGxlcjxUPih0aGlzLmNvbmZpZ1N0b3JlLCBwYXJlbnRFbGVtZW50KSxcbiAgICAgICAgICAgIG5hbWU6IEhhbmRsZXJOYW1lcy5QYWdlU2VhcmNoLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50RWxlbWVudDtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFpbi5wdXNoKHtcbiAgICAgICAgICAgIGhhbmRsZXI6IG5ldyBTZWxlY3RFdmVudEhhbmRsZXI8VD4odGhpcy5jb25maWdTdG9yZSwgcGFyZW50RWxlbWVudCwgdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlKSxcbiAgICAgICAgICAgIG5hbWU6IEhhbmRsZXJOYW1lcy5Db2xTZXR0aW5ncyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhaW4uZm9yRWFjaCgodmFsdWU6IElIYW5kbGVyQ2hhaW48VD4pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIHZhbHVlLmhhbmRsZXIuUmVnaXN0ZXJEb21IYW5kbGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBqUXVlcnkod2luZG93KS5yZXNpemUodGhpcy5kb2N1bWVudFJlc2l6ZUhhbmRsZXIpO1xuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLmNsaWNrKHRoaXMuZG9jdW1lbnRDbGlja0hhbmRsZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZG9jdW1lbnRSZXNpemVIYW5kbGVyRm9yQ3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5tYW5hZ2VDb2xIYW5kbGVyLm9uUmVzaXplKCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBwcml2YXRlIGRvY3VtZW50Q2xpY2tIYW5kbGVyRm9yQ3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5tYW5hZ2VDb2xIYW5kbGVyLm9uRG9jdW1lbnRDbGljayhldmVudCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBwcml2YXRlIGRvY3VtZW50UmVzaXplSGFuZGxlckZvclNjcm9sbCA9IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLm1hbmFnZUNvbEhhbmRsZXIub25SZXNpemUoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIHByaXZhdGUgZG9jdW1lbnRDbGlja0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFpbi5mb3JFYWNoKCh2YWx1ZTogSUhhbmRsZXJDaGFpbjxUPik6IHZvaWQgPT4ge1xuICAgICAgICAgICAgdmFsdWUuaGFuZGxlci5vbkRvY3VtZW50Q2xpY2soZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIHByaXZhdGUgZG9jdW1lbnRSZXNpemVIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhaW4uZm9yRWFjaCgodmFsdWU6IElIYW5kbGVyQ2hhaW48VD4pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIHZhbHVlLmhhbmRsZXIub25Eb2N1bWVudENsaWNrKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9tYWluL0dyaWQudHMiLCJpbXBvcnQgeyBJR3JpZE9wdGlvbnMgfSBmcm9tIFwiLi4vbWFpbi9JR3JpZE9wdGlvbnNcIjtcclxuaW1wb3J0IHsgRmlsdGVyQWN0aW9uVHlwZSB9IGZyb20gXCIuLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZVwiO1xyXG5pbXBvcnQgeyBHcmlkT3JkZXJEaXJlY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWxzL0dyaWRPcmRlckRpcmVjdGlvblwiO1xyXG5pbXBvcnQgeyBJQ29sdW1uIH0gZnJvbSBcIi4uL21vZGVscy9JQ29sdW1uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlnU3RvcmU8VD4ge1xyXG4gICAgcHVibGljIG9wdGlvbnM6IElHcmlkT3B0aW9uczxUPjtcclxuICAgIHByaXZhdGUgZGVmYXVsdEdyaWRPcHRpb25zOiBJR3JpZE9wdGlvbnM8VD4gPSB7XHJcbiAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgIGNodW5rU2l6ZTogNSxcclxuICAgICAgICBjb2x1bW5zOiBbXSxcclxuICAgICAgICBjb250YWluZXJFbGVtZW50OiBudWxsLFxyXG4gICAgICAgIG1hbmFnZUNvbFNldHRpbmdzQ29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgIGh5YnJpZEZ1bmN0aW9uOiAoY29sdW1uOiBJQ29sdW1uLCByb3c6IFQpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cnVlXCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBrZXlDb2x1bW46IFwiXCIsXHJcbiAgICAgICAgb25Db2xTZXR0aW5nc0NoYW5nZTogKGNvbENvbmZpZzogSUNvbHVtbltdKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIC8vIE5vIENvZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQ2xpY2tGaWx0ZXI6IChjb2x1bW46IHN0cmluZywgdmFsdWU6IGFueSwgYWN0aW9uVHlwZTogRmlsdGVyQWN0aW9uVHlwZSk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAvLyBObyBjb2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkNsaWNrSGVhZGVyOiAoY29sdW1uOiBzdHJpbmcsIGRpcmVjdGlvbjogR3JpZE9yZGVyRGlyZWN0aW9uKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNvZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uUGFnZVNlYXJjaDogKHBhZ2VTaXplOiBudW1iZXIsIHBhZ2VJbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNvZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uU2VsZWN0OiAocm93czogVFtdKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIC8vIE5vIENvZGVcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElHcmlkT3B0aW9uczxUPikge1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXJFbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBQcm92aWRlIGEgdmFsaWQgY29udGFpbmVyIEVsZW1lbnQgb2JqZWN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgT3B0aW9ucyhvcHRpb25zOiBJR3JpZE9wdGlvbnM8VD4pIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBPcHRpb25zKCk6IElHcmlkT3B0aW9uczxUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcclxuICAgIH1cclxuICAgIHB1YmxpYyBTZXRIaWRkZW5PbkNvbmZpZyA9IChib29sOiBib29sZWFuLCBjb2x1bW5JZD86IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgY29sIG9mIHRoaXMuT3B0aW9ucy5jb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIGlmIChjb2x1bW5JZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb2wuaGlkZGVuID0gYm9vbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb2wuaWQgPT09IGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLmhpZGRlbiA9IGJvb2w7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV4dGVuZE9wdGlvbnMgPSAoaW5wdXRPcHRpb25zOiBJR3JpZE9wdGlvbnM8VD4pOiBJR3JpZE9wdGlvbnM8VD4gPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRHcmlkT3B0aW9ucywgaW5wdXRPcHRpb25zKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2pzL2NvbmZpZy9Db25maWdTdG9yZS50cyIsImltcG9ydCB7IElHcmlkT3B0aW9ucyB9IGZyb20gXCIuLi9tYWluL0lHcmlkT3B0aW9uc1wiO1xyXG5pbXBvcnQgeyBDb25maWdTdG9yZSB9IGZyb20gXCIuLy4uL2NvbmZpZy9Db25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBUb2dnbGVDb2x1bW5IYW5kbGVyIH0gZnJvbSBcIi4vVG9nZ2xlQ29sdW1uSGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbFNldHRpbmdzSGFuZGxlcjxUPiBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXI8VD4ge1xyXG4gICAgcHJpdmF0ZSBwYXJlbnRFbGVtZW50OiBKUXVlcnk7XHJcbiAgICBwcml2YXRlIHRvZ2dsZUNvbHVtbkhhbmRsZXI6IFRvZ2dsZUNvbHVtbkhhbmRsZXI8VD47XHJcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBKUXVlcnksIGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPiwgdG9nZ2xlQ29sdW1uSGFuZGxlcjogVG9nZ2xlQ29sdW1uSGFuZGxlcjxUPikge1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQ29sdW1uSGFuZGxlciA9IHRvZ2dsZUNvbHVtbkhhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gY29uc3Qgc2V0dG5nc1BvcHVwID0gdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIuY29sLXNldHRpbmdzLWNvbnRhaW5lclwiKTtcclxuICAgICAgICAvLyBjb25zdCB0Ym9keUhlaWdodCA9IHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnRhYmxlLWJvZHlcIikuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAvLyBzZXR0bmdzUG9wdXAuaW5uZXJIZWlnaHQodGJvZHlIZWlnaHQgLSAxMCk7XHJcbiAgICAgICAgLy8gc2V0dG5nc1BvcHVwLmZpbmQoXCIuY29sLXNldHRpbmdzLXRhYmxlXCIpLmlubmVySGVpZ2h0KHNldHRuZ3NQb3B1cC5pbm5lckhlaWdodCgpIC1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0bmdzUG9wdXAuZmluZChcIi5jb2wtc2V0dGluZ3MtaGVhZGVyXCIpLmlubmVySGVpZ2h0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuaXMoXCIuY29sLXNldHRpbmdzLXRyaWdnZXJcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRhcmdldEVsZW1lbnQucGFyZW50cygpLmlzKFwiLmNvbC1zZXR0aW5ncy1jb250YWluZXJcIikpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KFwiLmNvbC1zZXR0aW5ncy10cmlnZ2VyXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBqUXVlcnkoXCIuY29sLXNldHRpbmdzLWNvbnRhaW5lclwiKS5zbGlkZVVwKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmNvbC1zZXR0aW5ncy10cmlnZ2VyXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRuZ3NQb3B1cCA9IHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLmNvbC1zZXR0aW5ncy1jb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcclxuICAgICAgICAgICAgalF1ZXJ5KFwiLmNvbC1zZXR0aW5ncy10cmlnZ2VyXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBzZXR0bmdzUG9wdXAuc2xpZGVUb2dnbGUodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5jb2wtc2V0dGluZ3MtaGVhZGVyIC5jb2wtc2V0dGluZ3MtZmlsdGVyXCIsXHJcbiAgICAgICAgICAgIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZWxlbWVudC52YWwoKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIuY29sLXNldHRpbmdzLXRhYmxlIHRhYmxlIHRib2R5IHRyXCIpLmVhY2goKGk6IG51bWJlciwgZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeShlKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeShlKS5hdHRyKFwiZGF0YS1oZWFkZXItaWRcIikudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPT09IC0xICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoZSkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1hbGwtY29sdW1uXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5jb2wtc2V0dGluZ3MtaGlkZGVuLWNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KGVsZW1lbnQpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVDb2x1bW5IYW5kbGVyLnNob3dBbGxDb2x1bW5zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkNvbFNldHRpbmdzQ2hhbmdlKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuaGlkZS1hbGwtY29sdW1uXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5jb2wtc2V0dGluZ3MtaGlkZGVuLWNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KGVsZW1lbnQpLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ29sdW1uSGFuZGxlci5oaWRlQWxsQ29sdW1ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xTZXR0aW5nc0NoYW5nZSh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmNvbC1zZXR0aW5ncy1oaWRkZW4tY2hlY2tib3hcIiwgKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGNoZWNrYm94LnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tib3guaXMoXCI6Y2hlY2tlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ29sdW1uSGFuZGxlci5zaG93Q29sdW1uKGlkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDb2x1bW5IYW5kbGVyLmhpZGVDb2x1bW4oaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkNvbFNldHRpbmdzQ2hhbmdlKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvanMvZXZlbnRIYW5kbGVycy9Db2xTZXR0aW5nc0hhbmRsZXIudHMiLCJpbXBvcnQgeyBDb25maWdTdG9yZSB9IGZyb20gXCIuLi9jb25maWcvQ29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHsgR3JpZFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9HcmlkVGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0RXZlbnRIYW5kbGVyPFQ+IGltcGxlbWVudHMgSUV2ZW50SGFuZGxlcjxUPiB7XHJcbiAgICBwcml2YXRlIHBhcmVudEVsZW1lbnQ6IEpRdWVyeTtcclxuICAgIHByaXZhdGUgY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlPFQ+O1xyXG4gICAgcHJpdmF0ZSBncmlkVGVtcGxhdGVTZXJ2aWNlOiBHcmlkVGVtcGxhdGVTZXJ2aWNlPFQ+O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPiwgZWxlbWVudDogSlF1ZXJ5LCBncmlkVGVtcGxhdGVTZXJ2aWNlOiBHcmlkVGVtcGxhdGVTZXJ2aWNlPFQ+KSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlID0gZ3JpZFRlbXBsYXRlU2VydmljZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLnNlbGVjdC1rZXktY2hlY2tib3hcIiAsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGVsZW1lbnQuZGF0YShcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRzKFwiLm1haW5Sb3dcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudHMoXCIubWFpblJvd1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uU2VsZWN0KFtyb3ddLCBjaGVja2VkKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLnNlbGVjdC1hbGwtY2hlY2tib3hcIiAsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbGVtZW50LmlzKFwiOmNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vblNlbGVjdCh0aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UuRGF0YSwgY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnNlbGVjdC1rZXktY2hlY2tib3hcIikucHJvcChcImNoZWNrZWRcIiwgY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5tYWluVGFibGUgLm1haW5Sb3dcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5tYWluVGFibGUgLm1haW5Sb3dcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvU2VsZWN0RXZlbnRIYW5kbGVyLnRzIiwiaW1wb3J0IHsgQ29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcbmV4cG9ydCBjbGFzcyBEZXRhaWxzUm93SGFuZGxlcjxUPiBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXI8VD4ge1xyXG4gICAgcHJpdmF0ZSBwYXJlbnRFbGVtZW50OiBKUXVlcnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWdTdG9yZTogQ29uZmlnU3RvcmU8VD4sIGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBEby5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBEby5cclxuICAgIH1cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIudGFibGUtYm9keSAuZXhwYW5zaW9uQXJyb3dzIGlcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFycm93ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbHNSb3cgPSBhcnJvdy5jbG9zZXN0KFwidHJcIikubmV4dCgpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SWNvbiA9IGFycm93LmhpZGUoKTtcclxuICAgICAgICAgICAgY29uc3Qgb3RoZXJJY29uID0gYXJyb3cuc2libGluZ3MoXCJpXCIpLnNob3coKTtcclxuICAgICAgICAgICAgaWYgKGFycm93Lmhhc0NsYXNzKFwiZXhwYW5kRGV0YWlsc1Jvd0ljb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbHNSb3cuc2xpZGVEb3duKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbHNSb3cuc2xpZGVVcCh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9ldmVudEhhbmRsZXJzL0RldGFpbHNSb3dIYW5kbGVyLnRzIiwiaW1wb3J0IHsgQ29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IElHcmlkT3B0aW9ucyB9IGZyb20gXCIuLi9tYWluL0lHcmlkT3B0aW9uc1wiO1xyXG5pbXBvcnQgeyBDb21tb25VdGlsIH0gZnJvbSBcIi4uL3V0aWwvQ29sdW1uVXRpbFwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25UeXBlIH0gZnJvbSBcIi4vLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcclxuaW1wb3J0IHsgSUZpbHRlckNsaWNrRGVsZWdhdGUgfSBmcm9tIFwiLi8uLi9tb2RlbHMvSUZpbHRlckNsaWNrRGVsZWdhdGVcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXJDbGlja0hhbmRsZXI8VD4gaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyPFQ+IHtcclxuICAgIHByaXZhdGUgY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlPFQ+O1xyXG4gICAgcHJpdmF0ZSBwYXJlbnRFbGVtZW50OiBKUXVlcnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlPFQ+LCBlbGVtZW50OiBKUXVlcnkpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBOb3RoaW5nIHRvIERvLlxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBOb3RoaW5nIHRvIERvLlxyXG4gICAgfVxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQub24oXCJjbGlja1wiLCBcIi50YWJsZS1ib2R5IC5kZXRhaWxzUm93IC5kZXRhaWxzVGFibGUgdGQgaVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRUZCA9IGVsZW1lbnQucGFyZW50cyhcInRkXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBwYXJlbnRUZC5hdHRyKFwiZGF0YS1maWx0ZXIta2V5XCIpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmVudFRkLmF0dHIoXCJkYXRhLWZpbHRlci12YWx1ZVwiKTtcclxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHBhcmVudFRkLmF0dHIoXCJkYXRhLWZpbHRlci10eXBlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSBDb21tb25VdGlsLkdldENvbHVtbk9iamVjdChrZXksIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgaWYgKGNvbCA9PT0gdW5kZWZpbmVkIHx8IGNvbCA9PT0gbnVsbCB8fCAhY29sLmZpbHRlcmFibGUgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGZpbHRlckFjdGlvbjogRmlsdGVyQWN0aW9uVHlwZSA9IEZpbHRlckFjdGlvblR5cGUuQWRkO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcyhcInJlbW92ZUZpbHRlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyQWN0aW9uID0gRmlsdGVyQWN0aW9uVHlwZS5NaW51cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25DbGlja0ZpbHRlcihrZXksIHZhbHVlLCBmaWx0ZXJBY3Rpb24sIHR5cGUpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvRmlsdGVyQ2xpY2tIYW5kbGVyLnRzIiwiZXhwb3J0IGVudW0gRmlsdGVyQWN0aW9uVHlwZSB7XHJcbiAgICBBZGQgPSBcIkFkZFwiLFxyXG4gICAgTWludXMgPSBcIk1pbnVzXCIsXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZS50cyIsImV4cG9ydCBlbnVtIEhhbmRsZXJOYW1lcyB7XHJcbiAgICBGaWx0ZXJBY3Rpb24sXHJcbiAgICBIZWFkZXJDbGljayxcclxuICAgIFNjcm9sbCxcclxuICAgIFBhZ2VTZWFyY2gsXHJcbiAgICBEZXRhaWxzUm93LFxyXG4gICAgVG9nZ2xlQ29sdW1uLFxyXG4gICAgQ29sU2V0dGluZ3MsXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9ldmVudEhhbmRsZXJzL0hhbmRsZXJOYW1lcy50cyIsImltcG9ydCB7IENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9Db25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBJR3JpZE9wdGlvbnMgfSBmcm9tIFwiLi4vbWFpbi9JR3JpZE9wdGlvbnNcIjtcclxuaW1wb3J0IHsgQ29tbW9uVXRpbCB9IGZyb20gXCIuLi91dGlsL0NvbHVtblV0aWxcIjtcclxuaW1wb3J0IHsgR3JpZE9yZGVyRGlyZWN0aW9uIH0gZnJvbSBcIi4vLi4vbW9kZWxzL0dyaWRPcmRlckRpcmVjdGlvblwiO1xyXG5pbXBvcnQge0lIZWFkZXJDbGlja0RlbGVnYXRlfSBmcm9tIFwiLi8uLi9tb2RlbHMvSUhlYWRlckNsaWNrRGVsZWdhdGVcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWFkZXJDbGlja0hhbmRsZXI8VD4gaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyPFQ+IHtcclxuICAgIHByaXZhdGUgcGFyZW50RWxlbWVudDogSlF1ZXJ5O1xyXG4gICAgcHJpdmF0ZSBjb25maWdTdG9yZTogQ29uZmlnU3RvcmU8VD47XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlPFQ+LCBlbGVtZW50OiBKUXVlcnkpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBEby5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBEby5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIFJlZ2lzdGVyaW5nIEpRdWVyeSBFdmVudCBIYW5kbGVyIGlmIEhlYWRlciBpcyBDbGlja2VkLlxyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnRhYmxlLWhlYWRlciB0aFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpLmNsb3Nlc3QoXCJ0aFwiKTtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVySWQgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWhlYWRlci1pZFwiKTtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gQ29tbW9uVXRpbC5HZXRDb2x1bW5PYmplY3QoaGVhZGVySWQsIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgaWYgKGNvbCA9PT0gdW5kZWZpbmVkIHx8IGNvbCA9PT0gbnVsbCB8fCAhY29sLnNvcnRhYmxlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGFycm93SWNvbnMgPSBlbGVtZW50LmZpbmQoXCJpXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB1cEFycm93SWNvbiA9IGFycm93SWNvbnMuZmlyc3QoKTtcclxuICAgICAgICAgICAgY29uc3QgZG93bkFycm93SWNvbiA9IGFycm93SWNvbnMubGFzdCgpO1xyXG4gICAgICAgICAgICBsZXQgZGlyZWN0aW9uOiBHcmlkT3JkZXJEaXJlY3Rpb247XHJcbiAgICAgICAgICAgIGlmIChhcnJvd0ljb25zLmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1cEFycm93SWNvbi5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gR3JpZE9yZGVyRGlyZWN0aW9uLkRlc2M7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBBcnJvd0ljb24uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvd25BcnJvd0ljb24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBHcmlkT3JkZXJEaXJlY3Rpb24uQXNjO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvd25BcnJvd0ljb24uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwQXJyb3dJY29uLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IEdyaWRPcmRlckRpcmVjdGlvbi5Bc2M7XHJcbiAgICAgICAgICAgICAgICB1cEFycm93SWNvbi5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQ29tbW9uVXRpbC5TZXRPcmRlcihoZWFkZXJJZCwgZGlyZWN0aW9uLCB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkNsaWNrSGVhZGVyKGhlYWRlcklkLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2pzL2V2ZW50SGFuZGxlcnMvSGVhZGVyQ2xpY2tIYW5kbGVyLnRzIiwiaW1wb3J0ICogYXMgalF1ZXJ5IGZyb20gXCJqcXVlcnlcIjtcclxuaW1wb3J0IHsgQ29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IFBhZ2VyIH0gZnJvbSBcIi4uL3BhZ2luYXRpb24vUGFnZXJcIjtcclxuaW1wb3J0IHsgSVBhZ2VTZWFyY2hDbGlja0RlbGVnYXRlIH0gZnJvbSBcIi4vLi4vbW9kZWxzL0lQYWdlU2VhcmNoQ2xpY2tEZWxlZ2F0ZVwiO1xyXG5pbXBvcnQgeyBJUGFnaW5hdGlvbiB9IGZyb20gXCIuLy4uL21vZGVscy9JUGFnaW5hdGlvblwiO1xyXG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhZ2VTZWFyY2hIYW5kbGVyPFQ+IGltcGxlbWVudHMgSUV2ZW50SGFuZGxlcjxUPiB7XHJcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPjtcclxuICAgIHByaXZhdGUgcGFyZW50RWxlbWVudDogSlF1ZXJ5O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPiwgZWxlbWVudDogSlF1ZXJ5KSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljaygpOiB2b2lkIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIudGFibGUtZm9vdGVyIC5maXJzdExpbmtcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5vblBhZ2VTZWFyY2goUGFnZXIuUGFnaW5hdGlvbkRhdGEucGFnZVNpemUsIDEpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQub24oXCJjbGlja1wiLCBcIi50YWJsZS1mb290ZXIgLm5leHRMaW5rXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLm9wdGlvbnMub25QYWdlU2VhcmNoKFBhZ2VyLlBhZ2luYXRpb25EYXRhLnBhZ2VTaXplLCBQYWdlci5QYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXggKyAxKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIudGFibGUtZm9vdGVyIC5wcmV2TGlua1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWdTdG9yZS5vcHRpb25zLm9uUGFnZVNlYXJjaChQYWdlci5QYWdpbmF0aW9uRGF0YS5wYWdlU2l6ZSwgUGFnZXIuUGFnaW5hdGlvbkRhdGEucGFnZUluZGV4IC0gMSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnRhYmxlLWZvb3RlciAubGFzdExpbmtcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5vblBhZ2VTZWFyY2goUGFnZXIuUGFnaW5hdGlvbkRhdGEucGFnZVNpemUsIFBhZ2VyLlBhZ2luYXRpb25EYXRhLm5vT2ZQYWdlcyk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbihcImNoYW5nZVwiLCBcIi50YWJsZS1mb290ZXIgLnBhZ2VTaXplU2VsZWN0b3JcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbDogbnVtYmVyID0gK2pRdWVyeShldmVudC50YXJnZXQpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUub3B0aW9ucy5vblBhZ2VTZWFyY2godmFsLCBQYWdlci5QYWdpbmF0aW9uRGF0YS5wYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQub24oXCJrZXlwcmVzc1wiLCBcIi50YWJsZS1mb290ZXIgLnBhZ2VyLWlucHV0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpcCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCBwYWdlRGF0YSA9IFBhZ2VyLlBhZ2luYXRpb25EYXRhO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbDogbnVtYmVyID0gK2lwLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsKSB8fCB2YWwgPiBwYWdlRGF0YS5ub09mUGFnZXMgfHwgdmFsIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlwLnZhbChwYWdlRGF0YS5wYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLm9wdGlvbnMub25QYWdlU2VhcmNoKHBhZ2VEYXRhLnBhZ2VTaXplLCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvanMvZXZlbnRIYW5kbGVycy9QYWdlU2VhcmNoQ2xpY2tIYW5kbGVyLnRzIiwiaW1wb3J0IHsgQ29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IEdyaWRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi8uLi9zZXJ2aWNlcy9HcmlkVGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IElJbmRleENvdW50ZXIgfSBmcm9tIFwiLi8uLi92aXJ0dWFsaXphdGlvbi9JbmRleENvdW50ZXJcIjtcclxuaW1wb3J0IHsgU2Nyb2xsRGlyZWN0aW9uIH0gZnJvbSBcIi4vLi4vdmlydHVhbGl6YXRpb24vU2Nyb2xsRGlyZWN0aW9uXCI7XHJcbmltcG9ydCB7IFZpcnR1YWxpemVyIH0gZnJvbSBcIi4vLi4vdmlydHVhbGl6YXRpb24vVmlydHVhbGl6ZXJcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTY3JvbGxIYW5kbGVyPFQ+IGltcGxlbWVudHMgSUV2ZW50SGFuZGxlcjxUPiB7XHJcbiAgICBwcml2YXRlIHZpcnR1YWxpemVyOiBWaXJ0dWFsaXplcjtcclxuICAgIHByaXZhdGUgcGFyZW50RWxlbWVudDogSlF1ZXJ5O1xyXG4gICAgcHJpdmF0ZSBncmlkVGVtcGxhdGVTZXJ2aWNlOiBHcmlkVGVtcGxhdGVTZXJ2aWNlPFQ+O1xyXG4gICAgcHJpdmF0ZSByZW5kZXJpbmc6IGJvb2xlYW4gPSAgZmFsc2U7XHJcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPjtcclxuICAgIHByaXZhdGUgbGVmdE9mZnNldDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBwYXJlbnRPZmZTZXRMZWZ0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRJbmRleDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB3YXRjaGVzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTxUPiwgZ3JpZFRlbXBsYXRlU2VydmljZTogR3JpZFRlbXBsYXRlU2VydmljZTxUPiwgY3VycmVudEluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0galF1ZXJ5KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICB0aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UgPSBncmlkVGVtcGxhdGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY3VycmVudEluZGV4O1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xyXG4gICAgICAgIC8vXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIE5vIE9wXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIFJlZ2lzdGVyaW5nIEpRdWVyeSBFdmVudCBIYW5kbGVyIGlmIEhlYWRlciBpcyBDbGlja2VkLlxyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnRhYmxlLWJvZHlcIikub24oXCJzY3JvbGxcIiwgdGhpcy5oYW5kbGVSZXNpemUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlbW92ZUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtYm9keVwiKS5vZmYoXCJzY3JvbGxcIiwgdGhpcy5oYW5kbGVSZXNpemUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlc2V0UGFyZW50T2Zmc2V0ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucGFyZW50T2ZmU2V0TGVmdCA9IHRoaXMucGFyZW50RWxlbWVudC5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIHRoaXMubGVmdE9mZnNldCA9IHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnRhYmxlLWhlYWRlclwiKS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHdhdGNoV2lkdGggPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRPZmZTZXRMZWZ0ID0gdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgdGhpcy53YXRjaGVzLnB1c2goc2V0SW50ZXJ2YWwodGhpcy5zZXRIZWFkZXJPZmZzZXQsIDMwMCkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHVuV2F0Y2hXaWR0aCA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy53YXRjaGVzID09PSB1bmRlZmluZWQgfHwgdGhpcy53YXRjaGVzID09PSBudWxsICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3Qgd2F0Y2ggb2YgdGhpcy53YXRjaGVzKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwod2F0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgaGFuZGxlUmVzaXplID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdEJvZHlPYmogPSB0aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi50YWJsZS1ib2R5XCIpO1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnRPZmZzZXQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmxlZnRPZmZzZXQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0T2Zmc2V0ID0gdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtaGVhZGVyXCIpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLnRhYmxlLWhlYWRlclwiKS5vZmZzZXQoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHRoaXMubGVmdE9mZnNldCArIC0xICogdEJvZHlPYmouc2Nyb2xsTGVmdCgpLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgYWN0dWFsVGFibGVIZWlnaHQgPSB0Qm9keU9iai5maW5kKFwiLm1haW5UYWJsZVwiKS5oZWlnaHQoKTtcclxuICAgICAgICBjb25zdCBzY3JvbGxDb250YWluZXJIZWlnaHQgPSB0Qm9keU9iai5oZWlnaHQoKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmluZykge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSB0Qm9keU9iai5zY3JvbGxUb3AoKTtcclxuICAgICAgICBpZiAoKHNjcm9sbENvbnRhaW5lckhlaWdodCArIHNjcm9sbFRvcCApIC0gKGFjdHVhbFRhYmxlSGVpZ2h0ICogMC44ICkgPiAwICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMuZ3JpZFRlbXBsYXRlU2VydmljZS5EYXRhTGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IGxhc3RJbmRleCA9IHRoaXMuY3VycmVudEluZGV4ICsgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNodW5rU2l6ZTtcclxuICAgICAgICAgICAgaWYgKCBsYXN0SW5kZXggPj0gdGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLkRhdGFMZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSB0aGlzLmdyaWRUZW1wbGF0ZVNlcnZpY2UuRGF0YUxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaHRtbCAgPSBqUXVlcnkodGhpcy5ncmlkVGVtcGxhdGVTZXJ2aWNlLmdldFRlbXBsYXRlKHRoaXMuY3VycmVudEluZGV4LCBsYXN0SW5kZXgpKTtcclxuICAgICAgICAgICAgdEJvZHlPYmouZmluZChcIi5tYWluVGFibGVCb2R5XCIpLmFwcGVuZChodG1sKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBsYXN0SW5kZXggKyAxO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEhlYWRlck9mZnNldCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgaWYgKCB0aGlzLnBhcmVudE9mZlNldExlZnQgIT09IGxlZnQgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRCb2R5T2JqID0gdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtYm9keVwiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGVmdE9mZnNldCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMubGVmdE9mZnNldCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0T2Zmc2V0ID0gdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIudGFibGUtaGVhZGVyXCIpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sZWZ0T2Zmc2V0ID0gdGhpcy5sZWZ0T2Zmc2V0IC0gKHRoaXMucGFyZW50T2ZmU2V0TGVmdCAtIGxlZnQpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLnRhYmxlLWhlYWRlclwiKVxyXG4gICAgICAgICAgICAgICAgLm9mZnNldCh7bGVmdDogdGhpcy5sZWZ0T2Zmc2V0LCB0b3A6IDB9KTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRPZmZTZXRMZWZ0ID0gbGVmdDtcclxuICAgICAgICAgICAgdEJvZHlPYmouc2Nyb2xsTGVmdCh0Qm9keU9iai5zY3JvbGxMZWZ0KCkgLSAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9ldmVudEhhbmRsZXJzL1Njcm9sbEhhbmRsZXIudHMiLCJpbXBvcnQgeyBDb25maWdTdG9yZSB9IGZyb20gXCIuLi9jb25maWcvQ29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHsgSUNvbHVtbiB9IGZyb20gXCIuLy4uL21vZGVscy9JQ29sdW1uXCI7XHJcbmltcG9ydCB7IENvbW1vblV0aWwgfSBmcm9tIFwiLi8uLi91dGlsL0NvbHVtblV0aWxcIjtcclxuXHJcbmVudW0gU2hvd0hpZGUge1xyXG4gICAgU2hvdyxcclxuICAgIEhpZGUsXHJcbiAgICBTaG93QWxsLFxyXG4gICAgSGlkZUFsbCxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRvZ2dsZUNvbHVtbkhhbmRsZXI8VD4ge1xyXG4gICAgcHJpdmF0ZSBjb25maWdTdG9yZTogQ29uZmlnU3RvcmU8VD47XHJcbiAgICBwcml2YXRlIHBhcmVudEVsZW1lbnQ6IEpRdWVyeTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdTdG9yZTogQ29uZmlnU3RvcmU8VD4sIGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93QWxsQ29sdW1ucyA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLlNldENvbFdpZHRoKFwiLnRhYmxlLWhlYWRlciAuaGVhZGVyQ29sR3JvdXAgY29sXCIsIFNob3dIaWRlLlNob3dBbGwpO1xyXG4gICAgICAgIHRoaXMuU2V0Q29sV2lkdGgoXCIudGFibGUtYm9keSAuYm9keUNvbEdyb3VwIGNvbFwiLCBTaG93SGlkZS5TaG93QWxsKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLlNldEhpZGRlbk9uQ29uZmlnKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd0NvbHVtbiA9IChjb2x1bW5JZDogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5TZXRDb2xXaWR0aChcIi50YWJsZS1oZWFkZXIgLmhlYWRlckNvbEdyb3VwIGNvbFwiLCBTaG93SGlkZS5TaG93LCBjb2x1bW5JZCk7XHJcbiAgICAgICAgdGhpcy5TZXRDb2xXaWR0aChcIi50YWJsZS1ib2R5IC5ib2R5Q29sR3JvdXAgY29sXCIsIFNob3dIaWRlLlNob3csIGNvbHVtbklkKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLlNldEhpZGRlbk9uQ29uZmlnKGZhbHNlLCBjb2x1bW5JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZGVDb2x1bW4gPSAoY29sdW1uSWQ6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuU2V0Q29sV2lkdGgoXCIudGFibGUtaGVhZGVyIC5oZWFkZXJDb2xHcm91cCBjb2xcIiwgU2hvd0hpZGUuSGlkZSwgY29sdW1uSWQpO1xyXG4gICAgICAgIHRoaXMuU2V0Q29sV2lkdGgoXCIudGFibGUtYm9keSAuYm9keUNvbEdyb3VwIGNvbFwiLCBTaG93SGlkZS5IaWRlICwgY29sdW1uSWQpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuU2V0SGlkZGVuT25Db25maWcodHJ1ZSwgY29sdW1uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlQWxsQ29sdW1ucyA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLlNldENvbFdpZHRoKFwiLnRhYmxlLWhlYWRlciAuaGVhZGVyQ29sR3JvdXAgY29sXCIsIFNob3dIaWRlLkhpZGVBbGwpO1xyXG4gICAgICAgIHRoaXMuU2V0Q29sV2lkdGgoXCIudGFibGUtYm9keSAuYm9keUNvbEdyb3VwIGNvbFwiLCBTaG93SGlkZS5IaWRlQWxsKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLlNldEhpZGRlbk9uQ29uZmlnKHRydWUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFwcGx5Q29sdW1uQ29uZmlnID0gKGNvbHVtbnM6IElDb2x1bW5bXSkgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgY29sdW1uIG9mIGNvbHVtbnMpIHtcclxuICAgICAgICAgICAgaWYgKGNvbHVtbi5oaWRkZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbihjb2x1bW4uaWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uKGNvbHVtbi5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIFNldENvbFdpZHRoID0gKHNlbGVjdG9yOiBzdHJpbmcsIGNvbnRyb2w6IFNob3dIaWRlLCBjb2x1bW5JZD86IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5maW5kKHNlbGVjdG9yKS5lYWNoKChpbmRleCwgZWxlbWVudCk6IHZvaWQgfCBmYWxzZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2xFbGVtID0galF1ZXJ5KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sID0gY3VycmVudENvbEVsZW0uYXR0cihcImRhdGEtaGVhZGVyLWlkXCIpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudENvbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29sOiBJQ29sdW1uO1xyXG4gICAgICAgICAgICAgICAgaWYgKFtTaG93SGlkZS5TaG93LCBTaG93SGlkZS5IaWRlXS5pbmRleE9mKGNvbnRyb2wpID4gLTEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb2wgPT09IGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sID09PSBTaG93SGlkZS5TaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSBDb21tb25VdGlsLkdldENvbHVtbk9iamVjdChjdXJyZW50Q29sLCB0aGlzLmNvbmZpZ1N0b3JlLm9wdGlvbnMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IGNvbC53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29sRWxlbS53aWR0aCggd2lkdGggKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFtTaG93SGlkZS5TaG93QWxsLCBTaG93SGlkZS5IaWRlQWxsXS5pbmRleE9mKGNvbnRyb2wpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbCA9PT0gU2hvd0hpZGUuU2hvd0FsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSBDb21tb25VdGlsLkdldENvbHVtbk9iamVjdChjdXJyZW50Q29sLCB0aGlzLmNvbmZpZ1N0b3JlLm9wdGlvbnMuY29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gY29sLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29sRWxlbS53aWR0aCggd2lkdGggKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9ldmVudEhhbmRsZXJzL1RvZ2dsZUNvbHVtbkhhbmRsZXIudHMiLCJpbXBvcnQgKiBhcyBIYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XHJcbmltcG9ydCAqIGFzIEdyaWREZXRhaWxzUm93VGVtcGxhdGUgZnJvbSBcIi4uLy4uL2hicy9ncmlkLWRldGFpbHMtcm93Lmhic1wiO1xyXG5pbXBvcnQgKiBhcyBHcmlkRm9vdGVyIGZyb20gXCIuLi8uLi9oYnMvZ3JpZC1mb290ZXIuaGJzXCI7XHJcbmltcG9ydCAqIGFzIEdyaWRNYWluUm93VGVtcGxhdGUgZnJvbSBcIi4uLy4uL2hicy9ncmlkLW1haW4tcm93Lmhic1wiO1xyXG5pbXBvcnQgKiBhcyBNYW5hZ2VDb2x1bW5UZW1wbGF0ZSBmcm9tIFwiLi4vLi4vaGJzL2dyaWQtbWFuYWdlLWNvbHVtbnMuaGJzXCI7XHJcbmltcG9ydCAqIGFzIEdyaWRUZW1wbGF0ZSBmcm9tIFwiLi4vLi4vaGJzL2dyaWQuaGJzXCI7XHJcbmltcG9ydCB7IENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9Db25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBJUGFnaW5hdGlvbiB9IGZyb20gXCIuLi9tb2RlbHMvSVBhZ2luYXRpb25cIjtcclxuaW1wb3J0IHsgUGFnZXIgfSBmcm9tIFwiLi4vcGFnaW5hdGlvbi9QYWdlclwiO1xyXG5pbXBvcnQgeyBJQ29sdW1uIH0gZnJvbSBcIi4vLi4vbW9kZWxzL0lDb2x1bW5cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHcmlkVGVtcGxhdGVTZXJ2aWNlIDxUPiB7XHJcbiAgICBwcml2YXRlIGRhdGE6IFRbXTtcclxuICAgIHByaXZhdGUgY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlPFQ+O1xyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUZ1bmN0aW9uRm9yR3JpZDogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUZ1bmN0aW9uRm9yTWFpblJvdzogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUZ1bmN0aW9uRm9yRGV0YWlsc1JvdzogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUZ1bmN0aW9uRm9yRm9vdGVyOiBhbnk7XHJcbiAgICBwcml2YXRlIHRlbXBsYXRlRnVuY3Rpb25Gb3JNYW5hZ2VDb2w6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdTdG9yZTogQ29uZmlnU3RvcmU8VD4pIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUZ1bmN0aW9uRm9yR3JpZCA9IEdyaWRUZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRnVuY3Rpb25Gb3JNYWluUm93ID0gR3JpZE1haW5Sb3dUZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRnVuY3Rpb25Gb3JEZXRhaWxzUm93ID0gR3JpZERldGFpbHNSb3dUZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRnVuY3Rpb25Gb3JGb290ZXIgPSBHcmlkRm9vdGVyO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVGdW5jdGlvbkZvck1hbmFnZUNvbCA9IE1hbmFnZUNvbHVtblRlbXBsYXRlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBEYXRhKCk6IFRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgRGF0YUxlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcHVibGljIEdldEZpcnN0VGVtcGxhdGUgPSAoZGF0YTogVFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RJbmRleDogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEluZGV4OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgY29uc3QgbWFpblJvd0FycmF5ID0gdGhpcy5HZXRSb3dzSHRtbChmaXJzdEluZGV4LCBsYXN0SW5kZXgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRnVuY3Rpb25Gb3JHcmlkKHtcclxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbHVtbnMsXHJcbiAgICAgICAgICAgIG1haW5Sb3dBcnJheSxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbkRhdGE6IFBhZ2VyLlBhZ2luYXRpb25EYXRhLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFRlbXBsYXRlID0gKGZpcnN0SW5kZXg6IG51bWJlciwgbGFzdEluZGV4OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1haW5Sb3dBcnJheSA9IHRoaXMuR2V0Um93c0h0bWwoZmlyc3RJbmRleCwgbGFzdEluZGV4KTtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZ1bmN0aW9uRm9yTWFpblJvdyh7XHJcbiAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zLFxyXG4gICAgICAgICAgICBtYWluUm93QXJyYXksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgR2V0TWFuYWdlQ29sdW1uc0h0bWwgPSAoKTogc3RyaW5nID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZ1bmN0aW9uRm9yTWFuYWdlQ29sKHtjb2x1bW5zOiB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1uc30pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBHZXRSb3dzSHRtbCA9IChmaXJzdEluZGV4OiBudW1iZXIsIGxhc3RJbmRleDogbnVtYmVyKTogYW55W10gPT4ge1xyXG4gICAgICAgIGNvbnN0IG1haW5Sb3dBcnJheTogYW55W10gPSBbXTtcclxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucy5sZW5ndGggKyAxO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBmaXJzdEluZGV4OyBpIDw9IGxhc3RJbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdzogVCA9IHRoaXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgY29uc3QgbWFpblJvd0NvbEFycmF5OiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbCBvZiB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtblZhbHVlID0gcm93W2NvbC5pZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sLnJlbmRlckh5YnJpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtblZhbHVlID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmh5YnJpZEZ1bmN0aW9uKGNvbCwgcm93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1haW5Sb3dDb2xBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBjb2wudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBoaWRkZW46IGNvbC5oaWRkZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsVmFsdWU6IHJvd1tjb2wuaWRdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IGNvbC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBjb2wuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyYWJsZTogY29sLmZpbHRlcmFibGUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYWluUm93QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICByb3dEYXRhOiBKU09OLnN0cmluZ2lmeShyb3cpLFxyXG4gICAgICAgICAgICAgICAga2V5Q29sdW1uOiByb3dbdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmtleUNvbHVtbl0sXHJcbiAgICAgICAgICAgICAgICBtYWluUm93Q29sQXJyYXksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGg6IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2x1bW5zLmxlbmd0aCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYWluUm93QXJyYXk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9qcy9zZXJ2aWNlcy9HcmlkVGVtcGxhdGVTZXJ2aWNlLnRzIiwiY29uc3Qgc2VsZWN0ZWQgPSAoaW5wdXQ6IG51bWJlciwgdmFsdWU6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gaW5wdXQgPT09IHZhbHVlID8gXCJzZWxlY3RlZFwiIDogXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGVkO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL1NlbGVjdGVkLnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgIDx0ciBkYXRhLWhlYWRlci1pZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBjbGFzcz1cXFwiY29sLXNldHRpbmdzLWhpZGRlbi1jaGVja2JveCBndWkgbS1yLTEwXFxcIiB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxHcmlkb29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXENoZWNrZWQudHNcIikpLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaGlkZGVuIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XFxyXFxuICAgICAgICAgICAgICAgIDwvdHI+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgb2YtaGlkZGVuIHAtMTAgbWluLXctNTAgdy1hdXRvIGZsdWlkLWggZmxleCBjb2x1bW4gY29udGFpbmVyXFxcIiA+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbC1zZXR0aW5ncy1oZWFkZXJcXFwiIHN0eWxlPVxcXCJ3aWR0aDogMTAwJVxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJndWkgbWluaSBmbHVpZCBpY29uIGlucHV0XFxcIj5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImNvbC1zZXR0aW5ncy1maWx0ZXJcXFwiIHR5cGU9XFxcInRleHRcXFwiIHBsYWNlaG9sZGVyPVxcXCJTZWFyY2ggZmlsdGVyLi4uXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwic2VhcmNoIGljb25cXFwiPjwvaT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIG0tdC0xMFxcXCI+XFxyXFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImd1aSBsZWZ0IHNob3ctYWxsLWNvbHVtblxcXCI+U2hvdyBBbGw8L2E+XFxyXFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImd1aSByaWdodCBoaWRlLWFsbC1jb2x1bW5cXFwiPkhpZGUgQWxsPC9hPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJndWkgY2xlYXJcXFwiPjwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGNsZWFyXFxcIj48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29sLXNldHRpbmdzLXRhYmxlIGd1aSBmbHVpZCBoLTkwIG9mLWF1dG8gcC01IG0tdC0xMFxcXCIgPlxcclxcbiAgICAgICAgPHRhYmxlIGNsYXNzPVxcXCJndWkgc21hbGwgdmVyeSBib3JkZXItbGVzcyBiYXNpYyBjb21wYWN0IHRhYmxlXFxcIj5cXHJcXG4gICAgICAgICAgICA8dGJvZHk+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sdW1ucyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L3Rib2R5PlxcclxcbiAgICAgICAgPC90YWJsZT5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XCI7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZ3JpZC1tYW5hZ2UtY29sdW1ucy5oYnNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiY29uc3QgY2hlY2tlZCA9IChib29sOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiAhYm9vbCA/IFwiY2hlY2tlZFwiIDogXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNoZWNrZWQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyIsInZhciBIYW5kbGViYXJzID0gcmVxdWlyZShcImhhbmRsZWJhcnNcIik7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcR3JpZG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxDb2x1bW4udHNcIikpLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSxkZXB0aDAse1wibmFtZVwiOlwiQ29sdW1uXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlclxcXCIgaWQ9XFxcImhlYWRlci1cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIGRhdGEtaGVhZGVyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIHN1YiBoZWFkZXJcXFwiPlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9zcGFuPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNvcnRhYmxlIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSg0LCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxcblwiO1xufSxcIjRcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcR3JpZG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxPcmRlcmVkLnRzXCIpKS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm9yZGVyIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJPcmRlcmVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiPHN0eWxlPlxcbiAgICAuaW5uZXItY29udGFpbmVyIHtcXG4gICAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgICAgICB3aWR0aDogMTAwJTtcXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICB9XFxuXFxuICAgIC50YWJsZS1oZWFkZXIge1xcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICAgICAgdG9wOjAgIWltcG9ydGFudDtcXG4gICAgfVxcblxcbiAgICAudGFibGUtYm9keSB7XFxuICAgICAgICBvdmVyZmxvdzogYXV0bztcXG4gICAgICAgIGZsZXg6IDU7XFxuICAgIH1cXG4gICAgLnRhYmxlLWZvb3RlcntcXG4gICAgICAgIGhlaWdodDogMzVweDtcXG4gICAgICAgIHBhZGRpbmc6IDVweDtcXG4gICAgfVxcbiAgICAudGFibGUtZm9vdGVyIC5mb290ZXItbWlkZGxle1xcbiAgICAgICAgZGlzcGxheTogZmxleDtcXG4gICAgfVxcbiAgICAudGFibGUtZm9vdGVyIC5mb290ZXItcmlnaHR7XFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICB9XFxuICAgIC5tYXJnaW4tYXV0b3tcXG4gICAgICAgIG1hcmdpbjogYXV0byAhaW1wb3J0YW50O1xcbiAgICB9XFxuICAgIC5yZW1vdmUtbGFiZWw6aG92ZXJ7XFxuICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcbiAgICAuYm9yZGVyLWxlc3MgdHIgdGQsLmJvcmRlci1sZXNzIHsgYm9yZGVyOiAwcHggIWltcG9ydGFudDsgfVxcbiAgICAuY3Vyc29yLXBvaW50ZXJ7XFxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIH1cXG4gICAgLnVpLnN1cGVyY29tcGFjdC5pY29uLmJ1dHRvbiwgLnVpLnN1cGVyY29tcGFjdC5pY29uLmJ1dHRvbnMgLmJ1dHRvbiB7XFxuICAgICAgICBwYWRkaW5nOiAuM2VtIC4zZW0gLjNlbSAuM2VtICFpbXBvcnRhbnQ7XFxuICAgIH1cXG48L3N0eWxlPlxcbjxkaXYgY2xhc3M9XFxcImlubmVyLWNvbnRhaW5lciBndWkgZmx1aWQgY29udGFpbmVyXFxcIiBzdHlsZT1cXFwicGFkZGluZzowJTtcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ0YWJsZS1oZWFkZXJcXFwiPlxcbiAgICAgICAgPHRhYmxlIGlkPVxcXCJoZWFkZXJ0YWJsZVxcXCIgY2xhc3M9XFxcImd1aSBiYXNpYyBsYXJnZSBjb21wYWN0IHNvcnRhYmxlIGZpeGVkIHNpbmdsZSBsaW5lIHRhYmxlXFxcIj5cXG4gICAgICAgICAgICA8Y29sZ3JvdXAgY2xhc3M9XFxcImhlYWRlckNvbEdyb3VwXFxcIj5cXG4gICAgICAgICAgICAgICAgPGNvbCBzdHlsZT1cXFwid2lkdGg6NDBweDtcXFwiIC8+XFxuICAgICAgICAgICAgICAgIDxjb2wgc3R5bGU9XFxcIndpZHRoOjQwcHg7XFxcIiAvPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sdW1ucyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L2NvbGdyb3VwPlxcbiAgICAgICAgICAgIDx0aGVhZD5cXG4gICAgICAgICAgICAgICAgPHRyPlxcbiAgICAgICAgICAgICAgICAgICAgPHRoPjwvdGg+XFxuICAgICAgICAgICAgICAgICAgICA8dGg+PGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBjbGFzcz1cXFwic2VsZWN0LWFsbC1jaGVja2JveCBjdXJzb3ItcG9pbnRlclxcXCI+PC90aD5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbHVtbnMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAgPC90aGVhZD5cXG4gICAgICAgIDwvdGFibGU+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ0YWJsZS1ib2R5XFxcIj5cXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cXFwiZ3VpIGJhc2ljIGxhcmdlIGNvbXBhY3QgZml4ZWQgc2VsZWN0YWJsZSBzaW5nbGUgbGluZSB0YWJsZSBtYWluVGFibGVcXFwiPlxcbiAgICAgICAgICAgIDxjb2xncm91cCBjbGFzcz1cXFwiYm9keUNvbEdyb3VwXFxcIj5cXG4gICAgICAgICAgICAgICAgPGNvbCBzdHlsZT1cXFwid2lkdGg6NDBweDtcXFwiIC8+IFxcbiAgICAgICAgICAgICAgICA8Y29sIHN0eWxlPVxcXCJ3aWR0aDo0MHB4O1xcXCIgLz5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbHVtbnMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgPC9jb2xncm91cD5cXG4gICAgICAgICAgICA8dGJvZHkgY2xhc3M9XFxcIm1haW5UYWJsZUJvZHlcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEdyaWRvb1xcXFxzcmNcXFxcaGJzXFxcXGdyaWQtbWFpbi1yb3cuaGJzXCIpLGRlcHRoMCx7XCJuYW1lXCI6XCJncmlkLW1haW4tcm93XCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICAgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L3Rib2R5PlxcbiAgICAgICAgPC90YWJsZT5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInRhYmxlLWZvb3RlciBndWkgaC1hdXRvIGZsdWlkLXcgYmFzaWMgY3VydmVkIHJvdyBwLTUgbS0wXFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxHcmlkb29cXFxcc3JjXFxcXGhic1xcXFxncmlkLWZvb3Rlci5oYnNcIiksZGVwdGgwLHtcIm5hbWVcIjpcImdyaWQtZm9vdGVyXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvZGl2PlxcbjwvZGl2PlwiO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZ3JpZC5oYnNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiY29uc3QgQ29sdW1uID0gKGNvbCk6IHN0cmluZyA9PiB7XHJcbiAgICBjb25zdCBjYWxjV2lkdGg6IG51bWJlciA9IGNvbC5oaWRkZW4gPyAwIDogY29sLndpZHRoO1xyXG4gICAgY29uc3QgZGF0YUF0dHJJZCA9ICdkYXRhLWhlYWRlci1pZD1cIicgKyBjb2wuaWQgKyAnXCInO1xyXG4gICAgcmV0dXJuICc8Y29sIHN0eWxlPVwid2lkdGggOiAnICsgY2FsY1dpZHRoICsgJ3B4O1wiJyArIGRhdGFBdHRySWQgKyBcIiAvPlwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29sdW1uO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL0NvbHVtbi50cyIsImltcG9ydCB7IEdyaWRPcmRlckRpcmVjdGlvbiB9IGZyb20gXCIuLi8uLi9qcy9tb2RlbHMvR3JpZE9yZGVyRGlyZWN0aW9uXCI7XHJcblxyXG5jb25zdCBvcmRlcmVkID0gKG9yZGVyOiBHcmlkT3JkZXJEaXJlY3Rpb24pOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKG9yZGVyID09PSBHcmlkT3JkZXJEaXJlY3Rpb24uQXNjKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBndWktaWNvbi1hcnJvdy11cFxcXCIgPjwvaT4gXCI7XHJcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSBHcmlkT3JkZXJEaXJlY3Rpb24uRGVzYykge1xyXG4gICAgICAgIHJldHVybiBcIjxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tYXJyb3ctZG93blxcXCIgPjwvaT4gXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBcIjxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tYXJyb3ctdXAgZ3VpLWhpZGRlblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiID48L2k+IFwiICtcclxuICAgICAgICAgICAgICAgXCI8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGd1aS1pY29uLWFycm93LWRvd24gZ3VpLWhpZGRlblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiID48L2k+XCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBvcmRlcmVkO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL09yZGVyZWQudHMiXSwic291cmNlUm9vdCI6IiJ9